!function(window,angular,undefined){"use strict";!function(){angular.module("ngMaterial",["ng","ngAnimate","ngAria","material.core","material.core.gestures","material.core.theming.palette","material.core.theming","material.components.autocomplete","material.components.backdrop","material.components.bottomSheet","material.components.button","material.components.card","material.components.checkbox","material.components.chips","material.components.content","material.components.dialog","material.components.divider","material.components.gridList","material.components.icon","material.components.input","material.components.list","material.components.progressCircular","material.components.progressLinear","material.components.radioButton","material.components.select","material.components.sidenav","material.components.slider","material.components.sticky","material.components.subheader","material.components.swipe","material.components.switch","material.components.tabs","material.components.toast","material.components.toolbar","material.components.tooltip","material.components.whiteframe"])}(),function(){function MdCoreConfigure($provide,$mdThemingProvider){$provide.decorator("$$rAF",["$delegate",rAFDecorator]),$mdThemingProvider.theme("default").primaryPalette("indigo").accentPalette("pink").warnPalette("red").backgroundPalette("grey")}function rAFDecorator($delegate){return $delegate.throttle=function(cb){var queueArgs,alreadyQueued,queueCb,context;return function(){queueArgs=arguments,context=this,queueCb=cb,alreadyQueued||(alreadyQueued=!0,$delegate(function(){queueCb.apply(context,queueArgs),alreadyQueued=!1}))}},$delegate}angular.module("material.core",["material.core.gestures","material.core.theming"]).config(MdCoreConfigure),MdCoreConfigure.$inject=["$provide","$mdThemingProvider"]}(),function(){function MdConstantFactory($$rAF,$sniffer){function vendorProperty(name){return webkit?"webkit"+name.charAt(0).toUpperCase()+name.substring(1):name}var webkit=/webkit/i.test($sniffer.vendorPrefix);return{KEY_CODE:{ENTER:13,ESCAPE:27,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},CSS:{TRANSITIONEND:"transitionend"+(webkit?" webkitTransitionEnd":""),ANIMATIONEND:"animationend"+(webkit?" webkitAnimationEnd":""),TRANSFORM:vendorProperty("transform"),TRANSFORM_ORIGIN:vendorProperty("transformOrigin"),TRANSITION:vendorProperty("transition"),TRANSITION_DURATION:vendorProperty("transitionDuration"),ANIMATION_PLAY_STATE:vendorProperty("animationPlayState"),ANIMATION_DURATION:vendorProperty("animationDuration"),ANIMATION_NAME:vendorProperty("animationName"),ANIMATION_TIMING:vendorProperty("animationTimingFunction"),ANIMATION_DIRECTION:vendorProperty("animationDirection")},MEDIA:{sm:"(max-width: 600px)","gt-sm":"(min-width: 600px)",md:"(min-width: 600px) and (max-width: 960px)","gt-md":"(min-width: 960px)",lg:"(min-width: 960px) and (max-width: 1200px)","gt-lg":"(min-width: 1200px)"},MEDIA_PRIORITY:["gt-lg","lg","gt-md","md","gt-sm","sm"]}}angular.module("material.core").factory("$mdConstant",MdConstantFactory),MdConstantFactory.$inject=["$$rAF","$sniffer"]}(),function(){function MdIterator(items,reloop){function getItems(){return[].concat(_items)}function count(){return _items.length}function inRange(index){return _items.length&&index>-1&&index<_items.length}function hasNext(item){return item?inRange(indexOf(item)+1):!1}function hasPrevious(item){return item?inRange(indexOf(item)-1):!1}function itemAt(index){return inRange(index)?_items[index]:null}function findBy(key,val){return _items.filter(function(item){return item[key]===val})}function add(item,index){return item?(angular.isNumber(index)||(index=_items.length),_items.splice(index,0,item),indexOf(item)):-1}function remove(item){contains(item)&&_items.splice(indexOf(item),1)}function indexOf(item){return _items.indexOf(item)}function contains(item){return item&&indexOf(item)>-1}function first(){return _items.length?_items[0]:null}function last(){return _items.length?_items[_items.length-1]:null}function findSubsequentItem(backwards,item,validate,limit){validate=validate||trueFn;for(var curIndex=indexOf(item);;){if(!inRange(curIndex))return null;var nextIndex=curIndex+(backwards?-1:1),foundItem=null;if(inRange(nextIndex)?foundItem=_items[nextIndex]:reloop&&(foundItem=backwards?last():first(),nextIndex=indexOf(foundItem)),null===foundItem||nextIndex===limit)return null;if(validate(foundItem))return foundItem;angular.isUndefined(limit)&&(limit=nextIndex),curIndex=nextIndex}}var trueFn=function(){return!0};items&&!angular.isArray(items)&&(items=Array.prototype.slice.call(items)),reloop=!!reloop;var _items=items||[];return{items:getItems,count:count,inRange:inRange,contains:contains,indexOf:indexOf,itemAt:itemAt,findBy:findBy,add:add,remove:remove,first:first,last:last,next:angular.bind(null,findSubsequentItem,!1),previous:angular.bind(null,findSubsequentItem,!0),hasPrevious:hasPrevious,hasNext:hasNext}}angular.module("material.core").config(["$provide",function($provide){$provide.decorator("$mdUtil",["$delegate",function($delegate){return $delegate.iterator=MdIterator,$delegate}])}])}(),function(){function mdMediaFactory($mdConstant,$rootScope,$window){function $mdMedia(query){var validated=queries[query];angular.isUndefined(validated)&&(validated=queries[query]=validate(query));var result=results[validated];return angular.isUndefined(result)&&(result=add(validated)),result}function validate(query){return $mdConstant.MEDIA[query]||("("!==query.charAt(0)?"("+query+")":query)}function add(query){var result=mqls[query]=$window.matchMedia(query);return result.addListener(onQueryChange),results[result.media]=!!result.matches}function onQueryChange(query){$rootScope.$evalAsync(function(){results[query.media]=!!query.matches})}function getQuery(name){return mqls[name]}function getResponsiveAttribute(attrs,attrName){for(var i=0;i<$mdConstant.MEDIA_PRIORITY.length;i++){var mediaName=$mdConstant.MEDIA_PRIORITY[i];if(mqls[queries[mediaName]].matches){var normalizedName=getNormalizedName(attrs,attrName+"-"+mediaName);if(attrs[normalizedName])return attrs[normalizedName]}}return attrs[getNormalizedName(attrs,attrName)]}function watchResponsiveAttributes(attrNames,attrs,watchFn){var unwatchFns=[];return attrNames.forEach(function(attrName){var normalizedName=getNormalizedName(attrs,attrName);attrs[normalizedName]&&unwatchFns.push(attrs.$observe(normalizedName,angular.bind(void 0,watchFn,null)));for(var mediaName in $mdConstant.MEDIA){if(normalizedName=getNormalizedName(attrs,attrName+"-"+mediaName),!attrs[normalizedName])return;unwatchFns.push(attrs.$observe(normalizedName,angular.bind(void 0,watchFn,mediaName)))}}),function(){unwatchFns.forEach(function(fn){fn()})}}function getNormalizedName(attrs,attrName){return normalizeCache[attrName]||(normalizeCache[attrName]=attrs.$normalize(attrName))}var queries={},mqls={},results={},normalizeCache={};return $mdMedia.getResponsiveAttribute=getResponsiveAttribute,$mdMedia.getQuery=getQuery,$mdMedia.watchResponsiveAttributes=watchResponsiveAttributes,$mdMedia}angular.module("material.core").factory("$mdMedia",mdMediaFactory),mdMediaFactory.$inject=["$mdConstant","$rootScope","$window"]}(),function(){var nextUniqueId=0;angular.module("material.core").factory("$mdUtil",["$cacheFactory","$document","$timeout","$q","$window","$mdConstant",function($cacheFactory,$document,$timeout,$q,$window,$mdConstant){function getNode(el){return el[0]||el}var Util;return Util={now:window.performance?angular.bind(window.performance,window.performance.now):Date.now,clientRect:function(element,offsetParent,isOffsetRect){var node=getNode(element);offsetParent=getNode(offsetParent||node.offsetParent||document.body);var nodeRect=node.getBoundingClientRect(),offsetRect=isOffsetRect?offsetParent.getBoundingClientRect():{left:0,top:0,width:0,height:0};return{left:nodeRect.left-offsetRect.left,top:nodeRect.top-offsetRect.top,width:nodeRect.width,height:nodeRect.height}},offsetRect:function(element,offsetParent){return Util.clientRect(element,offsetParent,!0)},disableScrollAround:function(element){function disableElementScroll(){function disableKeyNav(e){disableTarget.contains(e.target)&&(e.preventDefault(),e.stopImmediatePropagation())}function preventDefault(e){e.preventDefault()}var scrollMask=angular.element('<div class="md-scroll-mask"><div class="md-scroll-mask-bar"></div></div>'),computedStyle=$window.getComputedStyle(disableTarget),disableRect=disableTarget.getBoundingClientRect(),scrollWidth=disableRect.width-disableTarget.clientWidth;return applyStyles(scrollMask[0],{zIndex:"auto"==computedStyle.zIndex?2:computedStyle.zIndex+1,width:disableRect.width+"px",height:disableRect.height+"px",top:disableRect.top+"px",left:disableRect.left+"px"}),scrollMask[0].firstElementChild.style.width=scrollWidth+"px",$document[0].body.appendChild(scrollMask[0]),scrollMask.on("wheel",preventDefault),scrollMask.on("touchmove",preventDefault),$document.on("keydown",disableKeyNav),function(){scrollMask.off("wheel"),scrollMask.off("touchmove"),scrollMask[0].parentNode.removeChild(scrollMask[0]),$document.off("keydown",disableKeyNav)}}function disableBodyScroll(){var restoreStyle=disableTarget.getAttribute("style")||"",scrollOffset=disableTarget.scrollTop;return applyStyles(disableTarget,{position:"fixed",width:"100%",overflowY:"scroll",top:-scrollOffset+"px"}),function(){disableTarget.setAttribute("style",restoreStyle),disableTarget.scrollTop=scrollOffset}}function applyStyles(el,styles){for(var key in styles)el.style[key]=styles[key]}function isScrolling(el){return el instanceof angular.element&&(el=el[0]),el.scrollHeight>el.offsetHeight}element=element instanceof angular.element?element[0]:element;for(var disableTarget,parentEl=element;parentEl=this.getClosest(parentEl,"MD-CONTENT",!0);)isScrolling(parentEl)&&(disableTarget=angular.element(parentEl)[0]);return disableTarget||(disableTarget=$document[0].body,isScrolling(disableTarget))?"BODY"==disableTarget.nodeName?disableBodyScroll():disableElementScroll():angular.noop},floatingScrollbars:function(){if(this.floatingScrollbars.cached===undefined){var tempNode=angular.element('<div style="width: 100%; z-index: -1; position: absolute; height: 35px; overflow-y: scroll"><div style="height: 60;"></div></div>');$document[0].body.appendChild(tempNode[0]),this.floatingScrollbars.cached=tempNode[0].offsetWidth==tempNode[0].childNodes[0].offsetWidth,tempNode.remove()}return this.floatingScrollbars.cached},forceFocus:function(element){var node=element[0]||element;document.addEventListener("click",function focusOnClick(ev){ev.target===node&&ev.$focus&&(node.focus(),ev.stopImmediatePropagation(),ev.preventDefault(),node.removeEventListener("click",focusOnClick))},!0);var newEvent=document.createEvent("MouseEvents");newEvent.initMouseEvent("click",!1,!0,window,{},0,0,0,0,!1,!1,!1,!1,0,null),newEvent.$material=!0,newEvent.$focus=!0,node.dispatchEvent(newEvent)},transitionEndPromise:function(element,opts){function finished(ev){ev&&ev.target!==element[0]||(element.off($mdConstant.CSS.TRANSITIONEND,finished),deferred.resolve())}opts=opts||{};var deferred=$q.defer();return element.on($mdConstant.CSS.TRANSITIONEND,finished),opts.timeout&&$timeout(finished,opts.timeout),deferred.promise},fakeNgModel:function(){return{$fake:!0,$setTouched:angular.noop,$setViewValue:function(value){this.$viewValue=value,this.$render(value),this.$viewChangeListeners.forEach(function(cb){cb()})},$isEmpty:function(value){return 0===(""+value).length},$parsers:[],$formatters:[],$viewChangeListeners:[],$render:angular.noop}},debounce:function(func,wait,scope,invokeApply){var timer;return function(){var context=scope,args=Array.prototype.slice.call(arguments);$timeout.cancel(timer),timer=$timeout(function(){timer=undefined,func.apply(context,args)},wait||10,invokeApply)}},throttle:function(func,delay){var recent;return function(){var context=this,args=arguments,now=Util.now();(!recent||now-recent>delay)&&(func.apply(context,args),recent=now)}},time:function(cb){var start=Util.now();return cb(),Util.now()-start},nextUid:function(){return""+nextUniqueId++},disconnectScope:function(scope){if(scope&&scope.$root!==scope&&!scope.$$destroyed){var parent=scope.$parent;scope.$$disconnected=!0,parent.$$childHead===scope&&(parent.$$childHead=scope.$$nextSibling),parent.$$childTail===scope&&(parent.$$childTail=scope.$$prevSibling),scope.$$prevSibling&&(scope.$$prevSibling.$$nextSibling=scope.$$nextSibling),scope.$$nextSibling&&(scope.$$nextSibling.$$prevSibling=scope.$$prevSibling),scope.$$nextSibling=scope.$$prevSibling=null}},reconnectScope:function(scope){if(scope&&scope.$root!==scope&&scope.$$disconnected){var child=scope,parent=child.$parent;child.$$disconnected=!1,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child}},getClosest:function(el,tagName,onlyParent){if(el instanceof angular.element&&(el=el[0]),tagName=tagName.toUpperCase(),onlyParent&&(el=el.parentNode),!el)return null;do if(el.nodeName===tagName)return el;while(el=el.parentNode);return null},extractElementByName:function(element,nodeName){for(var i=0,len=element.length;len>i;i++)if(element[i].nodeName.toLowerCase()===nodeName)return angular.element(element[i]);return element},initOptionalProperties:function(scope,attr,defaults){defaults=defaults||{},angular.forEach(scope.$$isolateBindings,function(binding,key){if(binding.optional&&angular.isUndefined(scope[key])){var hasKey=attr.hasOwnProperty(attr.$normalize(binding.attrName));scope[key]=angular.isDefined(defaults[key])?defaults[key]:hasKey}})}}}]),angular.element.prototype.focus=angular.element.prototype.focus||function(){return this.length&&this[0].focus(),this},angular.element.prototype.blur=angular.element.prototype.blur||function(){return this.length&&this[0].blur(),this}}(),function(){function AriaService($$rAF,$log,$window){function expect(element,attrName,defaultValue){var node=element[0]||element;!node||node.hasAttribute(attrName)&&0!==node.getAttribute(attrName).length||childHasAttribute(node,attrName)||(defaultValue=angular.isString(defaultValue)?defaultValue.trim():"",defaultValue.length?element.attr(attrName,defaultValue):$log.warn('ARIA: Attribute "',attrName,'", required for accessibility, is missing on node:',node))}function expectAsync(element,attrName,defaultValueGetter){$$rAF(function(){expect(element,attrName,defaultValueGetter())})}function expectWithText(element,attrName){expectAsync(element,attrName,function(){return getText(element)})}function getText(element){return element.text().trim()}function childHasAttribute(node,attrName){function isHidden(el){var style=el.currentStyle?el.currentStyle:$window.getComputedStyle(el);return"none"===style.display}var hasChildren=node.hasChildNodes(),hasAttr=!1;if(hasChildren)for(var children=node.childNodes,i=0;i<children.length;i++){var child=children[i];1===child.nodeType&&child.hasAttribute(attrName)&&(isHidden(child)||(hasAttr=!0))}return hasAttr}return{expect:expect,expectAsync:expectAsync,expectWithText:expectWithText}}angular.module("material.core").service("$mdAria",AriaService),AriaService.$inject=["$$rAF","$log","$window"]}(),function(){function mdCompilerService($q,$http,$injector,$compile,$controller,$templateCache){this.compile=function(options){var templateUrl=options.templateUrl,template=options.template||"",controller=options.controller,controllerAs=options.controllerAs,resolve=options.resolve||{},locals=options.locals||{},transformTemplate=options.transformTemplate||angular.identity,bindToController=options.bindToController;return angular.forEach(resolve,function(value,key){angular.isString(value)?resolve[key]=$injector.get(value):resolve[key]=$injector.invoke(value)}),angular.extend(resolve,locals),templateUrl?resolve.$template=$http.get(templateUrl,{cache:$templateCache}).then(function(response){return response.data}):resolve.$template=$q.when(template),$q.all(resolve).then(function(locals){var template=transformTemplate(locals.$template),element=options.element||angular.element("<div>").html(template.trim()).contents(),linkFn=$compile(element);return{locals:locals,element:element,link:function(scope){if(locals.$scope=scope,controller){var invokeCtrl=$controller(controller,locals,!0);bindToController&&angular.extend(invokeCtrl.instance,locals);var ctrl=invokeCtrl();element.data("$ngControllerController",ctrl),element.children().data("$ngControllerController",ctrl),controllerAs&&(scope[controllerAs]=ctrl)}return linkFn(scope)}}})}}angular.module("material.core").service("$mdCompiler",mdCompilerService),mdCompilerService.$inject=["$q","$http","$injector","$compile","$controller","$templateCache"]}(),function(){function MdGestureProvider(){}function MdGesture($$MdGestureHandler,$$rAF,$timeout){function register(element,handlerName,options){var handler=HANDLERS[handlerName.replace(/^\$md./,"")];if(!handler)throw new Error("Failed to register element with handler "+handlerName+". Available handlers: "+Object.keys(HANDLERS).join(", "));return handler.registerElement(element,options)}function addHandler(name,definition){var handler=new $$MdGestureHandler(name);return angular.extend(handler,definition),HANDLERS[name]=handler,self}var userAgent=navigator.userAgent||navigator.vendor||window.opera,isIos=userAgent.match(/ipad|iphone|ipod/i),isAndroid=userAgent.match(/android/i),hasJQuery="undefined"!=typeof window.jQuery&&angular.element===window.jQuery,self={handler:addHandler,register:register,isHijackingClicks:(isIos||isAndroid)&&!hasJQuery&&!forceSkipClickHijack};return self.isHijackingClicks&&self.handler("click",{options:{maxDistance:6},onEnd:function(ev,pointer){pointer.distance<this.state.options.maxDistance&&this.dispatchEvent(ev,"click")}}),self.handler("press",{onStart:function(ev,pointer){this.dispatchEvent(ev,"$md.pressdown")},onEnd:function(ev,pointer){this.dispatchEvent(ev,"$md.pressup")}}).handler("hold",{options:{maxDistance:6,delay:500},onCancel:function(){$timeout.cancel(this.state.timeout)},onStart:function(ev,pointer){return this.state.registeredParent?(this.state.pos={x:pointer.x,y:pointer.y},void(this.state.timeout=$timeout(angular.bind(this,function(){this.dispatchEvent(ev,"$md.hold"),this.cancel()}),this.state.options.delay,!1))):this.cancel()},onMove:function(ev,pointer){ev.preventDefault();var dx=this.state.pos.x-pointer.x,dy=this.state.pos.y-pointer.y;Math.sqrt(dx*dx+dy*dy)>this.options.maxDistance&&this.cancel()},onEnd:function(){this.onCancel()}}).handler("drag",{options:{minDistance:6,horizontal:!0,cancelMultiplier:1.5},onStart:function(ev){this.state.registeredParent||this.cancel()},onMove:function(ev,pointer){var shouldStartDrag,shouldCancel;ev.preventDefault(),this.state.dragPointer?this.dispatchDragMove(ev):(this.state.options.horizontal?(shouldStartDrag=Math.abs(pointer.distanceX)>this.state.options.minDistance,shouldCancel=Math.abs(pointer.distanceY)>this.state.options.minDistance*this.state.options.cancelMultiplier):(shouldStartDrag=Math.abs(pointer.distanceY)>this.state.options.minDistance,shouldCancel=Math.abs(pointer.distanceX)>this.state.options.minDistance*this.state.options.cancelMultiplier),shouldStartDrag?(this.state.dragPointer=makeStartPointer(ev),updatePointerState(ev,this.state.dragPointer),this.dispatchEvent(ev,"$md.dragstart",this.state.dragPointer)):shouldCancel&&this.cancel())},dispatchDragMove:$$rAF.throttle(function(ev){this.state.isRunning&&(updatePointerState(ev,this.state.dragPointer),this.dispatchEvent(ev,"$md.drag",this.state.dragPointer))}),onEnd:function(ev,pointer){this.state.dragPointer&&(updatePointerState(ev,this.state.dragPointer),this.dispatchEvent(ev,"$md.dragend",this.state.dragPointer))}}).handler("swipe",{options:{minVelocity:.65,minDistance:10},onEnd:function(ev,pointer){if(Math.abs(pointer.velocityX)>this.state.options.minVelocity&&Math.abs(pointer.distanceX)>this.state.options.minDistance){var eventType="left"==pointer.directionX?"$md.swipeleft":"$md.swiperight";this.dispatchEvent(ev,eventType)}}})}function GestureHandler(name){this.name=name,this.state={}}function MdGestureHandler(){function jQueryDispatchEvent(srcEvent,eventType,eventPointer){eventPointer=eventPointer||pointer;var eventObj=new angular.element.Event(eventType);eventObj.$material=!0,eventObj.pointer=eventPointer,eventObj.srcEvent=srcEvent,angular.extend(eventObj,{clientX:eventPointer.x,clientY:eventPointer.y,screenX:eventPointer.x,screenY:eventPointer.y,pageX:eventPointer.x,pageY:eventPointer.y,ctrlKey:srcEvent.ctrlKey,altKey:srcEvent.altKey,shiftKey:srcEvent.shiftKey,metaKey:srcEvent.metaKey}),angular.element(eventPointer.target).trigger(eventObj)}function nativeDispatchEvent(srcEvent,eventType,eventPointer){eventPointer=eventPointer||pointer;var eventObj;"click"===eventType?(eventObj=document.createEvent("MouseEvents"),eventObj.initMouseEvent("click",!0,!0,window,srcEvent.detail,eventPointer.x,eventPointer.y,eventPointer.x,eventPointer.y,srcEvent.ctrlKey,srcEvent.altKey,srcEvent.shiftKey,srcEvent.metaKey,srcEvent.button,srcEvent.relatedTarget||null)):(eventObj=document.createEvent("CustomEvent"),eventObj.initCustomEvent(eventType,!0,!0,{})),eventObj.$material=!0,eventObj.pointer=eventPointer,eventObj.srcEvent=srcEvent,eventPointer.target.dispatchEvent(eventObj)}var hasJQuery="undefined"!=typeof window.jQuery&&angular.element===window.jQuery;return GestureHandler.prototype={options:{},dispatchEvent:hasJQuery?jQueryDispatchEvent:nativeDispatchEvent,onStart:angular.noop,onMove:angular.noop,onEnd:angular.noop,onCancel:angular.noop,start:function(ev,pointer){if(!this.state.isRunning){var parentTarget=this.getNearestParent(ev.target),parentTargetOptions=parentTarget&&parentTarget.$mdGesture[this.name]||{};this.state={isRunning:!0,options:angular.extend({},this.options,parentTargetOptions),registeredParent:parentTarget},this.onStart(ev,pointer)}},move:function(ev,pointer){this.state.isRunning&&this.onMove(ev,pointer)},end:function(ev,pointer){this.state.isRunning&&(this.onEnd(ev,pointer),this.state.isRunning=!1)},cancel:function(ev,pointer){this.onCancel(ev,pointer),this.state={}},getNearestParent:function(node){for(var current=node;current;){if((current.$mdGesture||{})[this.name])return current;current=current.parentNode}return null},registerElement:function(element,options){function onDestroy(){delete element[0].$mdGesture[self.name],element.off("$destroy",onDestroy)}var self=this;return element[0].$mdGesture=element[0].$mdGesture||{},element[0].$mdGesture[this.name]=options||{},element.on("$destroy",onDestroy),onDestroy}},GestureHandler}function attachToDocument($mdGesture,$$MdGestureHandler){function runHandlers(handlerEvent,event){var handler;for(var name in HANDLERS)handler=HANDLERS[name],handler instanceof $$MdGestureHandler&&("start"===handlerEvent&&handler.cancel(),handler[handlerEvent](event,pointer))}function gestureStart(ev){if(!pointer){var now=+Date.now();lastPointer&&!typesMatch(ev,lastPointer)&&now-lastPointer.endTime<1500||(pointer=makeStartPointer(ev),runHandlers("start",ev))}}function gestureMove(ev){pointer&&typesMatch(ev,pointer)&&(updatePointerState(ev,pointer),runHandlers("move",ev))}function gestureEnd(ev){pointer&&typesMatch(ev,pointer)&&(updatePointerState(ev,pointer),pointer.endTime=+Date.now(),runHandlers("end",ev),lastPointer=pointer,pointer=null)}document.contains||(document.contains=function(node){return document.body.contains(node)}),!isInitialized&&$mdGesture.isHijackingClicks&&(document.addEventListener("click",function(ev){var isKeyClick=0===ev.clientX&&0===ev.clientY;isKeyClick||ev.$material||ev.isIonicTap||(ev.preventDefault(),ev.stopPropagation())},!0),isInitialized=!0);var START_EVENTS="mousedown touchstart pointerdown",MOVE_EVENTS="mousemove touchmove pointermove",END_EVENTS="mouseup mouseleave touchend touchcancel pointerup pointercancel";angular.element(document).on(START_EVENTS,gestureStart).on(MOVE_EVENTS,gestureMove).on(END_EVENTS,gestureEnd).on("$$mdGestureReset",function(){lastPointer=pointer=null})}function makeStartPointer(ev){var point=getEventPoint(ev),startPointer={startTime:+Date.now(),target:ev.target,type:ev.type.charAt(0)};return startPointer.startX=startPointer.x=point.pageX,startPointer.startY=startPointer.y=point.pageY,startPointer}function typesMatch(ev,pointer){return ev&&pointer&&ev.type.charAt(0)===pointer.type}function updatePointerState(ev,pointer){var point=getEventPoint(ev),x=pointer.x=point.pageX,y=pointer.y=point.pageY;pointer.distanceX=x-pointer.startX,pointer.distanceY=y-pointer.startY,pointer.distance=Math.sqrt(pointer.distanceX*pointer.distanceX+pointer.distanceY*pointer.distanceY),pointer.directionX=pointer.distanceX>0?"right":pointer.distanceX<0?"left":"",pointer.directionY=pointer.distanceY>0?"up":pointer.distanceY<0?"down":"",pointer.duration=+Date.now()-pointer.startTime,pointer.velocityX=pointer.distanceX/pointer.duration,pointer.velocityY=pointer.distanceY/pointer.duration}function getEventPoint(ev){return ev=ev.originalEvent||ev,ev.touches&&ev.touches[0]||ev.changedTouches&&ev.changedTouches[0]||ev}var pointer,lastPointer,HANDLERS={},forceSkipClickHijack=!1,isInitialized=!1;angular.module("material.core.gestures",[]).provider("$mdGesture",MdGestureProvider).factory("$$MdGestureHandler",MdGestureHandler).run(attachToDocument),MdGestureProvider.prototype={skipClickHijack:function(){return forceSkipClickHijack=!0},$get:["$$MdGestureHandler","$$rAF","$timeout",function($$MdGestureHandler,$$rAF,$timeout){return new MdGesture($$MdGestureHandler,$$rAF,$timeout)}]},MdGesture.$inject=["$$MdGestureHandler","$$rAF","$timeout"],attachToDocument.$inject=["$mdGesture","$$MdGestureHandler"]}(),function(){function InterimElementProvider(){function createInterimElementProvider(interimFactoryName){function setDefaults(definition){return providerConfig.optionsFactory=definition.options,providerConfig.methods=(definition.methods||[]).concat(EXPOSED_METHODS),provider}function addMethod(name,fn){return customMethods[name]=fn,provider}function addPreset(name,definition){if(definition=definition||{},definition.methods=definition.methods||[],definition.options=definition.options||function(){return{}},/^cancel|hide|show$/.test(name))throw new Error("Preset '"+name+"' in "+interimFactoryName+" is reserved!");if(definition.methods.indexOf("_options")>-1)throw new Error("Method '_options' in "+interimFactoryName+" is reserved!");return providerConfig.presets[name]={methods:definition.methods.concat(EXPOSED_METHODS),optionsFactory:definition.options,argOption:definition.argOption},provider}function factory($$interimElement,$animate,$injector){function showInterimElement(opts){return opts&&opts._options&&(opts=opts._options),interimElementService.show(angular.extend({},defaultOptions,opts))}function invokeFactory(factory,defaultVal){var locals={};return locals[interimFactoryName]=publicService,$injector.invoke(factory||function(){return defaultVal},{},locals)}var defaultMethods,defaultOptions,interimElementService=$$interimElement(),publicService={hide:interimElementService.hide,cancel:interimElementService.cancel,show:showInterimElement};return defaultMethods=providerConfig.methods||[],defaultOptions=invokeFactory(providerConfig.optionsFactory,{}),angular.forEach(customMethods,function(fn,name){publicService[name]=fn}),angular.forEach(providerConfig.presets,function(definition,name){function Preset(opts){this._options=angular.extend({},presetDefaults,opts)}var presetDefaults=invokeFactory(definition.optionsFactory,{}),presetMethods=(definition.methods||[]).concat(defaultMethods);if(angular.extend(presetDefaults,{$type:name}),angular.forEach(presetMethods,function(name){Preset.prototype[name]=function(value){return this._options[name]=value,this}}),definition.argOption){var methodName="show"+name.charAt(0).toUpperCase()+name.slice(1);publicService[methodName]=function(arg){var config=publicService[name](arg);return publicService.show(config)}}publicService[name]=function(arg){return arguments.length&&definition.argOption&&!angular.isObject(arg)&&!angular.isArray(arg)?(new Preset)[definition.argOption](arg):new Preset(arg)}}),publicService}var EXPOSED_METHODS=["onHide","onShow","onRemove"],customMethods={},providerConfig={presets:{}},provider={setDefaults:setDefaults,addPreset:addPreset,addMethod:addMethod,$get:factory};return provider.addPreset("build",{methods:["controller","controllerAs","resolve","template","templateUrl","themable","transformTemplate","parent"]}),factory.$inject=["$$interimElement","$animate","$injector"],provider}function InterimElementFactory($document,$q,$rootScope,$timeout,$rootElement,$animate,$interpolate,$mdCompiler,$mdTheming){function replaceInterpolationSymbols(text){return text&&angular.isString(text)?text.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol):text}var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),usesStandardSymbols="{{"===startSymbol&&"}}"===endSymbol,processTemplate=usesStandardSymbols?angular.identity:replaceInterpolationSymbols;return function(){function show(options){if(stack.length)return service.cancel().then(function(){return show(options)});var interimElement=new InterimElement(options);return stack.push(interimElement),interimElement.show().then(function(){return interimElement.deferred.promise})}function hide(response){var interimElement=stack.shift();return interimElement&&interimElement.remove().then(function(){interimElement.deferred.resolve(response)})}function cancel(reason){var interimElement=stack.shift();return $q.when(interimElement&&interimElement.remove().then(function(){interimElement.deferred.reject(reason)}))}function InterimElement(options){var self,hideTimeout,element,showDone,removeDone;return options=options||{},options=angular.extend({preserveScope:!1,scope:options.scope||$rootScope.$new(options.isolateScope),onShow:function(scope,element,options){return $animate.enter(element,options.parent)},onRemove:function(scope,element,options){return element&&$animate.leave(element)||$q.when()}},options),options.template&&(options.template=processTemplate(options.template)),self={options:options,deferred:$q.defer(),show:function(){var compilePromise;return compilePromise=options.skipCompile?$q(function(resolve){resolve({locals:{},link:function(){return options.element}})}):$mdCompiler.compile(options),showDone=compilePromise.then(function(compileData){function startHideTimeout(){options.hideDelay&&(hideTimeout=$timeout(service.cancel,options.hideDelay))}if(angular.extend(compileData.locals,self.options),element=compileData.link(options.scope),angular.isFunction(options.parent)?options.parent=options.parent(options.scope,element,options):angular.isString(options.parent)&&(options.parent=angular.element($document[0].querySelector(options.parent))),!(options.parent||{}).length){var el;$rootElement[0]&&$rootElement[0].querySelector&&(el=$rootElement[0].querySelector(":not(svg) > body")),el||(el=$rootElement[0]),"#comment"==el.nodeName&&(el=$document[0].body),options.parent=angular.element(el)}options.themable&&$mdTheming(element);var ret=options.onShow(options.scope,element,options);return $q.when(ret).then(function(){(options.onComplete||angular.noop)(options.scope,element,options),startHideTimeout()})},function(reason){showDone=!0,self.deferred.reject(reason)})},cancelTimeout:function(){hideTimeout&&($timeout.cancel(hideTimeout),hideTimeout=undefined)},remove:function(){return self.cancelTimeout(),removeDone=$q.when(showDone).then(function(){var ret=element?options.onRemove(options.scope,element,options):!0;return $q.when(ret).then(function(){options.preserveScope||options.scope.$destroy(),removeDone=!0})})}}}var service,stack=[];return service={show:show,hide:hide,cancel:cancel}}}return createInterimElementProvider.$get=InterimElementFactory,InterimElementFactory.$inject=["$document","$q","$rootScope","$timeout","$rootElement","$animate","$interpolate","$mdCompiler","$mdTheming"],
createInterimElementProvider}angular.module("material.core").provider("$$interimElement",InterimElementProvider)}(),function(){function ComponentRegistry($log,$q){function isValidID(handle){return handle&&""!==handle}var self,instances=[],pendings={};return self={notFoundError:function(handle){$log.error("No instance found for handle",handle)},getInstances:function(){return instances},get:function(handle){if(!isValidID(handle))return null;var i,j,instance;for(i=0,j=instances.length;j>i;i++)if(instance=instances[i],instance.$$mdHandle===handle)return instance;return null},register:function(instance,handle){function deregister(){var index=instances.indexOf(instance);-1!==index&&instances.splice(index,1)}function resolveWhen(){var dfd=pendings[handle];dfd&&(dfd.resolve(instance),delete pendings[handle])}return handle?(instance.$$mdHandle=handle,instances.push(instance),resolveWhen(),deregister):angular.noop},when:function(handle){if(isValidID(handle)){var deferred=$q.defer(),instance=self.get(handle);return instance?deferred.resolve(instance):pendings[handle]=deferred,deferred.promise}return $q.reject("Invalid `md-component-id` value.")}}}angular.module("material.core").factory("$mdComponentRegistry",ComponentRegistry),ComponentRegistry.$inject=["$log","$q"]}(),function(){!function(){function MdButtonInkRipple($mdInkRipple){function attach(scope,element,options){var elementOptions=optionsForElement(element);return $mdInkRipple.attach(scope,element,angular.extend(elementOptions,options))}function optionsForElement(element){return element.hasClass("md-icon-button")?{isMenuItem:element.hasClass("md-menu-item"),fitRipple:!0,center:!0}:{isMenuItem:element.hasClass("md-menu-item"),dimBackground:!0}}return{attach:attach}}angular.module("material.core").factory("$mdButtonInkRipple",MdButtonInkRipple),MdButtonInkRipple.$inject=["$mdInkRipple"]}()}(),function(){!function(){function MdCheckboxInkRipple($mdInkRipple){function attach(scope,element,options){return $mdInkRipple.attach(scope,element,angular.extend({center:!0,dimBackground:!1,fitRipple:!0},options))}return{attach:attach}}angular.module("material.core").factory("$mdCheckboxInkRipple",MdCheckboxInkRipple),MdCheckboxInkRipple.$inject=["$mdInkRipple"]}()}(),function(){!function(){function MdListInkRipple($mdInkRipple){function attach(scope,element,options){return $mdInkRipple.attach(scope,element,angular.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},options))}return{attach:attach}}angular.module("material.core").factory("$mdListInkRipple",MdListInkRipple),MdListInkRipple.$inject=["$mdInkRipple"]}()}(),function(){function InkRippleDirective($mdButtonInkRipple,$mdCheckboxInkRipple){return{controller:angular.noop,link:function(scope,element,attr){attr.hasOwnProperty("mdInkRippleCheckbox")?$mdCheckboxInkRipple.attach(scope,element):$mdButtonInkRipple.attach(scope,element)}}}function InkRippleService($window,$timeout){function attach(scope,element,options){function getRippleContainer(){var container=element.data("$mdRippleContainer");return container?container:(container=angular.element('<div class="md-ripple-container">'),element.append(container),element.data("$mdRippleContainer",container),container)}function parseColor(color){function hexToRGBA(color){var hex="#"===color.charAt(0)?color.substr(1):color,dig=hex.length/3,red=hex.substr(0,dig),grn=hex.substr(dig,dig),blu=hex.substr(2*dig);return 1===dig&&(red+=red,grn+=grn,blu+=blu),"rgba("+parseInt(red,16)+","+parseInt(grn,16)+","+parseInt(blu,16)+",0.1)"}function rgbToRGBA(color){return color.replace(")",", 0.1)").replace("(","a(")}if(color)return 0===color.indexOf("rgba")?color.replace(/\d?\.?\d*\s*\)\s*$/,"0.1)"):0===color.indexOf("rgb")?rgbToRGBA(color):0===color.indexOf("#")?hexToRGBA(color):void 0}function removeElement(elem,wait){ripples.splice(ripples.indexOf(elem),1),0===ripples.length&&getRippleContainer().css({backgroundColor:""}),$timeout(function(){elem.remove()},wait,!1)}function updateElement(elem){var index=ripples.indexOf(elem),state=states[index]||{},elemIsActive=ripples.length>1?!1:isActive,elemIsHeld=ripples.length>1?!1:isHeld;elemIsActive||state.animating||elemIsHeld?elem.addClass("md-ripple-visible"):elem&&(elem.removeClass("md-ripple-visible"),options.outline&&elem.css({width:rippleSize+"px",height:rippleSize+"px",marginLeft:-1*rippleSize+"px",marginTop:-1*rippleSize+"px"}),removeElement(elem,options.outline?450:650))}function createRipple(left,top){function getRippleElement(css){var elem=angular.element('<div class="md-ripple" data-counter="'+counter++ +'">');return ripples.unshift(elem),states.unshift({animating:!0}),container.append(elem),css&&elem.css(css),elem}function getRippleSize(left,top){var multiplier,size,rect,width=container.prop("offsetWidth"),height=container.prop("offsetHeight");return options.isMenuItem?size=Math.sqrt(Math.pow(width,2)+Math.pow(height,2)):options.outline?(rect=node.getBoundingClientRect(),left-=rect.left,top-=rect.top,width=Math.max(left,width-left),height=Math.max(top,height-top),size=2*Math.sqrt(Math.pow(width,2)+Math.pow(height,2))):(multiplier=options.fullRipple?1.1:.8,size=Math.sqrt(Math.pow(width,2)+Math.pow(height,2))*multiplier,options.fitRipple&&(size=Math.min(height,width,size))),size}function getRippleCss(size,left,top){function rgbaToRGB(color){return color.replace("rgba","rgb").replace(/,[^\),]+\)/,")")}var rect=node.getBoundingClientRect(),css={backgroundColor:rgbaToRGB(color),borderColor:rgbaToRGB(color),width:size+"px",height:size+"px"};return options.outline?(css.width=0,css.height=0):css.marginLeft=css.marginTop=size*-.5+"px",options.center?css.left=css.top="50%":(css.left=Math.round((left-rect.left)/container.prop("offsetWidth")*100)+"%",css.top=Math.round((top-rect.top)/container.prop("offsetHeight")*100)+"%"),css}color=parseColor(element.attr("md-ink-ripple"))||parseColor($window.getComputedStyle(options.colorElement[0]).color||"rgb(0, 0, 0)");var container=getRippleContainer(),size=getRippleSize(left,top),css=getRippleCss(size,left,top),elem=getRippleElement(css),index=ripples.indexOf(elem),state=states[index]||{};return rippleSize=size,state.animating=!0,$timeout(function(){options.dimBackground&&container.css({backgroundColor:color}),elem.addClass("md-ripple-placed md-ripple-scaled"),options.outline?elem.css({borderWidth:.5*size+"px",marginLeft:size*-.5+"px",marginTop:size*-.5+"px"}):elem.css({left:"50%",top:"50%"}),updateElement(elem),$timeout(function(){state.animating=!1,updateElement(elem)},options.outline?450:225,!1)},0,!1),elem}function onPressDown(ev){isRippleAllowed()&&(createRipple(ev.pointer.x,ev.pointer.y),isHeld=!0)}function onPressUp(){isHeld=!1;var ripple=ripples[ripples.length-1];$timeout(function(){updateElement(ripple)},0,!1)}function isRippleAllowed(){function isDisabled(elem){return elem&&elem.hasAttribute&&elem.hasAttribute("disabled")}var parent=node.parentNode,grandparent=parent&&parent.parentNode,ancestor=grandparent&&grandparent.parentNode;return!(isDisabled(node)||isDisabled(parent)||isDisabled(grandparent)||isDisabled(ancestor))}if(element.controller("mdNoInk"))return angular.noop;options=angular.extend({colorElement:element,mousedown:!0,hover:!0,focus:!0,center:!1,mousedownPauseTime:150,dimBackground:!1,outline:!1,fullRipple:!0,isMenuItem:!1,fitRipple:!1},options);var rippleSize,controller=element.controller("mdInkRipple")||{},counter=0,ripples=[],states=[],isActiveExpr=element.attr("md-highlight"),isActive=!1,isHeld=!1,node=element[0],rippleSizeSetting=element.attr("md-ripple-size"),color=parseColor(element.attr("md-ink-ripple"))||parseColor(options.colorElement.length&&$window.getComputedStyle(options.colorElement[0]).color||"rgb(0, 0, 0)");switch(rippleSizeSetting){case"full":options.fullRipple=!0;break;case"partial":options.fullRipple=!1}return options.mousedown&&element.on("$md.pressdown",onPressDown).on("$md.pressup",onPressUp),controller.createRipple=createRipple,isActiveExpr&&scope.$watch(isActiveExpr,function(newValue){isActive=newValue,isActive&&!ripples.length&&$timeout(function(){createRipple(0,0)},0,!1),angular.forEach(ripples,updateElement)}),function(){element.off("$md.pressdown",onPressDown).off("$md.pressup",onPressUp),getRippleContainer().remove()}}return{attach:attach}}function attrNoDirective(){return function(){return{controller:angular.noop}}}angular.module("material.core").factory("$mdInkRipple",InkRippleService).directive("mdInkRipple",InkRippleDirective).directive("mdNoInk",attrNoDirective()).directive("mdNoBar",attrNoDirective()).directive("mdNoStretch",attrNoDirective()),InkRippleDirective.$inject=["$mdButtonInkRipple","$mdCheckboxInkRipple"],InkRippleService.$inject=["$window","$timeout"]}(),function(){!function(){function MdTabInkRipple($mdInkRipple){function attach(scope,element,options){return $mdInkRipple.attach(scope,element,angular.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},options))}return{attach:attach}}angular.module("material.core").factory("$mdTabInkRipple",MdTabInkRipple),MdTabInkRipple.$inject=["$mdInkRipple"]}()}(),function(){angular.module("material.core.theming.palette",[]).constant("$mdColorPalette",{red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 A200 A400 A700"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400 A700"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff",contrastDefaultColor:"light",contrastDarkColors:"100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900 A700",contrastStrongLightColors:"500 600 700 800 A700"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700 800"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00",contrastDefaultColor:"dark",contrastLightColors:"900",contrastStrongLightColors:"900"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600",contrastDefaultColor:"dark"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00",contrastDefaultColor:"dark"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100 A200",contrastStrongLightColors:"500 600 700 800 900 A400 A700"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037",contrastDefaultColor:"light",contrastDarkColors:"50 100 200",contrastStrongLightColors:"300 400"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",1000:"#000000",A100:"#ffffff",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300",contrastStrongLightColors:"400 500"}})}(),function(){function ThemingProvider($mdColorPalette){function definePalette(name,map){return map=map||{},PALETTES[name]=checkPaletteValid(name,map),themingProvider}function extendPalette(name,map){return checkPaletteValid(name,angular.extend({},PALETTES[name]||{},map))}function checkPaletteValid(name,map){var missingColors=VALID_HUE_VALUES.filter(function(field){return!map[field]});if(missingColors.length)throw new Error("Missing colors %1 in palette %2!".replace("%1",missingColors.join(", ")).replace("%2",name));return map}function registerTheme(name,inheritFrom){if(THEMES[name])return THEMES[name];inheritFrom=inheritFrom||"default";var parentTheme="string"==typeof inheritFrom?THEMES[inheritFrom]:inheritFrom,theme=new Theme(name);return parentTheme&&angular.forEach(parentTheme.colors,function(color,colorType){theme.colors[colorType]={name:color.name,hues:angular.extend({},color.hues)}}),THEMES[name]=theme,theme}function Theme(name){function setDark(isDark){if(isDark=0===arguments.length?!0:!!isDark,isDark!==self.isDark){self.isDark=isDark,self.foregroundPalette=self.isDark?LIGHT_FOREGROUND:DARK_FOREGROUND,self.foregroundShadow=self.isDark?DARK_SHADOW:LIGHT_SHADOW;var newDefaultHues=self.isDark?DARK_DEFAULT_HUES:LIGHT_DEFAULT_HUES,oldDefaultHues=self.isDark?LIGHT_DEFAULT_HUES:DARK_DEFAULT_HUES;return angular.forEach(newDefaultHues,function(newDefaults,colorType){var color=self.colors[colorType],oldDefaults=oldDefaultHues[colorType];if(color)for(var hueName in color.hues)color.hues[hueName]===oldDefaults[hueName]&&(color.hues[hueName]=newDefaults[hueName])}),self}}var self=this;self.name=name,self.colors={},self.dark=setDark,setDark(!1),THEME_COLOR_TYPES.forEach(function(colorType){var defaultHues=(self.isDark?DARK_DEFAULT_HUES:LIGHT_DEFAULT_HUES)[colorType];self[colorType+"Palette"]=function(paletteName,hues){var color=self.colors[colorType]={name:paletteName,hues:angular.extend({},defaultHues,hues)};return Object.keys(color.hues).forEach(function(name){if(!defaultHues[name])throw new Error("Invalid hue name '%1' in theme %2's %3 color %4. Available hue names: %4".replace("%1",name).replace("%2",self.name).replace("%3",paletteName).replace("%4",Object.keys(defaultHues).join(", ")))}),Object.keys(color.hues).map(function(key){return color.hues[key]}).forEach(function(hueValue){if(-1==VALID_HUE_VALUES.indexOf(hueValue))throw new Error("Invalid hue value '%1' in theme %2's %3 color %4. Available hue values: %5".replace("%1",hueValue).replace("%2",self.name).replace("%3",colorType).replace("%4",paletteName).replace("%5",VALID_HUE_VALUES.join(", ")))}),self},self[colorType+"Color"]=function(){var args=Array.prototype.slice.call(arguments);return console.warn("$mdThemingProviderTheme."+colorType+"Color() has been deprecated. Use $mdThemingProviderTheme."+colorType+"Palette() instead."),self[colorType+"Palette"].apply(self,args)}})}function ThemingService($rootScope,$log){function registered(themeName){return themeName===undefined||""===themeName?!0:applyTheme.THEMES[themeName]!==undefined}function applyTheme(scope,el){el===undefined&&(el=scope,scope=undefined),scope===undefined&&(scope=$rootScope),applyTheme.inherit(el,el)}return applyTheme.inherit=function(el,parent){function changeTheme(theme){registered(theme)||$log.warn("Attempted to use unregistered theme '"+theme+"'. Register it with $mdThemingProvider.theme().");var oldTheme=el.data("$mdThemeName");oldTheme&&el.removeClass("md-"+oldTheme+"-theme"),el.addClass("md-"+theme+"-theme"),el.data("$mdThemeName",theme)}var ctrl=parent.controller("mdTheme"),attrThemeValue=el.attr("md-theme-watch");if((alwaysWatchTheme||angular.isDefined(attrThemeValue))&&"false"!=attrThemeValue){var deregisterWatch=$rootScope.$watch(function(){return ctrl&&ctrl.$mdTheme||defaultTheme},changeTheme);el.on("$destroy",deregisterWatch)}else{var theme=ctrl&&ctrl.$mdTheme||defaultTheme;changeTheme(theme)}},applyTheme.THEMES=angular.extend({},THEMES),applyTheme.defaultTheme=function(){return defaultTheme},applyTheme.registered=registered,applyTheme}PALETTES={},THEMES={};var themingProvider,defaultTheme="default",alwaysWatchTheme=!1;return angular.extend(PALETTES,$mdColorPalette),ThemingService.$inject=["$rootScope","$log"],themingProvider={definePalette:definePalette,extendPalette:extendPalette,theme:registerTheme,setDefaultTheme:function(theme){defaultTheme=theme},alwaysWatchTheme:function(alwaysWatch){alwaysWatchTheme=alwaysWatch},$get:ThemingService,_LIGHT_DEFAULT_HUES:LIGHT_DEFAULT_HUES,_DARK_DEFAULT_HUES:DARK_DEFAULT_HUES,_PALETTES:PALETTES,_THEMES:THEMES,_parseRules:parseRules,_rgba:rgba}}function ThemingDirective($mdTheming,$interpolate,$log){return{priority:100,link:{pre:function(scope,el,attrs){var ctrl={$setTheme:function(theme){$mdTheming.registered(theme)||$log.warn("attempted to use unregistered theme '"+theme+"'"),ctrl.$mdTheme=theme}};el.data("$mdThemeController",ctrl),ctrl.$setTheme($interpolate(attrs.mdTheme)(scope)),attrs.$observe("mdTheme",ctrl.$setTheme)}}}}function ThemableDirective($mdTheming){return $mdTheming}function parseRules(theme,colorType,rules){checkValidPalette(theme,colorType),rules=rules.replace(/THEME_NAME/g,theme.name);var generatedRules=[],color=theme.colors[colorType],themeNameRegex=new RegExp(".md-"+theme.name+"-theme","g"),hueRegex=new RegExp("('|\")?{{\\s*("+colorType+")-(color|contrast)-?(\\d\\.?\\d*)?\\s*}}(\"|')?","g"),simpleVariableRegex=/'?"?\{\{\s*([a-zA-Z]+)-(A?\d+|hue\-[0-3]|shadow)-?(\d\.?\d*)?\s*\}\}'?"?/g,palette=PALETTES[color.name];return rules=rules.replace(simpleVariableRegex,function(match,colorType,hue,opacity){return"foreground"===colorType?"shadow"==hue?theme.foregroundShadow:theme.foregroundPalette[hue]||theme.foregroundPalette[1]:(0===hue.indexOf("hue")&&(hue=theme.colors[colorType].hues[hue]),rgba((PALETTES[theme.colors[colorType].name][hue]||"").value,opacity))}),angular.forEach(color.hues,function(hueValue,hueName){var newRule=rules.replace(hueRegex,function(match,_,colorType,hueType,opacity){return rgba(palette[hueValue]["color"===hueType?"value":"contrast"],opacity)});"default"!==hueName&&(newRule=newRule.replace(themeNameRegex,".md-"+theme.name+"-theme.md-"+hueName)),"default"==theme.name&&(newRule=newRule.replace(/\.md-default-theme/g,"")),generatedRules.push(newRule)}),generatedRules}function generateThemes($injector){function sanitizePalette(palette){var defaultContrast=palette.contrastDefaultColor,lightColors=palette.contrastLightColors||[],strongLightColors=palette.contrastStrongLightColors||[],darkColors=palette.contrastDarkColors||[];"string"==typeof lightColors&&(lightColors=lightColors.split(" ")),"string"==typeof strongLightColors&&(strongLightColors=strongLightColors.split(" ")),"string"==typeof darkColors&&(darkColors=darkColors.split(" ")),delete palette.contrastDefaultColor,delete palette.contrastLightColors,delete palette.contrastStrongLightColors,delete palette.contrastDarkColors,angular.forEach(palette,function(hueValue,hueName){function getContrastColor(){return"light"===defaultContrast?darkColors.indexOf(hueName)>-1?DARK_CONTRAST_COLOR:strongLightColors.indexOf(hueName)>-1?STRONG_LIGHT_CONTRAST_COLOR:LIGHT_CONTRAST_COLOR:lightColors.indexOf(hueName)>-1?strongLightColors.indexOf(hueName)>-1?STRONG_LIGHT_CONTRAST_COLOR:LIGHT_CONTRAST_COLOR:DARK_CONTRAST_COLOR}if(!angular.isObject(hueValue)){var rgbValue=colorToRgbaArray(hueValue);if(!rgbValue)throw new Error("Color %1, in palette %2's hue %3, is invalid. Hex or rgb(a) color expected.".replace("%1",hueValue).replace("%2",palette.name).replace("%3",hueName));palette[hueName]={value:rgbValue,contrast:getContrastColor()}}})}var head=document.getElementsByTagName("head")[0],firstChild=head?head.firstElementChild:null,themeCss=$injector.has("$MD_THEME_CSS")?$injector.get("$MD_THEME_CSS"):"";if(firstChild&&0!==themeCss.length){angular.forEach(PALETTES,sanitizePalette);var rulesByType={},rules=themeCss.split(/\}(?!(\}|'|"|;))/).filter(function(rule){return rule&&rule.length}).map(function(rule){return rule.trim()+"}"}),ruleMatchRegex=new RegExp("md-("+THEME_COLOR_TYPES.join("|")+")","g");THEME_COLOR_TYPES.forEach(function(type){rulesByType[type]=""}),rules.forEach(function(rule){for(var type,i=(rule.match(ruleMatchRegex),0);type=THEME_COLOR_TYPES[i];i++)if(rule.indexOf(".md-"+type)>-1)return rulesByType[type]+=rule;for(i=0;type=THEME_COLOR_TYPES[i];i++)if(rule.indexOf(type)>-1)return rulesByType[type]+=rule;return rulesByType[DEFAULT_COLOR_TYPE]+=rule}),angular.forEach(THEMES,function(theme){GENERATED[theme.name]||(THEME_COLOR_TYPES.forEach(function(colorType){for(var styleStrings=parseRules(theme,colorType,rulesByType[colorType]);styleStrings.length;){var style=document.createElement("style");style.setAttribute("type","text/css"),style.appendChild(document.createTextNode(styleStrings.shift())),head.insertBefore(style,firstChild)}}),theme.colors.primary.name==theme.colors.accent.name&&console.warn("$mdThemingProvider: Using the same palette for primary and accent. This violates the material design spec."),GENERATED[theme.name]=!0)})}}function checkValidPalette(theme,colorType){if(!PALETTES[(theme.colors[colorType]||{}).name])throw new Error("You supplied an invalid color palette for theme %1's %2 palette. Available palettes: %3".replace("%1",theme.name).replace("%2",colorType).replace("%3",Object.keys(PALETTES).join(", ")))}function colorToRgbaArray(clr){if(angular.isArray(clr)&&3==clr.length)return clr;if(/^rgb/.test(clr))return clr.replace(/(^\s*rgba?\(|\)\s*$)/g,"").split(",").map(function(value,i){return 3==i?parseFloat(value,10):parseInt(value,10)});if("#"==clr.charAt(0)&&(clr=clr.substring(1)),/^([a-fA-F0-9]{3}){1,2}$/g.test(clr)){var dig=clr.length/3,red=clr.substr(0,dig),grn=clr.substr(dig,dig),blu=clr.substr(2*dig);return 1===dig&&(red+=red,grn+=grn,blu+=blu),[parseInt(red,16),parseInt(grn,16),parseInt(blu,16)]}}function rgba(rgbArray,opacity){return rgbArray?(4==rgbArray.length&&(rgbArray=angular.copy(rgbArray),opacity?rgbArray.pop():opacity=rgbArray.pop()),opacity&&("number"==typeof opacity||"string"==typeof opacity&&opacity.length)?"rgba("+rgbArray.join(",")+","+opacity+")":"rgb("+rgbArray.join(",")+")"):"rgb('0,0,0')"}angular.module("material.core.theming",["material.core.theming.palette"]).directive("mdTheme",ThemingDirective).directive("mdThemable",ThemableDirective).provider("$mdTheming",ThemingProvider).run(generateThemes);var PALETTES,THEMES,GENERATED={},DARK_FOREGROUND={name:"dark",1:"rgba(0,0,0,0.87)",2:"rgba(0,0,0,0.54)",3:"rgba(0,0,0,0.26)",4:"rgba(0,0,0,0.12)"},LIGHT_FOREGROUND={name:"light",1:"rgba(255,255,255,1.0)",2:"rgba(255,255,255,0.7)",3:"rgba(255,255,255,0.3)",4:"rgba(255,255,255,0.12)"},DARK_SHADOW="1px 1px 0px rgba(0,0,0,0.4), -1px -1px 0px rgba(0,0,0,0.4)",LIGHT_SHADOW="",DARK_CONTRAST_COLOR=colorToRgbaArray("rgba(0,0,0,0.87)"),LIGHT_CONTRAST_COLOR=colorToRgbaArray("rgba(255,255,255,0.87"),STRONG_LIGHT_CONTRAST_COLOR=colorToRgbaArray("rgb(255,255,255)"),THEME_COLOR_TYPES=["primary","accent","warn","background"],DEFAULT_COLOR_TYPE="primary",LIGHT_DEFAULT_HUES={accent:{"default":"A200","hue-1":"A100","hue-2":"A400","hue-3":"A700"},background:{"default":"A100","hue-1":"300","hue-2":"800","hue-3":"900"}},DARK_DEFAULT_HUES={background:{"default":"800","hue-1":"300","hue-2":"600","hue-3":"900"}};THEME_COLOR_TYPES.forEach(function(colorType){var defaultDefaultHues={"default":"500","hue-1":"300","hue-2":"800","hue-3":"A100"};LIGHT_DEFAULT_HUES[colorType]||(LIGHT_DEFAULT_HUES[colorType]=defaultDefaultHues),DARK_DEFAULT_HUES[colorType]||(DARK_DEFAULT_HUES[colorType]=defaultDefaultHues)});var VALID_HUE_VALUES=["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"];ThemingProvider.$inject=["$mdColorPalette"],ThemingDirective.$inject=["$mdTheming","$interpolate","$log"],ThemableDirective.$inject=["$mdTheming"],generateThemes.$inject=["$injector"]}(),function(){angular.module("material.components.autocomplete",["material.core","material.components.icon"])}(),function(){function BackdropDirective($mdTheming){return $mdTheming}angular.module("material.components.backdrop",["material.core"]).directive("mdBackdrop",BackdropDirective),BackdropDirective.$inject=["$mdTheming"]}(),function(){function MdBottomSheetDirective(){return{restrict:"E"}}function MdBottomSheetProvider($$interimElementProvider){function bottomSheetDefaults($animate,$mdConstant,$mdUtil,$timeout,$compile,$mdTheming,$mdBottomSheet,$rootElement,$mdGesture){function onShow(scope,element,options){element=$mdUtil.extractElementByName(element,"md-bottom-sheet"),backdrop=$compile('<md-backdrop class="md-opaque md-bottom-sheet-backdrop">')(scope),backdrop.on("click",function(){$timeout($mdBottomSheet.cancel)}),$mdTheming.inherit(backdrop,options.parent),$animate.enter(backdrop,options.parent,null);var bottomSheet=new BottomSheet(element,options.parent);return options.bottomSheet=bottomSheet,options.targetEvent&&angular.element(options.targetEvent.target).blur(),$mdTheming.inherit(bottomSheet.element,options.parent),options.disableParentScroll&&(options.lastOverflow=options.parent.css("overflow"),options.parent.css("overflow","hidden")),$animate.enter(bottomSheet.element,options.parent).then(function(){var focusable=angular.element(element[0].querySelector("button")||element[0].querySelector("a")||element[0].querySelector("[ng-click]"));focusable.focus(),options.escapeToClose&&(options.rootElementKeyupCallback=function(e){e.keyCode===$mdConstant.KEY_CODE.ESCAPE&&$timeout($mdBottomSheet.cancel)},$rootElement.on("keyup",options.rootElementKeyupCallback))})}function onRemove(scope,element,options){var bottomSheet=options.bottomSheet;return $animate.leave(backdrop),$animate.leave(bottomSheet.element).then(function(){options.disableParentScroll&&(options.parent.css("overflow",options.lastOverflow),delete options.lastOverflow),bottomSheet.cleanup(),options.targetEvent&&angular.element(options.targetEvent.target).focus()})}function BottomSheet(element,parent){function onDragStart(ev){element.css($mdConstant.CSS.TRANSITION_DURATION,"0ms")}function onDrag(ev){var transform=ev.pointer.distanceY;5>transform&&(transform=Math.max(-PADDING,transform/2)),element.css($mdConstant.CSS.TRANSFORM,"translate3d(0,"+(PADDING+transform)+"px,0)")}function onDragEnd(ev){if(ev.pointer.distanceY>0&&(ev.pointer.distanceY>20||Math.abs(ev.pointer.velocityY)>CLOSING_VELOCITY)){var distanceRemaining=element.prop("offsetHeight")-ev.pointer.distanceY,transitionDuration=Math.min(distanceRemaining/ev.pointer.velocityY*.75,500);element.css($mdConstant.CSS.TRANSITION_DURATION,transitionDuration+"ms"),$timeout($mdBottomSheet.cancel)}else element.css($mdConstant.CSS.TRANSITION_DURATION,""),element.css($mdConstant.CSS.TRANSFORM,"")}var deregister=$mdGesture.register(parent,"drag",{horizontal:!1});return parent.on("$md.dragstart",onDragStart).on("$md.drag",onDrag).on("$md.dragend",onDragEnd),{element:element,cleanup:function(){deregister(),parent.off("$md.dragstart",onDragStart).off("$md.drag",onDrag).off("$md.dragend",onDragEnd)}}}var backdrop;return{themable:!0,targetEvent:null,onShow:onShow,onRemove:onRemove,escapeToClose:!0,disableParentScroll:!0}}var CLOSING_VELOCITY=.5,PADDING=80;return bottomSheetDefaults.$inject=["$animate","$mdConstant","$mdUtil","$timeout","$compile","$mdTheming","$mdBottomSheet","$rootElement","$mdGesture"],$$interimElementProvider("$mdBottomSheet").setDefaults({methods:["disableParentScroll","escapeToClose","targetEvent"],options:bottomSheetDefaults})}angular.module("material.components.bottomSheet",["material.core","material.components.backdrop"]).directive("mdBottomSheet",MdBottomSheetDirective).provider("$mdBottomSheet",MdBottomSheetProvider),MdBottomSheetProvider.$inject=["$$interimElementProvider"]}(),function(){function MdButtonDirective($mdButtonInkRipple,$mdTheming,$mdAria,$timeout){function isAnchor(attr){return angular.isDefined(attr.href)||angular.isDefined(attr.ngHref)||angular.isDefined(attr.ngLink)||angular.isDefined(attr.uiSref)}function getTemplate(element,attr){return isAnchor(attr)?'<a class="md-button" ng-transclude></a>':'<button class="md-button" ng-transclude></button>'}function postLink(scope,element,attr){var node=element[0];$mdTheming(element),$mdButtonInkRipple.attach(scope,element);var elementHasText=node.textContent.trim();elementHasText||$mdAria.expect(element,"aria-label"),isAnchor(attr)&&angular.isDefined(attr.ngDisabled)&&scope.$watch(attr.ngDisabled,function(isDisabled){element.attr("tabindex",isDisabled?-1:0)}),element.on("click",function(e){attr.disabled===!0&&(e.preventDefault(),e.stopImmediatePropagation())}),scope.mouseActive=!1,element.on("mousedown",function(){scope.mouseActive=!0,$timeout(function(){scope.mouseActive=!1},100)}).on("focus",function(){scope.mouseActive===!1&&element.addClass("md-focused")}).on("blur",function(){element.removeClass("md-focused")})}return{restrict:"EA",replace:!0,transclude:!0,template:getTemplate,link:postLink}}angular.module("material.components.button",["material.core"]).directive("mdButton",MdButtonDirective),
MdButtonDirective.$inject=["$mdButtonInkRipple","$mdTheming","$mdAria","$timeout"]}(),function(){function mdCardDirective($mdTheming){return{restrict:"E",link:function($scope,$element,$attr){$mdTheming($element)}}}angular.module("material.components.card",["material.core"]).directive("mdCard",mdCardDirective),mdCardDirective.$inject=["$mdTheming"]}(),function(){function MdCheckboxDirective(inputDirective,$mdInkRipple,$mdAria,$mdConstant,$mdTheming,$mdUtil,$timeout){function compile(tElement,tAttrs){return tAttrs.type="checkbox",tAttrs.tabindex=tAttrs.tabindex||"0",tElement.attr("role",tAttrs.type),function(scope,element,attr,ngModelCtrl){function $$watchExpr(expr,htmlAttr,valueOpts){attr[expr]&&scope.$watch(attr[expr],function(val){valueOpts[val]&&element.attr(htmlAttr,valueOpts[val])})}function keypressHandler(ev){var keyCode=ev.which||ev.keyCode;(keyCode===$mdConstant.KEY_CODE.SPACE||keyCode===$mdConstant.KEY_CODE.ENTER)&&(ev.preventDefault(),element.hasClass("md-focused")||element.addClass("md-focused"),listener(ev))}function listener(ev){element[0].hasAttribute("disabled")||scope.$apply(function(){var viewValue=attr.ngChecked?attr.checked:!ngModelCtrl.$viewValue;ngModelCtrl.$setViewValue(viewValue,ev&&ev.type),ngModelCtrl.$render()})}function render(){ngModelCtrl.$viewValue?element.addClass(CHECKED_CSS):element.removeClass(CHECKED_CSS)}ngModelCtrl=ngModelCtrl||$mdUtil.fakeNgModel(),$mdTheming(element),attr.ngChecked&&scope.$watch(scope.$eval.bind(scope,attr.ngChecked),ngModelCtrl.$setViewValue.bind(ngModelCtrl)),$$watchExpr("ngDisabled","tabindex",{"true":"-1","false":attr.tabindex}),$mdAria.expectWithText(element,"aria-label"),inputDirective.link.pre(scope,{on:angular.noop,0:{}},attr,[ngModelCtrl]),scope.mouseActive=!1,element.on("click",listener).on("keypress",keypressHandler).on("mousedown",function(){scope.mouseActive=!0,$timeout(function(){scope.mouseActive=!1},100)}).on("focus",function(){scope.mouseActive===!1&&element.addClass("md-focused")}).on("blur",function(){element.removeClass("md-focused")}),ngModelCtrl.$render=render}}inputDirective=inputDirective[0];var CHECKED_CSS="md-checked";return{restrict:"E",transclude:!0,require:"?ngModel",priority:210,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox><div class="md-icon"></div></div><div ng-transclude class="md-label"></div>',compile:compile}}angular.module("material.components.checkbox",["material.core"]).directive("mdCheckbox",MdCheckboxDirective),MdCheckboxDirective.$inject=["inputDirective","$mdInkRipple","$mdAria","$mdConstant","$mdTheming","$mdUtil","$timeout"]}(),function(){angular.module("material.components.chips",["material.core","material.components.autocomplete"])}(),function(){function mdContentDirective($mdTheming){function ContentController($scope,$element){this.$scope=$scope,this.$element=$element}return{restrict:"E",controller:["$scope","$element",ContentController],link:function(scope,element,attr){element[0];$mdTheming(element),scope.$broadcast("$mdContentLoaded",element),iosScrollFix(element[0])}}}function iosScrollFix(node){angular.element(node).on("$md.pressdown",function(ev){"t"===ev.pointer.type&&(ev.$materialScrollFixed||(ev.$materialScrollFixed=!0,0===node.scrollTop?node.scrollTop=1:node.scrollHeight===node.scrollTop+node.offsetHeight&&(node.scrollTop-=1)))})}angular.module("material.components.content",["material.core"]).directive("mdContent",mdContentDirective),mdContentDirective.$inject=["$mdTheming"]}(),function(){function MdDialogDirective($$rAF,$mdTheming){return{restrict:"E",link:function(scope,element,attr){$mdTheming(element),$$rAF(function(){var content=element[0].querySelector("md-dialog-content");content&&content.scrollHeight>content.clientHeight&&element.addClass("md-content-overflow")})}}}function MdDialogProvider($$interimElementProvider){function advancedDialogOptions($mdDialog,$mdTheming){return{template:['<md-dialog md-theme="{{ dialog.theme }}" aria-label="{{ dialog.ariaLabel }}">','<md-dialog-content role="document" tabIndex="-1">','<h2 class="md-title">{{ dialog.title }}</h2>',"<p>{{ dialog.content }}</p>","</md-dialog-content>",'<div class="md-actions">','<md-button ng-if="dialog.$type == \'confirm\'" ng-click="dialog.abort()" class="md-primary">',"{{ dialog.cancel }}","</md-button>",'<md-button ng-click="dialog.hide()" class="md-primary">',"{{ dialog.ok }}","</md-button>","</div>","</md-dialog>"].join(""),controller:function(){this.hide=function(){$mdDialog.hide(!0)},this.abort=function(){$mdDialog.cancel()}},controllerAs:"dialog",bindToController:!0,theme:$mdTheming.defaultTheme()}}function dialogDefaultOptions($mdAria,$document,$mdUtil,$mdConstant,$mdTheming,$mdDialog,$timeout,$rootElement,$animate,$$rAF,$q){function trapFocus(ev){var dialog=document.querySelector("md-dialog");dialog&&!dialog.contains(ev.target)&&(ev.stopImmediatePropagation(),dialog.focus())}function onShow(scope,element,options){function findCloseButton(){var closeButton=element[0].querySelector(".dialog-close");if(!closeButton){var actionButtons=element[0].querySelectorAll(".md-actions button");closeButton=actionButtons[actionButtons.length-1]}return angular.element(closeButton)}angular.element($document[0].body).addClass("md-dialog-is-showing"),element=$mdUtil.extractElementByName(element,"md-dialog"),options.parent=angular.element(options.parent),options.popInTarget=angular.element((options.targetEvent||{}).target);var closeButton=findCloseButton();if(options.hasBackdrop){var computeFrom=options.parent[0]==$document[0].body&&$document[0].documentElement&&$document[0].documentElement.scrollTop?angular.element($document[0].documentElement):options.parent,parentOffset=computeFrom.prop("scrollTop");options.backdrop=angular.element('<md-backdrop class="md-dialog-backdrop md-opaque">'),options.backdrop.css("top",parentOffset+"px"),$mdTheming.inherit(options.backdrop,options.parent),$animate.enter(options.backdrop,options.parent),element.css("top",parentOffset+"px")}var role="dialog",elementToFocus=closeButton;return"alert"===options.$type&&(role="alertdialog",elementToFocus=element.find("md-dialog-content")),configureAria(element.find("md-dialog"),role,options),document.addEventListener("focus",trapFocus,!0),options.disableParentScroll&&(options.lastOverflow=options.parent.css("overflow"),options.parent.css("overflow","hidden")),dialogPopIn(element,options.parent,options.popInTarget&&options.popInTarget.length&&options.popInTarget).then(function(){applyAriaToSiblings(element,!0),options.escapeToClose&&(options.rootElementKeyupCallback=function(e){e.keyCode===$mdConstant.KEY_CODE.ESCAPE&&$timeout($mdDialog.cancel)},$rootElement.on("keyup",options.rootElementKeyupCallback)),options.clickOutsideToClose&&(options.dialogClickOutsideCallback=function(ev){ev.target===element[0]&&$timeout($mdDialog.cancel)},element.on("click",options.dialogClickOutsideCallback)),options.focusOnOpen&&elementToFocus.focus()})}function onRemove(scope,element,options){return angular.element($document[0].body).removeClass("md-dialog-is-showing"),options.backdrop&&$animate.leave(options.backdrop),options.disableParentScroll&&(options.parent.css("overflow",options.lastOverflow),delete options.lastOverflow),options.escapeToClose&&$rootElement.off("keyup",options.rootElementKeyupCallback),options.clickOutsideToClose&&element.off("click",options.dialogClickOutsideCallback),applyAriaToSiblings(element,!1),document.removeEventListener("focus",trapFocus,!0),dialogPopOut(element,options.parent,options.popInTarget&&options.popInTarget.length&&options.popInTarget).then(function(){element.remove(),options.popInTarget&&options.popInTarget.focus()})}function configureAria(element,role,options){element.attr({role:role,tabIndex:"-1"});var dialogContent=element.find("md-dialog-content");0===dialogContent.length&&(dialogContent=element);var dialogId=element.attr("id")||"dialog_"+$mdUtil.nextUid();dialogContent.attr("id",dialogId),element.attr("aria-describedby",dialogId),options.ariaLabel?$mdAria.expect(element,"aria-label",options.ariaLabel):$mdAria.expectAsync(element,"aria-label",function(){var words=dialogContent.text().split(/\s+/);return words.length>3&&(words=words.slice(0,3).concat("...")),words.join(" ")})}function isNodeOneOf(elem,nodeTypeArray){return-1!==nodeTypeArray.indexOf(elem.nodeName)?!0:void 0}function applyAriaToSiblings(element,value){function walkDOM(element){for(;element.parentNode;){if(element===document.body)return;for(var children=element.parentNode.children,i=0;i<children.length;i++)element===children[i]||isNodeOneOf(children[i],["SCRIPT","STYLE"])||children[i].setAttribute(attribute,value);walkDOM(element=element.parentNode)}}var attribute="aria-hidden";element=element[0],walkDOM(element)}function dialogPopIn(container,parentElement,clickElement){var dialogEl=container.find("md-dialog");return parentElement.append(container),transformToClickElement(dialogEl,clickElement),$$rAF(function(){dialogEl.addClass("transition-in").css($mdConstant.CSS.TRANSFORM,"")}),$mdUtil.transitionEndPromise(dialogEl)}function dialogPopOut(container,parentElement,clickElement){var dialogEl=container.find("md-dialog");return dialogEl.addClass("transition-out").removeClass("transition-in"),transformToClickElement(dialogEl,clickElement),$mdUtil.transitionEndPromise(dialogEl)}function transformToClickElement(dialogEl,clickElement){if(clickElement){var clickRect=clickElement[0].getBoundingClientRect(),dialogRect=dialogEl[0].getBoundingClientRect(),scaleX=Math.min(.5,clickRect.width/dialogRect.width),scaleY=Math.min(.5,clickRect.height/dialogRect.height);dialogEl.css($mdConstant.CSS.TRANSFORM,"translate3d("+(-dialogRect.left+clickRect.left+clickRect.width/2-dialogRect.width/2)+"px,"+(-dialogRect.top+clickRect.top+clickRect.height/2-dialogRect.height/2)+"px,0) scale("+scaleX+","+scaleY+")")}}return{hasBackdrop:!0,isolateScope:!0,onShow:onShow,onRemove:onRemove,clickOutsideToClose:!1,escapeToClose:!0,targetEvent:null,focusOnOpen:!0,disableParentScroll:!0,transformTemplate:function(template){return'<div class="md-dialog-container">'+template+"</div>"}}}return advancedDialogOptions.$inject=["$mdDialog","$mdTheming"],dialogDefaultOptions.$inject=["$mdAria","$document","$mdUtil","$mdConstant","$mdTheming","$mdDialog","$timeout","$rootElement","$animate","$$rAF","$q"],$$interimElementProvider("$mdDialog").setDefaults({methods:["disableParentScroll","hasBackdrop","clickOutsideToClose","escapeToClose","targetEvent","parent"],options:dialogDefaultOptions}).addPreset("alert",{methods:["title","content","ariaLabel","ok","theme"],options:advancedDialogOptions}).addPreset("confirm",{methods:["title","content","ariaLabel","ok","cancel","theme"],options:advancedDialogOptions})}angular.module("material.components.dialog",["material.core","material.components.backdrop"]).directive("mdDialog",MdDialogDirective).provider("$mdDialog",MdDialogProvider),MdDialogDirective.$inject=["$$rAF","$mdTheming"],MdDialogProvider.$inject=["$$interimElementProvider"]}(),function(){function MdDividerDirective($mdTheming){return{restrict:"E",link:$mdTheming}}angular.module("material.components.divider",["material.core"]).directive("mdDivider",MdDividerDirective),MdDividerDirective.$inject=["$mdTheming"]}(),function(){function GridListDirective($interpolate,$mdConstant,$mdGridLayout,$mdMedia){function postLink(scope,element,attrs,ctrl){function watchMedia(){for(var mediaName in $mdConstant.MEDIA)$mdMedia(mediaName),$mdMedia.getQuery($mdConstant.MEDIA[mediaName]).addListener(invalidateLayout);return $mdMedia.watchResponsiveAttributes(["md-cols","md-row-height"],attrs,layoutIfMediaMatch)}function unwatchMedia(){ctrl.layoutDelegate=angular.noop,unwatchAttrs();for(var mediaName in $mdConstant.MEDIA)$mdMedia.getQuery($mdConstant.MEDIA[mediaName]).removeListener(invalidateLayout)}function layoutIfMediaMatch(mediaName){null==mediaName?ctrl.invalidateLayout():$mdMedia(mediaName)&&ctrl.invalidateLayout()}function layoutDelegate(tilesInvalidated){var tiles=getTileElements(),props={tileSpans:getTileSpans(tiles),colCount:getColumnCount(),rowMode:getRowMode(),rowHeight:getRowHeight(),gutter:getGutter()};if(tilesInvalidated||!angular.equals(props,lastLayoutProps)){var performance=$mdGridLayout(props.colCount,props.tileSpans,tiles).map(function(tilePositions,rowCount){return{grid:{element:element,style:getGridStyle(props.colCount,rowCount,props.gutter,props.rowMode,props.rowHeight)},tiles:tilePositions.map(function(ps,i){return{element:angular.element(tiles[i]),style:getTileStyle(ps.position,ps.spans,props.colCount,props.rowCount,props.gutter,props.rowMode,props.rowHeight)}})}}).reflow().performance();scope.mdOnLayout({$event:{performance:performance}}),lastLayoutProps=props}}function expr(exprStr){return startSymbol+exprStr+endSymbol}function getTileStyle(position,spans,colCount,rowCount,gutter,rowMode,rowHeight){var hShare=1/colCount*100,hGutterShare=(colCount-1)/colCount,hUnit=UNIT({share:hShare,gutterShare:hGutterShare,gutter:gutter}),style={left:POSITION({unit:hUnit,offset:position.col,gutter:gutter}),width:DIMENSION({unit:hUnit,span:spans.col,gutter:gutter}),paddingTop:"",marginTop:"",top:"",height:""};switch(rowMode){case"fixed":style.top=POSITION({unit:rowHeight,offset:position.row,gutter:gutter}),style.height=DIMENSION({unit:rowHeight,span:spans.row,gutter:gutter});break;case"ratio":var vShare=hShare/rowHeight,vUnit=UNIT({share:vShare,gutterShare:hGutterShare,gutter:gutter});style.paddingTop=DIMENSION({unit:vUnit,span:spans.row,gutter:gutter}),style.marginTop=POSITION({unit:vUnit,offset:position.row,gutter:gutter});break;case"fit":var vGutterShare=(rowCount-1)/rowCount,vShare=1/rowCount*100,vUnit=UNIT({share:vShare,gutterShare:vGutterShare,gutter:gutter});style.top=POSITION({unit:vUnit,offset:position.row,gutter:gutter}),style.height=DIMENSION({unit:vUnit,span:spans.row,gutter:gutter})}return style}function getGridStyle(colCount,rowCount,gutter,rowMode,rowHeight){var style={height:"",paddingBottom:""};switch(rowMode){case"fixed":style.height=DIMENSION({unit:rowHeight,span:rowCount,gutter:gutter});break;case"ratio":var hGutterShare=1===colCount?0:(colCount-1)/colCount,hShare=1/colCount*100,vShare=hShare*(1/rowHeight),vUnit=UNIT({share:vShare,gutterShare:hGutterShare,gutter:gutter});style.paddingBottom=DIMENSION({unit:vUnit,span:rowCount,gutter:gutter});break;case"fit":}return style}function getTileElements(){return[].filter.call(element.children(),function(ele){return"MD-GRID-TILE"==ele.tagName})}function getTileSpans(tileElements){return[].map.call(tileElements,function(ele){var ctrl=angular.element(ele).controller("mdGridTile");return{row:parseInt($mdMedia.getResponsiveAttribute(ctrl.$attrs,"md-rowspan"),10)||1,col:parseInt($mdMedia.getResponsiveAttribute(ctrl.$attrs,"md-colspan"),10)||1}})}function getColumnCount(){var colCount=parseInt($mdMedia.getResponsiveAttribute(attrs,"md-cols"),10);if(isNaN(colCount))throw"md-grid-list: md-cols attribute was not found, or contained a non-numeric value";return colCount}function getGutter(){return applyDefaultUnit($mdMedia.getResponsiveAttribute(attrs,"md-gutter")||1)}function getRowHeight(){var rowHeight=$mdMedia.getResponsiveAttribute(attrs,"md-row-height");switch(getRowMode()){case"fixed":return applyDefaultUnit(rowHeight);case"ratio":var whRatio=rowHeight.split(":");return parseFloat(whRatio[0])/parseFloat(whRatio[1]);case"fit":return 0}}function getRowMode(){var rowHeight=$mdMedia.getResponsiveAttribute(attrs,"md-row-height");return"fit"==rowHeight?"fit":-1!==rowHeight.indexOf(":")?"ratio":"fixed"}function applyDefaultUnit(val){return/\D$/.test(val)?val:val+"px"}element.attr("role","list"),ctrl.layoutDelegate=layoutDelegate;var invalidateLayout=angular.bind(ctrl,ctrl.invalidateLayout),unwatchAttrs=watchMedia();scope.$on("$destroy",unwatchMedia);var lastLayoutProps,startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),UNIT=$interpolate(expr("share")+"% - ("+expr("gutter")+" * "+expr("gutterShare")+")"),POSITION=$interpolate("calc(("+expr("unit")+" + "+expr("gutter")+") * "+expr("offset")+")"),DIMENSION=$interpolate("calc(("+expr("unit")+") * "+expr("span")+" + ("+expr("span")+" - 1) * "+expr("gutter")+")")}return{restrict:"E",controller:GridListController,scope:{mdOnLayout:"&"},link:postLink}}function GridListController($timeout){this.layoutInvalidated=!1,this.tilesInvalidated=!1,this.$timeout_=$timeout,this.layoutDelegate=angular.noop}function GridLayoutFactory($mdUtil){function GridLayout(colCount,tileSpans){var self,layoutInfo,gridStyles,layoutTime,mapTime,reflowTime;return layoutTime=$mdUtil.time(function(){layoutInfo=calculateGridFor(colCount,tileSpans)}),self={layoutInfo:function(){return layoutInfo},map:function(updateFn){return mapTime=$mdUtil.time(function(){var info=self.layoutInfo();gridStyles=updateFn(info.positioning,info.rowCount)}),self},reflow:function(animatorFn){return reflowTime=$mdUtil.time(function(){var animator=animatorFn||defaultAnimator;animator(gridStyles.grid,gridStyles.tiles)}),self},performance:function(){return{tileCount:tileSpans.length,layoutTime:layoutTime,mapTime:mapTime,reflowTime:reflowTime,totalTime:layoutTime+mapTime+reflowTime}}}}function GridTileAnimator(grid,tiles){grid.element.css(grid.style),tiles.forEach(function(t){t.element.css(t.style)})}function calculateGridFor(colCount,tileSpans){function reserveSpace(spans,i){if(spans.col>colCount)throw"md-grid-list: Tile at position "+i+" has a colspan ("+spans.col+") that exceeds the column count ("+colCount+")";for(var start=0,end=0;end-start<spans.col;)curCol>=colCount?nextRow():(start=spaceTracker.indexOf(0,curCol),-1!==start&&-1!==(end=findEnd(start+1))?curCol=end+1:(start=end=0,nextRow()));return adjustRow(start,spans.col,spans.row),curCol=start+spans.col,{col:start,row:curRow}}function nextRow(){curCol=0,curRow++,adjustRow(0,colCount,-1)}function adjustRow(from,cols,by){for(var i=from;from+cols>i;i++)spaceTracker[i]=Math.max(spaceTracker[i]+by,0)}function findEnd(start){var i;for(i=start;i<spaceTracker.length;i++)if(0!==spaceTracker[i])return i;return i===spaceTracker.length?i:void 0}function newSpaceTracker(){for(var tracker=[],i=0;colCount>i;i++)tracker.push(0);return tracker}var curCol=0,curRow=0,spaceTracker=newSpaceTracker();return{positioning:tileSpans.map(function(spans,i){return{spans:spans,position:reserveSpace(spans,i)}}),rowCount:curRow+Math.max.apply(Math,spaceTracker)}}var defaultAnimator=GridTileAnimator;return GridLayout.animateWith=function(customAnimator){defaultAnimator=angular.isFunction(customAnimator)?customAnimator:GridTileAnimator},GridLayout}function GridTileDirective($mdMedia){function postLink(scope,element,attrs,gridCtrl){element.attr("role","listitem");var unwatchAttrs=$mdMedia.watchResponsiveAttributes(["md-colspan","md-rowspan"],attrs,angular.bind(gridCtrl,gridCtrl.invalidateLayout));gridCtrl.invalidateTiles(),scope.$on("$destroy",function(){unwatchAttrs(),gridCtrl.invalidateLayout()}),angular.isDefined(scope.$parent.$index)&&scope.$watch(function(){return scope.$parent.$index},function(newIdx,oldIdx){newIdx!==oldIdx&&gridCtrl.invalidateTiles()})}return{restrict:"E",require:"^mdGridList",template:"<figure ng-transclude></figure>",transclude:!0,scope:{},controller:["$attrs",function($attrs){this.$attrs=$attrs}],link:postLink}}function GridTileCaptionDirective(){return{template:"<figcaption ng-transclude></figcaption>",transclude:!0}}angular.module("material.components.gridList",["material.core"]).directive("mdGridList",GridListDirective).directive("mdGridTile",GridTileDirective).directive("mdGridTileFooter",GridTileCaptionDirective).directive("mdGridTileHeader",GridTileCaptionDirective).factory("$mdGridLayout",GridLayoutFactory),GridListDirective.$inject=["$interpolate","$mdConstant","$mdGridLayout","$mdMedia"],GridListController.$inject=["$timeout"],GridListController.prototype={invalidateTiles:function(){this.tilesInvalidated=!0,this.invalidateLayout()},invalidateLayout:function(){this.layoutInvalidated||(this.layoutInvalidated=!0,this.$timeout_(angular.bind(this,this.layout)))},layout:function(){try{this.layoutDelegate(this.tilesInvalidated)}finally{this.layoutInvalidated=!1,this.tilesInvalidated=!1}}},GridLayoutFactory.$inject=["$mdUtil"],GridTileDirective.$inject=["$mdMedia"]}(),function(){function mdIconDirective($mdIcon,$mdTheming,$mdAria,$interpolate){function getTemplate(element,attr){var isEmptyAttr=function(key){return angular.isDefined(attr[key])?0==attr[key].length:!1},hasAttrValue=function(key){return attr[key]&&attr[key].length>0},attrValue=function(key){return hasAttrValue(key)?attr[key]:""},tmplFontIcon='<span class="md-font {{classNames}}" ng-class="fontIcon"></span>',tmplFontSet='<span class="{{classNames}}" ng-transclude></span>',tmpl=hasAttrValue("mdSvgIcon")?"":hasAttrValue("mdSvgSrc")?"":isEmptyAttr("mdFontIcon")?"":hasAttrValue("mdFontIcon")?tmplFontIcon:tmplFontSet,names=tmpl==tmplFontSet?$mdIcon.fontSet(attrValue("mdFontSet"))+" ":"";return names=(names+attrValue("class")).trim(),$interpolate(tmpl)({classNames:names})}function postLink(scope,element,attr){function parentsHaveText(){var parent=element.parent();return parent.attr("aria-label")||parent.text()?!0:parent.parent().attr("aria-label")||parent.parent().text()?!0:!1}$mdTheming(element);var label=attr.alt||scope.fontIcon||scope.svgIcon||element.text(),attrName=attr.$normalize(attr.$attr.mdSvgIcon||attr.$attr.mdSvgSrc||"");attr["aria-label"]||(""==label||parentsHaveText()?element.text()||$mdAria.expect(element,"aria-hidden","true"):($mdAria.expect(element,"aria-label",label),$mdAria.expect(element,"role","img"))),attrName&&attr.$observe(attrName,function(attrVal){element.empty(),attrVal&&$mdIcon(attrVal).then(function(svg){element.append(svg)})})}return{scope:{fontSet:"@mdFontSet",fontIcon:"@mdFontIcon",svgIcon:"@mdSvgIcon",svgSrc:"@mdSvgSrc"},restrict:"E",transclude:!0,template:getTemplate,link:postLink}}angular.module("material.components.icon",["material.core"]).directive("mdIcon",mdIconDirective),mdIconDirective.$inject=["$mdIcon","$mdTheming","$mdAria","$interpolate"]}(),function(){function MdIconProvider(){}function ConfigurationItem(url,iconSize){this.url=url,this.iconSize=iconSize||config.defaultIconSize}function MdIconService(config,$http,$q,$log,$templateCache){function getIcon(id){return id=id||"",iconCache[id]?$q.when(iconCache[id].clone()):urlRegex.test(id)?loadByURL(id).then(cacheIcon(id)):(-1==id.indexOf(":")&&(id="$default:"+id),loadByID(id)["catch"](loadFromIconSet)["catch"](announceIdNotFound)["catch"](announceNotFound).then(cacheIcon(id)))}function findRegisteredFontSet(alias){var useDefault=angular.isUndefined(alias)||!(alias&&alias.length);if(useDefault)return config.defaultFontSet;var result=alias;return angular.forEach(config.fontSets,function(it){it.alias==alias&&(result=it.fontSet||result)}),result}function cacheIcon(id){return function(icon){return iconCache[id]=isIcon(icon)?icon:new Icon(icon,config[id]),iconCache[id].clone()}}function loadByID(id){var iconConfig=config[id];return iconConfig?loadByURL(iconConfig.url).then(function(icon){return new Icon(icon,iconConfig)}):$q.reject(id)}function loadFromIconSet(id){function extractFromSet(set){var iconName=id.slice(id.lastIndexOf(":")+1),icon=set.querySelector("#"+iconName);return icon?new Icon(icon,iconSetConfig):$q.reject(id)}var setName=id.substring(0,id.lastIndexOf(":"))||"$default",iconSetConfig=config[setName];return iconSetConfig?loadByURL(iconSetConfig.url).then(extractFromSet):$q.reject(id)}function loadByURL(url){return $http.get(url,{cache:$templateCache}).then(function(response){return angular.element("<div>").append(response.data).find("svg")[0]})}function announceIdNotFound(id){var msg;return angular.isString(id)&&(msg="icon "+id+" not found",$log.warn(msg)),$q.reject(msg||id)}function announceNotFound(err){var msg=angular.isString(err)?err:err.message||err.data||err.statusText;return $log.warn(msg),$q.reject(msg)}function isIcon(target){return angular.isDefined(target.element)&&angular.isDefined(target.config)}function Icon(el,config){"svg"!=el.tagName&&(el=angular.element('<svg xmlns="http://www.w3.org/2000/svg">').append(el)[0]),el.getAttribute("xmlns")||el.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.element=el,this.config=config,this.prepare()}function prepareAndStyle(){var iconSize=this.config?this.config.iconSize:config.defaultIconSize;angular.forEach({fit:"",height:"100%",width:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:this.element.getAttribute("viewBox")||"0 0 "+iconSize+" "+iconSize},function(val,attr){this.element.setAttribute(attr,val)},this),angular.forEach({"pointer-events":"none",display:"block"},function(val,style){this.element.style[style]=val},this)}function cloneSVG(){return this.element.cloneNode(!0)}var iconCache={},urlRegex=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/i;return Icon.prototype={clone:cloneSVG,prepare:prepareAndStyle},getIcon.fontSet=findRegisteredFontSet,getIcon}angular.module("material.components.icon").provider("$mdIcon",MdIconProvider);var config={defaultIconSize:24,defaultFontSet:"material-icons",fontSets:[]};MdIconProvider.prototype={icon:function(id,url,iconSize){return-1==id.indexOf(":")&&(id="$default:"+id),config[id]=new ConfigurationItem(url,iconSize),this},iconSet:function(id,url,iconSize){return config[id]=new ConfigurationItem(url,iconSize),this},defaultIconSet:function(url,iconSize){var setName="$default";return config[setName]||(config[setName]=new ConfigurationItem(url,iconSize)),config[setName].iconSize=iconSize||config.defaultIconSize,this},fontSet:function(alias,className){config.fontSets.push({alias:alias,fontSet:className||alias})},defaultFontSet:function(className){return config.defaultFontSet=className?className:"",this},defaultIconSize:function(iconSize){return config.defaultIconSize=iconSize,this},preloadIcons:function($templateCache){var iconProvider=this,svgRegistry=[{id:"md-tabs-arrow",url:"md-tabs-arrow.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><polygon points="15.4,7.4 14,6 8,12 14,18 15.4,16.6 10.8,12 "/></g></svg>'},{id:"md-close",url:"md-close.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><path d="M19 6.41l-1.41-1.41-5.59 5.59-5.59-5.59-1.41 1.41 5.59 5.59-5.59 5.59 1.41 1.41 5.59-5.59 5.59 5.59 1.41-1.41-5.59-5.59z"/></g></svg>'},{id:"md-cancel",url:"md-cancel.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><path d="M12 2c-5.53 0-10 4.47-10 10s4.47 10 10 10 10-4.47 10-10-4.47-10-10-10zm5 13.59l-1.41 1.41-3.59-3.59-3.59 3.59-1.41-1.41 3.59-3.59-3.59-3.59 1.41-1.41 3.59 3.59 3.59-3.59 1.41 1.41-3.59 3.59 3.59 3.59z"/></g></svg>'},{id:"md-menu",url:"md-menu.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 100 100"><path d="M 50 0 L 100 14 L 92 80 L 50 100 L 8 80 L 0 14 Z" fill="#b2b2b2"></path><path d="M 50 5 L 6 18 L 13.5 77 L 50 94 Z" fill="#E42939"></path><path d="M 50 5 L 94 18 L 86.5 77 L 50 94 Z" fill="#B72833"></path><path d="M 50 7 L 83 75 L 72 75 L 65 59 L 50 59 L 50 50 L 61 50 L 50 26 Z" fill="#b2b2b2"></path><path d="M 50 7 L 17 75 L 28 75 L 35 59 L 50 59 L 50 50 L 39 50 L 50 26 Z" fill="#fff"></path></svg>'},{id:"md-toggle-arrow",url:"md-toggle-arrow-svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 48 48"><path d="M24 16l-12 12 2.83 2.83 9.17-9.17 9.17 9.17 2.83-2.83z"/><path d="M0 0h48v48h-48z" fill="none"/></svg>'}];svgRegistry.forEach(function(asset){iconProvider.icon(asset.id,asset.url),$templateCache.put(asset.url,asset.svg)})},$get:["$http","$q","$log","$templateCache",function($http,$q,$log,$templateCache){return this.preloadIcons($templateCache),MdIconService(config,$http,$q,$log,$templateCache)}]}}(),function(){function mdInputContainerDirective($mdTheming,$parse){function postLink(scope,element,attr){$mdTheming(element)}function ContainerCtrl($scope,$element,$attrs){var self=this;self.isErrorGetter=$attrs.mdIsError&&$parse($attrs.mdIsError),self.delegateClick=function(){self.input.focus()},self.element=$element,self.setFocused=function(isFocused){$element.toggleClass("md-input-focused",!!isFocused)},self.setHasValue=function(hasValue){$element.toggleClass("md-input-has-value",!!hasValue)},self.setInvalid=function(isInvalid){$element.toggleClass("md-input-invalid",!!isInvalid)},$scope.$watch(function(){return self.label&&self.input},function(hasLabelAndInput){hasLabelAndInput&&!self.label.attr("for")&&self.label.attr("for",self.input.attr("id"))})}return ContainerCtrl.$inject=["$scope","$element","$attrs"],{restrict:"E",link:postLink,controller:ContainerCtrl}}function labelDirective(){return{restrict:"E",require:"^?mdInputContainer",link:function(scope,element,attr,containerCtrl){containerCtrl&&!attr.mdNoFloat&&(containerCtrl.label=element,scope.$on("$destroy",function(){containerCtrl.label=null}))}}}function inputTextareaDirective($mdUtil,$window,$mdAria){function postLink(scope,element,attr,ctrls){function ngModelPipelineCheckValue(arg){return containerCtrl.setHasValue(!ngModelCtrl.$isEmpty(arg)),arg}function inputCheckValue(){containerCtrl.setHasValue(element.val().length>0||(element[0].validity||{}).badInput)}function setupTextarea(){function pipelineListener(value){return onChangeTextarea(),value}function growTextarea(){node.style.height="auto",node.scrollTop=0;var height=getHeight();height&&(node.style.height=height+"px")}function getHeight(){var line=node.scrollHeight-node.offsetHeight;return node.offsetHeight+(line>0?line:0)}function onScroll(e){node.scrollTop=0;var line=node.scrollHeight-node.offsetHeight,height=node.offsetHeight+line;node.style.height=height+"px"}var node=element[0],onChangeTextarea=$mdUtil.debounce(growTextarea,1);ngModelCtrl?(ngModelCtrl.$formatters.push(pipelineListener),ngModelCtrl.$viewChangeListeners.push(pipelineListener)):onChangeTextarea(),element.on("keydown input",onChangeTextarea),element.on("scroll",onScroll),angular.element($window).on("resize",onChangeTextarea),scope.$on("$destroy",function(){angular.element($window).off("resize",onChangeTextarea)})}var containerCtrl=ctrls[0],ngModelCtrl=ctrls[1]||$mdUtil.fakeNgModel(),isReadonly=angular.isDefined(attr.readonly);if(containerCtrl){if(containerCtrl.input)throw new Error("<md-input-container> can only have *one* <input> or <textarea> child element!");containerCtrl.input=element,containerCtrl.label||$mdAria.expect(element,"aria-label",element.attr("placeholder")),element.addClass("md-input"),element.attr("id")||element.attr("id","input_"+$mdUtil.nextUid()),"textarea"===element[0].tagName.toLowerCase()&&setupTextarea();var isErrorGetter=containerCtrl.isErrorGetter||function(){return ngModelCtrl.$invalid&&ngModelCtrl.$touched};scope.$watch(isErrorGetter,containerCtrl.setInvalid),ngModelCtrl.$parsers.push(ngModelPipelineCheckValue),ngModelCtrl.$formatters.push(ngModelPipelineCheckValue),element.on("input",inputCheckValue),isReadonly||element.on("focus",function(ev){containerCtrl.setFocused(!0)}).on("blur",function(ev){containerCtrl.setFocused(!1),inputCheckValue()}),scope.$on("$destroy",function(){containerCtrl.setFocused(!1),containerCtrl.setHasValue(!1),containerCtrl.input=null})}}return{restrict:"E",require:["^?mdInputContainer","?ngModel"],link:postLink}}function mdMaxlengthDirective($animate){function postLink(scope,element,attr,ctrls){function renderCharCount(value){return charCountEl.text((element.val()||value||"").length+"/"+maxlength),value}var maxlength,ngModelCtrl=ctrls[0],containerCtrl=ctrls[1],charCountEl=angular.element('<div class="md-char-counter">');attr.$set("ngTrim","false"),containerCtrl.element.append(charCountEl),ngModelCtrl.$formatters.push(renderCharCount),ngModelCtrl.$viewChangeListeners.push(renderCharCount),element.on("input keydown",function(){renderCharCount()}),scope.$watch(attr.mdMaxlength,function(value){maxlength=value,angular.isNumber(value)&&value>0?(charCountEl.parent().length||$animate.enter(charCountEl,containerCtrl.element,angular.element(containerCtrl.element[0].lastElementChild)),
renderCharCount()):$animate.leave(charCountEl)}),ngModelCtrl.$validators["md-maxlength"]=function(modelValue,viewValue){return!angular.isNumber(maxlength)||0>maxlength?!0:(modelValue||element.val()||viewValue||"").length<=maxlength}}return{restrict:"A",require:["ngModel","^mdInputContainer"],link:postLink}}function placeholderDirective($log){function postLink(scope,element,attr,inputContainer){if(inputContainer&&-1==blackListElements.indexOf(element[0].nodeName)&&!angular.isDefined(inputContainer.element.attr("md-no-float"))){var placeholderText=attr.placeholder;if(element.removeAttr("placeholder"),0==inputContainer.element.find("label").length){var placeholder='<label ng-click="delegateClick()">'+placeholderText+"</label>";inputContainer.element.addClass("md-icon-float"),inputContainer.element.prepend(placeholder)}else $log.warn("The placeholder='"+placeholderText+"' will be ignored since this md-input-container has a child label element.")}}var blackListElements=["MD-SELECT"];return{restrict:"A",require:"^^?mdInputContainer",priority:200,link:postLink}}angular.module("material.components.input",["material.core"]).directive("mdInputContainer",mdInputContainerDirective).directive("label",labelDirective).directive("input",inputTextareaDirective).directive("textarea",inputTextareaDirective).directive("mdMaxlength",mdMaxlengthDirective).directive("placeholder",placeholderDirective),mdInputContainerDirective.$inject=["$mdTheming","$parse"],inputTextareaDirective.$inject=["$mdUtil","$window","$mdAria"],mdMaxlengthDirective.$inject=["$animate"],placeholderDirective.$inject=["$log"]}(),function(){function mdListDirective($mdTheming){return{restrict:"E",compile:function(tEl){return tEl[0].setAttribute("role","list"),$mdTheming}}}function mdListItemDirective($mdAria,$mdConstant,$timeout){var proxiedTypes=["md-checkbox","md-switch"];return{restrict:"E",controller:"MdListController",compile:function(tEl,tAttrs){function setupToggleAria(){for(var toggle,toggleType,toggleTypes=["md-switch","md-checkbox"],i=0;toggleType=toggleTypes[i];++i)if((toggle=tEl.find(toggleType)[0])&&!toggle.hasAttribute("aria-label")){var p=tEl.find("p")[0];if(!p)return;toggle.setAttribute("aria-label","Toggle "+p.textContent)}}function wrapIn(type){var container;if("div"==type)container=angular.element('<div class="md-no-style md-list-item-inner">'),container.append(tEl.contents()),tEl.addClass("md-proxy-focus");else{container=angular.element('<md-button class="md-no-style"><div class="md-list-item-inner"></div></md-button>');var copiedAttrs=["ng-click","aria-label","ng-disabled"];angular.forEach(copiedAttrs,function(attr){tEl[0].hasAttribute(attr)&&(container[0].setAttribute(attr,tEl[0].getAttribute(attr)),tEl[0].removeAttribute(attr))}),container.children().eq(0).append(tEl.contents())}if(tEl[0].setAttribute("tabindex","-1"),tEl.append(container),secondaryItem&&secondaryItem.hasAttribute("ng-click")){$mdAria.expect(secondaryItem,"aria-label");var buttonWrapper=angular.element('<md-button class="md-secondary-container md-icon-button">');buttonWrapper.attr("ng-click",secondaryItem.getAttribute("ng-click")),secondaryItem.removeAttribute("ng-click"),secondaryItem.setAttribute("tabindex","-1"),secondaryItem.classList.remove("md-secondary"),buttonWrapper.append(secondaryItem),secondaryItem=buttonWrapper[0]}secondaryItem&&(secondaryItem.hasAttribute("ng-click")||tAttrs.ngClick&&isProxiedElement(secondaryItem))&&(tEl.addClass("md-with-secondary"),tEl.append(secondaryItem))}function isProxiedElement(el){return-1!=proxiedTypes.indexOf(el.nodeName.toLowerCase())}function postLink($scope,$element,$attr,ctrl){function computeProxies(){var children=$element.children();children.length&&!children[0].hasAttribute("ng-click")&&angular.forEach(proxiedTypes,function(type){angular.forEach(firstChild.querySelectorAll(type),function(child){proxies.push(child)})})}function computeClickable(){(proxies.length||hasClick)&&($element.addClass("md-clickable"),ctrl.attachRipple($scope,angular.element($element[0].querySelector(".md-no-style"))))}var proxies=[],firstChild=$element[0].firstElementChild,hasClick=firstChild&&firstChild.hasAttribute("ng-click");computeProxies(),computeClickable(),$element.hasClass("md-proxy-focus")&&proxies.length&&angular.forEach(proxies,function(proxy){proxy=angular.element(proxy),$scope.mouseActive=!1,proxy.on("mousedown",function(){$scope.mouseActive=!0,$timeout(function(){$scope.mouseActive=!1},100)}).on("focus",function(){$scope.mouseActive===!1&&$element.addClass("md-focused"),proxy.on("blur",function proxyOnBlur(){$element.removeClass("md-focused"),proxy.off("blur",proxyOnBlur)})})}),hasClick||proxies.length||firstChild&&firstChild.addEventListener("keypress",function(e){if("INPUT"!=e.target.nodeName&&"TEXTAREA"!=e.target.nodeName){var keyCode=e.which||e.keyCode;keyCode==$mdConstant.KEY_CODE.SPACE&&firstChild&&(firstChild.click(),e.preventDefault(),e.stopPropagation())}}),$element.off("click"),$element.off("keypress"),proxies.length&&firstChild&&$element.children().eq(0).on("click",function(e){firstChild.contains(e.target)&&angular.forEach(proxies,function(proxy){e.target===proxy||proxy.contains(e.target)||angular.element(proxy).triggerHandler("click")})})}var hasProxiedElement,proxyElement,secondaryItem=tEl[0].querySelector(".md-secondary");if(tEl[0].setAttribute("role","listitem"),tAttrs.ngClick)wrapIn("button");else{for(var type,i=0;type=proxiedTypes[i];++i)if(proxyElement=tEl[0].querySelector(type)){hasProxiedElement=!0;break}hasProxiedElement?wrapIn("div"):tEl[0].querySelector("md-button")||tEl.addClass("md-no-proxy")}return setupToggleAria(),postLink}}}function MdListController($scope,$element,$mdListInkRipple){function attachRipple(scope,element){var options={};$mdListInkRipple.attach(scope,element,options)}var ctrl=this;ctrl.attachRipple=attachRipple}angular.module("material.components.list",["material.core"]).controller("MdListController",MdListController).directive("mdList",mdListDirective).directive("mdListItem",mdListItemDirective),mdListDirective.$inject=["$mdTheming"],mdListItemDirective.$inject=["$mdAria","$mdConstant","$timeout"],MdListController.$inject=["$scope","$element","$mdListInkRipple"]}(),function(){function MdProgressCircularDirective($mdConstant,$mdTheming){function compile(tElement){return tElement.attr("aria-valuemin",0),tElement.attr("aria-valuemax",100),tElement.attr("role","progressbar"),postLink}function postLink(scope,element,attr){$mdTheming(element);var circle=element[0],diameter=attr.mdDiameter||48,scale=diameter/48;circle.style[$mdConstant.CSS.TRANSFORM]="scale("+scale+")",attr.$observe("value",function(value){var percentValue=clamp(value);element.attr("aria-valuenow",percentValue)})}function clamp(value){return Math.max(0,Math.min(value||0,100))}return{restrict:"E",template:'<div class="md-spinner-wrapper"><div class="md-inner"><div class="md-gap"></div><div class="md-left"><div class="md-half-circle"></div></div><div class="md-right"><div class="md-half-circle"></div></div></div></div>',compile:compile}}angular.module("material.components.progressCircular",["material.core"]).directive("mdProgressCircular",MdProgressCircularDirective),MdProgressCircularDirective.$inject=["$mdConstant","$mdTheming"]}(),function(){function MdProgressLinearDirective($$rAF,$mdConstant,$mdTheming){function compile(tElement,tAttrs,transclude){return tElement.attr("aria-valuemin",0),tElement.attr("aria-valuemax",100),tElement.attr("role","progressbar"),postLink}function postLink(scope,element,attr){$mdTheming(element);var bar1Style=element[0].querySelector(".md-bar1").style,bar2Style=element[0].querySelector(".md-bar2").style,container=angular.element(element[0].querySelector(".md-container"));attr.$observe("value",function(value){if("query"!=attr.mdMode){var clamped=clamp(value);element.attr("aria-valuenow",clamped),bar2Style[$mdConstant.CSS.TRANSFORM]=transforms[clamped]}}),attr.$observe("mdBufferValue",function(value){bar1Style[$mdConstant.CSS.TRANSFORM]=transforms[clamp(value)]}),$$rAF(function(){container.addClass("md-ready")})}function clamp(value){return value>100?100:0>value?0:Math.ceil(value||0)}return{restrict:"E",template:'<div class="md-container"><div class="md-dashed"></div><div class="md-bar md-bar1"></div><div class="md-bar md-bar2"></div></div>',compile:compile}}angular.module("material.components.progressLinear",["material.core"]).directive("mdProgressLinear",MdProgressLinearDirective),MdProgressLinearDirective.$inject=["$$rAF","$mdConstant","$mdTheming"];var transforms=function(){function makeTransform(value){var scale=value/100,translateX=(value-100)/2;return"translateX("+translateX.toString()+"%) scale("+scale.toString()+", 1)"}for(var values=new Array(101),i=0;101>i;i++)values[i]=makeTransform(i);return values}()}(),function(){function mdRadioGroupDirective($mdUtil,$mdConstant,$mdTheming,$timeout){function linkRadioGroup(scope,element,attr,ctrls){function setFocus(){element.hasClass("md-focused")||element.addClass("md-focused")}function keydownListener(ev){var keyCode=ev.which||ev.keyCode;switch(keyCode){case $mdConstant.KEY_CODE.LEFT_ARROW:case $mdConstant.KEY_CODE.UP_ARROW:ev.preventDefault(),rgCtrl.selectPrevious(),setFocus();break;case $mdConstant.KEY_CODE.RIGHT_ARROW:case $mdConstant.KEY_CODE.DOWN_ARROW:ev.preventDefault(),rgCtrl.selectNext(),setFocus();break;case $mdConstant.KEY_CODE.ENTER:var form=angular.element($mdUtil.getClosest(element[0],"form"));form.length>0&&form.triggerHandler("submit")}}$mdTheming(element);var rgCtrl=ctrls[0],ngModelCtrl=ctrls[1]||$mdUtil.fakeNgModel();rgCtrl.init(ngModelCtrl),scope.mouseActive=!1,element.attr({role:"radiogroup",tabIndex:element.attr("tabindex")||"0"}).on("keydown",keydownListener).on("mousedown",function(event){scope.mouseActive=!0,$timeout(function(){scope.mouseActive=!1},100)}).on("focus",function(){scope.mouseActive===!1&&rgCtrl.$element.addClass("md-focused")}).on("blur",function(){rgCtrl.$element.removeClass("md-focused")})}function RadioGroupController($element){this._radioButtonRenderFns=[],this.$element=$element}function createRadioGroupControllerProto(){return{init:function(ngModelCtrl){this._ngModelCtrl=ngModelCtrl,this._ngModelCtrl.$render=angular.bind(this,this.render)},add:function(rbRender){this._radioButtonRenderFns.push(rbRender)},remove:function(rbRender){var index=this._radioButtonRenderFns.indexOf(rbRender);-1!==index&&this._radioButtonRenderFns.splice(index,1)},render:function(){this._radioButtonRenderFns.forEach(function(rbRender){rbRender()})},setViewValue:function(value,eventType){this._ngModelCtrl.$setViewValue(value,eventType),this.render()},getViewValue:function(){return this._ngModelCtrl.$viewValue},selectNext:function(){return changeSelectedButton(this.$element,1)},selectPrevious:function(){return changeSelectedButton(this.$element,-1)},setActiveDescendant:function(radioId){this.$element.attr("aria-activedescendant",radioId)}}}function changeSelectedButton(parent,increment){var buttons=$mdUtil.iterator(parent[0].querySelectorAll("md-radio-button"),!0);if(buttons.count()){var validate=function(button){return!angular.element(button).attr("disabled")},selected=parent[0].querySelector("md-radio-button.md-checked"),target=buttons[0>increment?"previous":"next"](selected,validate)||buttons.first();angular.element(target).triggerHandler("click")}}return RadioGroupController.prototype=createRadioGroupControllerProto(),{restrict:"E",controller:["$element",RadioGroupController],require:["mdRadioGroup","?ngModel"],link:{pre:linkRadioGroup}}}function mdRadioButtonDirective($mdAria,$mdUtil,$mdTheming){function link(scope,element,attr,rgCtrl){function listener(ev){element[0].hasAttribute("disabled")||scope.$apply(function(){rgCtrl.setViewValue(attr.value,ev&&ev.type)})}function render(){var checked=rgCtrl.getViewValue()==attr.value;checked!==lastChecked&&(lastChecked=checked,element.attr("aria-checked",checked),checked?(element.addClass(CHECKED_CSS),rgCtrl.setActiveDescendant(element.attr("id"))):element.removeClass(CHECKED_CSS))}function configureAria(element,scope){function buildAriaID(){return attr.id||"radio_"+$mdUtil.nextUid()}scope.ariaId=buildAriaID(),element.attr({id:scope.ariaId,role:"radio","aria-checked":"false"}),$mdAria.expectWithText(element,"aria-label")}var lastChecked;$mdTheming(element),configureAria(element,scope),rgCtrl.add(render),attr.$observe("value",render),element.on("click",listener).on("$destroy",function(){rgCtrl.remove(render)})}var CHECKED_CSS="md-checked";return{restrict:"E",require:"^mdRadioGroup",transclude:!0,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox><div class="md-off"></div><div class="md-on"></div></div><div ng-transclude class="md-label"></div>',link:link}}angular.module("material.components.radioButton",["material.core"]).directive("mdRadioGroup",mdRadioGroupDirective).directive("mdRadioButton",mdRadioButtonDirective),mdRadioGroupDirective.$inject=["$mdUtil","$mdConstant","$mdTheming","$timeout"],mdRadioButtonDirective.$inject=["$mdAria","$mdUtil","$mdTheming"]}(),function(){function SelectDirective($mdSelect,$mdUtil,$mdTheming,$mdAria,$interpolate,$compile,$parse){function compile(element,attr){var labelEl=element.find("md-select-label").remove();if(labelEl.length){if(!labelEl[0].firstElementChild){var spanWrapper=angular.element("<span>");spanWrapper.append(labelEl.contents()),labelEl.append(spanWrapper)}}else labelEl=angular.element("<md-select-label><span></span></md-select-label>");if(labelEl.append('<span class="md-select-icon" aria-hidden="true"></span>'),labelEl.addClass("md-select-label"),labelEl[0].hasAttribute("id")||labelEl.attr("id","select_label_"+$mdUtil.nextUid()),element.find("md-content").length||element.append(angular.element("<md-content>").append(element.contents())),attr.mdOnOpen&&element.find("md-content").prepend(angular.element("<md-progress-circular>").attr("md-mode","indeterminate").attr("ng-hide","$$loadingAsyncDone").wrap("<div>").parent()),attr.name){var autofillClone=angular.element('<select class="md-visually-hidden">');autofillClone.attr({name:"."+attr.name,"ng-model":attr.ngModel,"aria-hidden":"true",tabindex:"-1"});var opts=element.find("md-option");angular.forEach(opts,function(el){var newEl=angular.element("<option>"+el.innerHTML+"</option>");el.hasAttribute("ng-value")?newEl.attr("ng-value",el.getAttribute("ng-value")):el.hasAttribute("value")&&newEl.attr("value",el.getAttribute("value")),autofillClone.append(newEl)}),element.parent().append(autofillClone)}var selectTemplate='<div class="md-select-menu-container"><md-select-menu '+(angular.isDefined(attr.multiple)?"multiple":"")+">"+element.html()+"</md-select-menu></div>";return element.empty().append(labelEl),attr.tabindex=attr.tabindex||"0",function(scope,element,attr,ctrls){function setAriaLabel(){var labelText=element.attr("placeholder");labelText||(labelText=element.find("md-select-label").text()),$mdAria.expect(element,"aria-label",labelText)}function syncLabelText(){selectContainer&&(selectMenuCtrl=selectMenuCtrl||selectContainer.find("md-select-menu").controller("mdSelectMenu"),mdSelectCtrl.setLabelText(selectMenuCtrl.selectedLabels()))}function createSelect(){selectContainer=angular.element(selectTemplate);var selectEl=selectContainer.find("md-select-menu");selectEl.data("$ngModelController",ngModel),selectEl.data("$mdSelectController",mdSelectCtrl),selectScope=scope.$new(),selectContainer=$compile(selectContainer)(selectScope),selectMenuCtrl=selectContainer.find("md-select-menu").controller("mdSelectMenu")}function handleKeypress(e){var allowedCodes=[32,13,38,40];if(-1!=allowedCodes.indexOf(e.keyCode))e.preventDefault(),openSelect(e);else if(e.keyCode<=90&&e.keyCode>=31){e.preventDefault();var node=selectMenuCtrl.optNodeForKeyboardSearch(e);if(!node)return;var optionCtrl=angular.element(node).controller("mdOption");selectMenuCtrl.isMultiple||selectMenuCtrl.deselect(Object.keys(selectMenuCtrl.selected)[0]),selectMenuCtrl.select(optionCtrl.hashKey,optionCtrl.value),selectMenuCtrl.refreshViewValue(),ngModel.$render()}}function openSelect(){scope.$evalAsync(function(){isOpen=!0,$mdSelect.show({scope:selectScope,preserveScope:!0,skipCompile:!0,element:selectContainer,target:element[0],hasBackdrop:!0,loadingAsync:attr.mdOnOpen?scope.$eval(attr.mdOnOpen)||!0:!1}).then(function(selectedText){isOpen=!1})})}var isOpen,isDisabled,selectContainer,selectScope,selectMenuCtrl,mdSelectCtrl=ctrls[0],ngModel=ctrls[1],formCtrl=ctrls[2],labelEl=element.find("md-select-label"),customLabel=0!==labelEl.text().length;if(createSelect(),$mdTheming(element),attr.name&&formCtrl){var selectEl=element.parent()[0].querySelector('select[name=".'+attr.name+'"]');formCtrl.$removeControl(angular.element(selectEl).controller())}var originalRender=ngModel.$render;ngModel.$render=function(){originalRender(),syncLabelText()},mdSelectCtrl.setLabelText=function(text){if(!customLabel){mdSelectCtrl.setIsPlaceholder(!text),text=text||attr.placeholder||"";var target=customLabel?labelEl:labelEl.children().eq(0);target.text(text)}},mdSelectCtrl.setIsPlaceholder=function(val){val?labelEl.addClass("md-placeholder"):labelEl.removeClass("md-placeholder")},scope.$$postDigest(function(){setAriaLabel(),syncLabelText()});var deregisterWatcher;attr.$observe("ngMultiple",function(val){deregisterWatcher&&deregisterWatcher();var parser=$parse(val);deregisterWatcher=scope.$watch(function(){return parser(scope)},function(multiple,prevVal){(multiple!==undefined||prevVal!==undefined)&&(multiple?element.attr("multiple","multiple"):element.removeAttr("multiple"),selectContainer&&(selectMenuCtrl.setMultiple(multiple),originalRender=ngModel.$render,ngModel.$render=function(){originalRender(),syncLabelText()},selectMenuCtrl.refreshViewValue(),ngModel.$render()))})}),attr.$observe("disabled",function(disabled){"string"==typeof disabled&&(disabled=!0),(isDisabled===undefined||isDisabled!==disabled)&&(isDisabled=disabled,disabled?(element.attr({tabindex:-1,"aria-disabled":"true"}),element.off("click",openSelect),element.off("keydown",handleKeypress)):(element.attr({tabindex:attr.tabindex,"aria-disabled":"false"}),element.on("click",openSelect),element.on("keydown",handleKeypress)))}),attr.disabled||attr.ngDisabled||(element.attr({tabindex:attr.tabindex,"aria-disabled":"false"}),element.on("click",openSelect),element.on("keydown",handleKeypress));var ariaAttrs={role:"combobox","aria-expanded":"false"};element[0].hasAttribute("id")||(ariaAttrs.id="select_"+$mdUtil.nextUid()),element.attr(ariaAttrs),scope.$on("$destroy",function(){isOpen?$mdSelect.cancel().then(function(){selectContainer.remove()}):selectContainer.remove()})}}return{restrict:"E",require:["mdSelect","ngModel","?^form"],compile:compile,controller:function(){}}}function SelectMenuDirective($parse,$mdUtil,$mdTheming){function preLink(scope,element,attr,ctrls){function configureAria(){element.attr({id:"select_menu_"+$mdUtil.nextUid(),role:"listbox","aria-multiselectable":selectCtrl.isMultiple?"true":"false"})}function keyListener(e){(13==e.keyCode||32==e.keyCode)&&clickListener(e)}function clickListener(ev){var option=$mdUtil.getClosest(ev.target,"md-option"),optionCtrl=option&&angular.element(option).data("$mdOptionController");if(option&&optionCtrl){var optionHashKey=selectCtrl.hashGetter(optionCtrl.value),isSelected=angular.isDefined(selectCtrl.selected[optionHashKey]);scope.$apply(function(){selectCtrl.isMultiple?isSelected?selectCtrl.deselect(optionHashKey):selectCtrl.select(optionHashKey,optionCtrl.value):isSelected||(selectCtrl.deselect(Object.keys(selectCtrl.selected)[0]),selectCtrl.select(optionHashKey,optionCtrl.value)),selectCtrl.refreshViewValue()})}}var selectCtrl=ctrls[0],ngModel=ctrls[1];$mdTheming(element),element.on("click",clickListener),element.on("keypress",keyListener),ngModel&&selectCtrl.init(ngModel),configureAria()}function SelectMenuController($scope,$attrs,$element){function renderMultiple(){var newSelectedValues=self.ngModel.$modelValue||self.ngModel.$viewValue;if(angular.isArray(newSelectedValues)){var oldSelected=Object.keys(self.selected),newSelectedHashes=newSelectedValues.map(self.hashGetter),deselected=oldSelected.filter(function(hash){return-1===newSelectedHashes.indexOf(hash)});deselected.forEach(self.deselect),newSelectedHashes.forEach(function(hashKey,i){self.select(hashKey,newSelectedValues[i])})}}function renderSingular(){var value=self.ngModel.$viewValue||self.ngModel.$modelValue;Object.keys(self.selected).forEach(self.deselect),self.select(self.hashGetter(value),value)}var self=this;self.isMultiple=angular.isDefined($attrs.multiple),self.selected={},self.options={},$scope.$watch(function(){return self.options},function(){self.ngModel.$render()},!0);var deregisterCollectionWatch;self.setMultiple=function(isMultiple){function validateArray(modelValue,viewValue){return angular.isArray(modelValue||viewValue||[])}var ngModel=self.ngModel;self.isMultiple=isMultiple,deregisterCollectionWatch&&deregisterCollectionWatch(),self.isMultiple?(ngModel.$validators["md-multiple"]=validateArray,ngModel.$render=renderMultiple,$scope.$watchCollection($attrs.ngModel,function(value){validateArray(value)&&renderMultiple(value)})):(delete ngModel.$validators["md-multiple"],ngModel.$render=renderSingular)};var clearSearchTimeout,optNodes,optText,searchStr="",CLEAR_SEARCH_AFTER=300;self.optNodeForKeyboardSearch=function(e){clearSearchTimeout&&clearTimeout(clearSearchTimeout),clearSearchTimeout=setTimeout(function(){clearSearchTimeout=undefined,searchStr="",optText=undefined,optNodes=undefined},CLEAR_SEARCH_AFTER),searchStr+=String.fromCharCode(e.keyCode);var search=new RegExp("^"+searchStr,"i");optNodes||(optNodes=$element.find("md-option"),optText=new Array(optNodes.length),angular.forEach(optNodes,function(el,i){optText[i]=el.textContent.trim()}));for(var i=0;i<optText.length;++i)if(search.test(optText[i]))return optNodes[i]},self.init=function(ngModel){if(self.ngModel=ngModel,ngModel.$options&&ngModel.$options.trackBy){var trackByLocals={},trackByParsed=$parse(ngModel.$options.trackBy);self.hashGetter=function(value,valueScope){return trackByLocals.$value=value,trackByParsed(valueScope||$scope,trackByLocals)}}else self.hashGetter=function(value){return angular.isObject(value)?"object_"+(value.$$mdSelectId||(value.$$mdSelectId=++selectNextId)):value};self.setMultiple(self.isMultiple)},self.selectedLabels=function(){var selectedOptionEls=nodesToArray($element[0].querySelectorAll("md-option[selected]"));return selectedOptionEls.length?selectedOptionEls.map(function(el){return el.textContent}).join(", "):""},self.select=function(hashKey,hashedValue){var option=self.options[hashKey];option&&option.setSelected(!0),self.selected[hashKey]=hashedValue},self.deselect=function(hashKey){var option=self.options[hashKey];option&&option.setSelected(!1),delete self.selected[hashKey]},self.addOption=function(hashKey,optionCtrl){if(angular.isDefined(self.options[hashKey]))throw new Error('Duplicate md-option values are not allowed in a select. Duplicate value "'+optionCtrl.value+'" found.');self.options[hashKey]=optionCtrl,angular.isDefined(self.selected[hashKey])&&(self.select(hashKey,optionCtrl.value),self.refreshViewValue())},self.removeOption=function(hashKey){delete self.options[hashKey]},self.refreshViewValue=function(){var option,values=[];for(var hashKey in self.selected)(option=self.options[hashKey])?values.push(option.value):values.push(self.selected[hashKey]);self.ngModel.$setViewValue(self.isMultiple?values:values[0])}}return SelectMenuController.$inject=["$scope","$attrs","$element"],{restrict:"E",require:["mdSelectMenu","?ngModel"],controller:SelectMenuController,link:{pre:preLink}}}function OptionDirective($mdButtonInkRipple,$mdUtil){function compile(element,attr){return element.append(angular.element('<div class="md-text">').append(element.contents())),element.attr("tabindex",attr.tabindex||"0"),postLink}function postLink(scope,element,attr,ctrls){function setOptionValue(newValue,oldValue){var oldHashKey=selectCtrl.hashGetter(oldValue,scope),newHashKey=selectCtrl.hashGetter(newValue,scope);optionCtrl.hashKey=newHashKey,optionCtrl.value=newValue,selectCtrl.removeOption(oldHashKey,optionCtrl),selectCtrl.addOption(newHashKey,optionCtrl)}function configureAria(){var ariaAttrs={role:"option","aria-selected":"false"};element[0].hasAttribute("id")||(ariaAttrs.id="select_option_"+$mdUtil.nextUid()),element.attr(ariaAttrs)}var optionCtrl=ctrls[0],selectCtrl=ctrls[1];angular.isDefined(attr.ngValue)?scope.$watch(attr.ngValue,setOptionValue):angular.isDefined(attr.value)?setOptionValue(attr.value):scope.$watch(function(){return element.text()},setOptionValue),scope.$$postDigest(function(){attr.$observe("selected",function(selected){angular.isDefined(selected)&&(selected?(selectCtrl.isMultiple||selectCtrl.deselect(Object.keys(selectCtrl.selected)[0]),selectCtrl.select(optionCtrl.hashKey,optionCtrl.value)):selectCtrl.deselect(optionCtrl.hashKey),selectCtrl.refreshViewValue(),selectCtrl.ngModel.$render())})}),$mdButtonInkRipple.attach(scope,element),configureAria(),scope.$on("$destroy",function(){selectCtrl.removeOption(optionCtrl.hashKey,optionCtrl)})}function OptionController($element){this.selected=!1,this.setSelected=function(isSelected){isSelected&&!this.selected?$element.attr({selected:"selected","aria-selected":"true"}):!isSelected&&this.selected&&($element.removeAttr("selected"),$element.attr("aria-selected","false")),this.selected=isSelected}}return OptionController.$inject=["$element"],{restrict:"E",require:["mdOption","^^mdSelectMenu"],controller:OptionController,compile:compile}}function OptgroupDirective(){function compile(el,attrs){var labelElement=el.find("label");labelElement.length||(labelElement=angular.element("<label>"),el.prepend(labelElement)),attrs.label&&labelElement.text(attrs.label)}return{restrict:"E",compile:compile}}function SelectProvider($$interimElementProvider){function selectDefaultOptions($mdSelect,$mdConstant,$$rAF,$mdUtil,$mdTheming,$timeout,$window){function onShow(scope,element,opts){function configureAria(){opts.target.attr("aria-expanded","true")}function activateInteraction(){function focusOption(direction){var optionsArray=nodesToArray(optionNodes),index=optionsArray.indexOf(opts.focusedNode);-1===index?index=0:"next"===direction&&index<optionsArray.length-1?index++:"prev"===direction&&index>0&&index--;var newOption=opts.focusedNode=optionsArray[index];newOption&&newOption.focus()}function focusNextOption(){focusOption("next")}function focusPrevOption(){focusOption("prev")}function checkCloseMenu(){selectCtrl.isMultiple||(opts.restoreFocus=!0,scope.$evalAsync(function(){$mdSelect.hide(selectCtrl.ngModel.$viewValue)}))}if(!opts.isRemoved){var selectCtrl=opts.selectEl.controller("mdSelectMenu")||{};element.addClass("md-clickable"),opts.backdrop&&opts.backdrop.on("click",function(e){e.preventDefault(),e.stopPropagation(),opts.restoreFocus=!1,scope.$apply($mdSelect.cancel)}),opts.selectEl.on("keydown",function(ev){switch(ev.keyCode){case $mdConstant.KEY_CODE.SPACE:case $mdConstant.KEY_CODE.ENTER:var option=$mdUtil.getClosest(ev.target,"md-option");option&&(opts.selectEl.triggerHandler({type:"click",target:option}),ev.preventDefault());break;case $mdConstant.KEY_CODE.TAB:case $mdConstant.KEY_CODE.ESCAPE:ev.preventDefault(),opts.restoreFocus=!0,scope.$apply($mdSelect.cancel)}}),opts.selectEl.on("keydown",function(ev){switch(ev.keyCode){case $mdConstant.KEY_CODE.UP_ARROW:return focusPrevOption();case $mdConstant.KEY_CODE.DOWN_ARROW:return focusNextOption();default:if(ev.keyCode>=31&&ev.keyCode<=90){var optNode=opts.selectEl.controller("mdSelectMenu").optNodeForKeyboardSearch(ev);optNode&&optNode.focus()}}}),opts.selectEl.on("click",checkCloseMenu),opts.selectEl.on("keydown",function(e){(32==e.keyCode||13==e.keyCode)&&checkCloseMenu()})}}if(!opts.target)throw new Error('$mdSelect.show() expected a target element in options.target but got "'+opts.target+'"!');angular.extend(opts,{isRemoved:!1,target:angular.element(opts.target),parent:angular.element(opts.parent),selectEl:element.find("md-select-menu"),contentEl:element.find("md-content"),backdrop:opts.hasBackdrop&&angular.element('<md-backdrop class="md-select-backdrop md-click-catcher">')}),opts.resizeFn=function(){$$rAF(function(){$$rAF(function(){animateSelect(scope,element,opts)})})},angular.element($window).on("resize",opts.resizeFn),angular.element($window).on("orientationchange",opts.resizeFn),configureAria(),element.removeClass("md-leave");var optionNodes=opts.selectEl[0].getElementsByTagName("md-option");return opts.loadingAsync&&opts.loadingAsync.then?opts.loadingAsync.then(function(){scope.$$loadingAsyncDone=!0,$$rAF(function(){$$rAF(function(){opts.isRemoved||animateSelect(scope,element,opts)})})}):opts.loadingAsync&&(scope.$$loadingAsyncDone=!0),opts.disableParentScroll&&!$mdUtil.getClosest(opts.target,"MD-DIALOG")?opts.restoreScroll=$mdUtil.disableScrollAround(opts.target):opts.disableParentScroll=!1,$timeout(activateInteraction,75,!1),opts.backdrop&&($mdTheming.inherit(opts.backdrop,opts.parent),opts.parent.append(opts.backdrop)),opts.parent.append(element),$$rAF(function(){$$rAF(function(){opts.isRemoved||animateSelect(scope,element,opts)})}),$mdUtil.transitionEndPromise(opts.selectEl,{timeout:350})}function onRemove(scope,element,opts){opts.isRemoved=!0,element.addClass("md-leave").removeClass("md-clickable"),opts.target.attr("aria-expanded","false"),angular.element($window).off("resize",opts.resizeFn),angular.element($window).off("orientationchange",opts.resizefn),opts.resizeFn=undefined;var mdSelect=opts.selectEl.controller("mdSelect");return mdSelect&&mdSelect.setLabelText(opts.selectEl.controller("mdSelectMenu").selectedLabels()),$mdUtil.transitionEndPromise(element,{timeout:350}).then(function(){element.removeClass("md-active"),opts.backdrop&&opts.backdrop.remove(),element[0].parentNode===opts.parent[0]&&opts.parent[0].removeChild(element[0]),opts.disableParentScroll&&opts.restoreScroll(),opts.restoreFocus&&opts.target.focus()})}function animateSelect(scope,element,opts){var centeredNode,containerNode=element[0],targetNode=opts.target[0].firstElementChild.firstElementChild,parentNode=opts.parent[0],selectNode=opts.selectEl[0],contentNode=opts.contentEl[0],parentRect=parentNode.getBoundingClientRect(),targetRect=targetNode.getBoundingClientRect(),shouldOpenAroundTarget=!1,bounds={left:parentRect.left+SELECT_EDGE_MARGIN,top:SELECT_EDGE_MARGIN,bottom:parentRect.height-SELECT_EDGE_MARGIN,right:parentRect.width-SELECT_EDGE_MARGIN-($mdUtil.floatingScrollbars()?16:0)},spaceAvailable={top:targetRect.top-bounds.top,left:targetRect.left-bounds.left,right:bounds.right-(targetRect.left+targetRect.width),bottom:bounds.bottom-(targetRect.top+targetRect.height)},maxWidth=parentRect.width-2*SELECT_EDGE_MARGIN,isScrollable=contentNode.scrollHeight>contentNode.offsetHeight,selectedNode=selectNode.querySelector("md-option[selected]"),optionNodes=selectNode.getElementsByTagName("md-option"),optgroupNodes=selectNode.getElementsByTagName("md-optgroup");centeredNode=selectedNode?selectedNode:optgroupNodes.length?optgroupNodes[0]:optionNodes.length?optionNodes[0]:contentNode.firstElementChild||contentNode,contentNode.offsetWidth>maxWidth&&(contentNode.style["max-width"]=maxWidth+"px"),shouldOpenAroundTarget&&(contentNode.style["min-width"]=targetRect.width+"px"),isScrollable&&selectNode.classList.add("md-overflow");var selectMenuRect=selectNode.getBoundingClientRect(),centeredRect=getOffsetRect(centeredNode);if(centeredNode){var centeredStyle=$window.getComputedStyle(centeredNode);centeredRect.paddingLeft=parseInt(centeredStyle.paddingLeft,10)||0,centeredRect.paddingRight=parseInt(centeredStyle.paddingRight,10)||0}var focusedNode=centeredNode;if("MD-OPTGROUP"===(focusedNode.tagName||"").toUpperCase()&&(focusedNode=optionNodes[0]||contentNode.firstElementChild||contentNode),isScrollable){var scrollBuffer=contentNode.offsetHeight/2;contentNode.scrollTop=centeredRect.top+centeredRect.height/2-scrollBuffer,
spaceAvailable.top<scrollBuffer?contentNode.scrollTop=Math.min(centeredRect.top,contentNode.scrollTop+scrollBuffer-spaceAvailable.top):spaceAvailable.bottom<scrollBuffer&&(contentNode.scrollTop=Math.max(centeredRect.top+centeredRect.height-selectMenuRect.height,contentNode.scrollTop-scrollBuffer+spaceAvailable.bottom))}var left,top,transformOrigin;shouldOpenAroundTarget?(left=targetRect.left,top=targetRect.top+targetRect.height,transformOrigin="50% 0",top+selectMenuRect.height>bounds.bottom&&(top=targetRect.top-selectMenuRect.height,transformOrigin="50% 100%")):(left=targetRect.left+centeredRect.left-centeredRect.paddingLeft,top=Math.floor(targetRect.top+targetRect.height/2-centeredRect.height/2-centeredRect.top+contentNode.scrollTop),transformOrigin=centeredRect.left+targetRect.width/2+"px "+(centeredRect.top+centeredRect.height/2-contentNode.scrollTop)+"px 0px",containerNode.style.minWidth=targetRect.width+centeredRect.paddingLeft+centeredRect.paddingRight+"px");var containerRect=containerNode.getBoundingClientRect();containerNode.style.left=clamp(bounds.left,left,bounds.right-containerRect.width)+"px",containerNode.style.top=clamp(bounds.top,top,bounds.bottom-containerRect.height)+"px",selectNode.style[$mdConstant.CSS.TRANSFORM_ORIGIN]=transformOrigin,selectNode.style[$mdConstant.CSS.TRANSFORM]="scale("+Math.min(targetRect.width/selectMenuRect.width,1)+","+Math.min(targetRect.height/selectMenuRect.height,1)+")",$$rAF(function(){element.addClass("md-active"),selectNode.style[$mdConstant.CSS.TRANSFORM]="",focusedNode&&(opts.focusedNode=focusedNode,focusedNode.focus())})}return{parent:"body",onShow:onShow,onRemove:onRemove,hasBackdrop:!0,disableParentScroll:!0,themable:!0}}function clamp(min,n,max){return Math.max(min,Math.min(n,max))}function getOffsetRect(node){return node?{left:node.offsetLeft,top:node.offsetTop,width:node.offsetWidth,height:node.offsetHeight}:{left:0,top:0,width:0,height:0}}return selectDefaultOptions.$inject=["$mdSelect","$mdConstant","$$rAF","$mdUtil","$mdTheming","$timeout","$window"],$$interimElementProvider("$mdSelect").setDefaults({methods:["target"],options:selectDefaultOptions})}function nodesToArray(nodes){for(var results=[],i=0;i<nodes.length;++i)results.push(nodes.item(i));return results}var SELECT_EDGE_MARGIN=8,selectNextId=0;angular.module("material.components.select",["material.core","material.components.backdrop"]).directive("mdSelect",SelectDirective).directive("mdSelectMenu",SelectMenuDirective).directive("mdOption",OptionDirective).directive("mdOptgroup",OptgroupDirective).provider("$mdSelect",SelectProvider),SelectDirective.$inject=["$mdSelect","$mdUtil","$mdTheming","$mdAria","$interpolate","$compile","$parse"],SelectMenuDirective.$inject=["$parse","$mdUtil","$mdTheming"],OptionDirective.$inject=["$mdButtonInkRipple","$mdUtil"],SelectProvider.$inject=["$$interimElementProvider"]}(),function(){function SidenavService($mdComponentRegistry,$q){return function(handle){function waitForInstance(){return $mdComponentRegistry.when(handle).then(function(it){return instance=it,it})}var self,errorMsg="SideNav '"+handle+"' is not available!",instance=$mdComponentRegistry.get(handle);return instance||$mdComponentRegistry.notFoundError(handle),self={isOpen:function(){return instance&&instance.isOpen()},isLockedOpen:function(){return instance&&instance.isLockedOpen()},toggle:function(){return instance?instance.toggle():$q.reject(errorMsg)},open:function(){return instance?instance.open():$q.reject(errorMsg)},close:function(){return instance?instance.close():$q.reject(errorMsg)},then:function(callbackFn){var promise=instance?$q.when(instance):waitForInstance();return promise.then(callbackFn||angular.noop)}}}}function SidenavFocusDirective(){return{restrict:"A",require:"^mdSidenav",link:function(scope,element,attr,sidenavCtrl){sidenavCtrl.focusElement(element)}}}function SidenavDirective($timeout,$animate,$parse,$log,$mdMedia,$mdConstant,$compile,$mdTheming,$q,$document){function postLink(scope,element,attr,sidenavCtrl){function updateIsLocked(isLocked,oldValue){scope.isLockedOpen=isLocked,isLocked===oldValue?element.toggleClass("md-locked-open",!!isLocked):$animate[isLocked?"addClass":"removeClass"](element,"md-locked-open"),backdrop.toggleClass("md-locked-open",!!isLocked)}function updateIsOpen(isOpen){var parent=element.parent();parent[isOpen?"on":"off"]("keydown",onKeyDown),backdrop[isOpen?"on":"off"]("click",close),isOpen&&(triggeringElement=$document[0].activeElement);var focusEl=sidenavCtrl.focusElement();return disableParentScroll(isOpen),promise=$q.all([isOpen?$animate.enter(backdrop,parent):$animate.leave(backdrop),$animate[isOpen?"removeClass":"addClass"](element,"md-closed")]).then(function(){scope.isOpen&&focusEl&&focusEl.focus()})}function disableParentScroll(disabled){var parent=element.parent();disabled?(lastParentOverFlow=parent.css("overflow"),parent.css("overflow","hidden")):angular.isDefined(lastParentOverFlow)&&(parent.css("overflow",lastParentOverFlow),lastParentOverFlow=undefined)}function toggleOpen(isOpen){if(scope.isOpen==isOpen)return $q.when(!0);var deferred=$q.defer();return scope.isOpen=isOpen,$timeout(function(){promise.then(function(result){scope.isOpen||(triggeringElement&&triggeringElement.focus(),triggeringElement=null),deferred.resolve(result)})},0,!1),deferred.promise}function onKeyDown(ev){var isEscape=ev.keyCode===$mdConstant.KEY_CODE.ESCAPE;return isEscape?close(ev):$q.when(!0)}function close(ev){return ev.preventDefault(),ev.stopPropagation(),sidenavCtrl.close()}var lastParentOverFlow,triggeringElement=null,promise=$q.when(!0),isLockedOpenParsed=$parse(attr.mdIsLockedOpen),isLocked=function(){return isLockedOpenParsed(scope.$parent,{$media:function(arg){return $log.warn("$media is deprecated for is-locked-open. Use $mdMedia instead."),$mdMedia(arg)},$mdMedia:$mdMedia})},backdrop=$compile('<md-backdrop class="md-sidenav-backdrop md-opaque ng-enter">')(scope);element.on("$destroy",sidenavCtrl.destroy),$mdTheming.inherit(backdrop,element),scope.$watch(isLocked,updateIsLocked),scope.$watch("isOpen",updateIsOpen),sidenavCtrl.$toggleOpen=toggleOpen,sidenavCtrl.focusElement(sidenavCtrl.focusElement()||element)}return{restrict:"E",scope:{isOpen:"=?mdIsOpen"},controller:"$mdSidenavController",compile:function(element){return element.addClass("md-closed"),element.attr("tabIndex","-1"),postLink}}}function SidenavController($scope,$element,$attrs,$mdComponentRegistry,$q){var focusElement,self=this;self.isOpen=function(){return!!$scope.isOpen},self.isLockedOpen=function(){return!!$scope.isLockedOpen},self.open=function(){return self.$toggleOpen(!0)},self.close=function(){return self.$toggleOpen(!1)},self.toggle=function(){return self.$toggleOpen(!$scope.isOpen)},self.focusElement=function(el){return angular.isDefined(el)&&(focusElement=el),focusElement},self.$toggleOpen=function(){return $q.when($scope.isOpen)},self.destroy=$mdComponentRegistry.register(self,$attrs.mdComponentId)}angular.module("material.components.sidenav",["material.core","material.components.backdrop"]).factory("$mdSidenav",SidenavService).directive("mdSidenav",SidenavDirective).directive("mdSidenavFocus",SidenavFocusDirective).controller("$mdSidenavController",SidenavController),SidenavService.$inject=["$mdComponentRegistry","$q"],SidenavDirective.$inject=["$timeout","$animate","$parse","$log","$mdMedia","$mdConstant","$compile","$mdTheming","$q","$document"],SidenavController.$inject=["$scope","$element","$attrs","$mdComponentRegistry","$q"]}(),function(){function SliderDirective($$rAF,$window,$mdAria,$mdUtil,$mdConstant,$mdTheming,$mdGesture,$parse){function compile(tElement,tAttrs){return tElement.attr({tabIndex:0,role:"slider"}),$mdAria.expect(tElement,"aria-label"),postLink}function postLink(scope,element,attr,ngModelCtrl){function updateAll(){refreshSliderDimensions(),ngModelRender(),redrawTicks()}function updateMin(value){min=parseFloat(value),element.attr("aria-valuemin",value),updateAll()}function updateMax(value){max=parseFloat(value),element.attr("aria-valuemax",value),updateAll()}function updateStep(value){step=parseFloat(value),redrawTicks()}function updateAriaDisabled(isDisabled){element.attr("aria-disabled",!!isDisabled)}function redrawTicks(){if(angular.isDefined(attr.mdDiscrete)){var numSteps=Math.floor((max-min)/step);if(!tickCanvas){var trackTicksStyle=$window.getComputedStyle(tickContainer[0]);tickCanvas=angular.element('<canvas style="position:absolute;">'),tickCtx=tickCanvas[0].getContext("2d"),tickCtx.fillStyle=trackTicksStyle.backgroundColor||"black",tickContainer.append(tickCanvas)}var dimensions=getSliderDimensions();tickCanvas[0].width=dimensions.width,tickCanvas[0].height=dimensions.height;for(var distance,i=0;numSteps>=i;i++)distance=Math.floor(dimensions.width*(i/numSteps)),tickCtx.fillRect(distance-1,0,2,dimensions.height)}}function refreshSliderDimensions(){sliderDimensions=trackContainer[0].getBoundingClientRect()}function getSliderDimensions(){return throttledRefreshDimensions(),sliderDimensions}function keydownListener(ev){if(!element[0].hasAttribute("disabled")){var changeAmount;ev.keyCode===$mdConstant.KEY_CODE.LEFT_ARROW?changeAmount=-step:ev.keyCode===$mdConstant.KEY_CODE.RIGHT_ARROW&&(changeAmount=step),changeAmount&&((ev.metaKey||ev.ctrlKey||ev.altKey)&&(changeAmount*=4),ev.preventDefault(),ev.stopPropagation(),scope.$evalAsync(function(){setModelValue(ngModelCtrl.$viewValue+changeAmount)}))}}function setModelValue(value){ngModelCtrl.$setViewValue(minMaxValidator(stepValidator(value)))}function ngModelRender(){isNaN(ngModelCtrl.$viewValue)&&(ngModelCtrl.$viewValue=ngModelCtrl.$modelValue);var percent=(ngModelCtrl.$viewValue-min)/(max-min);scope.modelValue=ngModelCtrl.$viewValue,element.attr("aria-valuenow",ngModelCtrl.$viewValue),setSliderPercent(percent),thumbText.text(ngModelCtrl.$viewValue)}function minMaxValidator(value){return angular.isNumber(value)?Math.max(min,Math.min(max,value)):void 0}function stepValidator(value){if(angular.isNumber(value)){var formattedValue=Math.round(value/step)*step;return Math.round(1e3*formattedValue)/1e3}}function setSliderPercent(percent){activeTrack.css("width",100*percent+"%"),thumbContainer.css("left",100*percent+"%"),element.toggleClass("md-min",0===percent)}function onPressDown(ev){if(!isDisabledGetter()){element.addClass("active"),element[0].focus(),refreshSliderDimensions();var exactVal=percentToValue(positionToPercent(ev.pointer.x)),closestVal=minMaxValidator(stepValidator(exactVal));scope.$apply(function(){setModelValue(closestVal),setSliderPercent(valueToPercent(closestVal))})}}function onPressUp(ev){if(!isDisabledGetter()){element.removeClass("dragging active");var exactVal=percentToValue(positionToPercent(ev.pointer.x)),closestVal=minMaxValidator(stepValidator(exactVal));scope.$apply(function(){setModelValue(closestVal),ngModelRender()})}}function onDragStart(ev){isDisabledGetter()||(isDragging=!0,ev.stopPropagation(),element.addClass("dragging"),setSliderFromEvent(ev))}function onDrag(ev){isDragging&&(ev.stopPropagation(),setSliderFromEvent(ev))}function onDragEnd(ev){isDragging&&(ev.stopPropagation(),isDragging=!1)}function setSliderFromEvent(ev){isDiscrete?adjustThumbPosition(ev.pointer.x):doSlide(ev.pointer.x)}function doSlide(x){scope.$evalAsync(function(){setModelValue(percentToValue(positionToPercent(x)))})}function adjustThumbPosition(x){var exactVal=percentToValue(positionToPercent(x)),closestVal=minMaxValidator(stepValidator(exactVal));setSliderPercent(positionToPercent(x)),thumbText.text(closestVal)}function positionToPercent(x){return Math.max(0,Math.min(1,(x-sliderDimensions.left)/sliderDimensions.width))}function percentToValue(percent){return min+percent*(max-min)}function valueToPercent(val){return(val-min)/(max-min)}$mdTheming(element),ngModelCtrl=ngModelCtrl||{$setViewValue:function(val){this.$viewValue=val,this.$viewChangeListeners.forEach(function(cb){cb()})},$parsers:[],$formatters:[],$viewChangeListeners:[]};var isDisabledParsed=attr.ngDisabled&&$parse(attr.ngDisabled),isDisabledGetter=isDisabledParsed?function(){return isDisabledParsed(scope.$parent)}:angular.noop,thumb=angular.element(element[0].querySelector(".md-thumb")),thumbText=angular.element(element[0].querySelector(".md-thumb-text")),thumbContainer=thumb.parent(),trackContainer=angular.element(element[0].querySelector(".md-track-container")),activeTrack=angular.element(element[0].querySelector(".md-track-fill")),tickContainer=angular.element(element[0].querySelector(".md-track-ticks")),throttledRefreshDimensions=$mdUtil.throttle(refreshSliderDimensions,5e3);angular.isDefined(attr.min)?attr.$observe("min",updateMin):updateMin(0),angular.isDefined(attr.max)?attr.$observe("max",updateMax):updateMax(100),angular.isDefined(attr.step)?attr.$observe("step",updateStep):updateStep(1);var stopDisabledWatch=angular.noop;attr.ngDisabled&&(stopDisabledWatch=scope.$parent.$watch(attr.ngDisabled,updateAriaDisabled)),$mdGesture.register(element,"drag"),element.on("keydown",keydownListener).on("$md.pressdown",onPressDown).on("$md.pressup",onPressUp).on("$md.dragstart",onDragStart).on("$md.drag",onDrag).on("$md.dragend",onDragEnd),setTimeout(updateAll);var debouncedUpdateAll=$$rAF.throttle(updateAll);angular.element($window).on("resize",debouncedUpdateAll),scope.$on("$destroy",function(){angular.element($window).off("resize",debouncedUpdateAll),stopDisabledWatch()}),ngModelCtrl.$render=ngModelRender,ngModelCtrl.$viewChangeListeners.push(ngModelRender),ngModelCtrl.$formatters.push(minMaxValidator),ngModelCtrl.$formatters.push(stepValidator);var min,max,step,tickCanvas,tickCtx,sliderDimensions={};refreshSliderDimensions();var isDragging=!1,isDiscrete=angular.isDefined(attr.mdDiscrete)}return{scope:{},require:"?ngModel",template:'<div class="md-slider-wrapper">        <div class="md-track-container">          <div class="md-track"></div>          <div class="md-track md-track-fill"></div>          <div class="md-track-ticks"></div>        </div>        <div class="md-thumb-container">          <div class="md-thumb"></div>          <div class="md-focus-thumb"></div>          <div class="md-focus-ring"></div>          <div class="md-sign">            <span class="md-thumb-text"></span>          </div>          <div class="md-disabled-thumb"></div>        </div>      </div>',compile:compile}}angular.module("material.components.slider",["material.core"]).directive("mdSlider",SliderDirective),SliderDirective.$inject=["$$rAF","$window","$mdAria","$mdUtil","$mdConstant","$mdTheming","$mdGesture","$parse"]}(),function(){function MdSticky($document,$mdConstant,$compile,$$rAF,$mdUtil){function setupSticky(contentCtrl){function add(element,stickyClone){stickyClone.addClass("md-sticky-clone"),stickyClone.css("top",stickyBaseoffset+"px");var item={element:element,clone:stickyClone};return self.items.push(item),contentEl.parent().prepend(item.clone),debouncedRefreshElements(),function(){self.items.forEach(function(item,index){item.element[0]===element[0]&&(self.items.splice(index,1),item.clone.remove())}),debouncedRefreshElements()}}function refreshElements(){self.items.forEach(refreshPosition),self.items=self.items.sort(function(a,b){return a.top<b.top?-1:1});for(var item,currentScrollTop=contentEl.prop("scrollTop"),i=self.items.length-1;i>=0;i--)if(currentScrollTop>self.items[i].top){item=self.items[i];break}setCurrentItem(item)}function refreshPosition(item){var current=item.element[0];for(item.top=0,item.left=0;current&&current!==contentEl[0];)item.top+=current.offsetTop,item.left+=current.offsetLeft,current=current.offsetParent;item.height=item.element.prop("offsetHeight"),item.clone.css("margin-left",item.left+"px"),$mdUtil.floatingScrollbars()&&item.clone.css("margin-right","0")}function onScroll(){var scrollTop=contentEl.prop("scrollTop"),isScrollingDown=scrollTop>(onScroll.prevScrollTop||0);onScroll.prevScrollTop=scrollTop,0===scrollTop?setCurrentItem(null):isScrollingDown&&self.next?self.next.top-scrollTop<=0?setCurrentItem(self.next):self.current&&(self.next.top-scrollTop<=self.next.height?translate(self.current,self.next.top-self.next.height-scrollTop):translate(self.current,null)):!isScrollingDown&&self.current&&(scrollTop<self.current.top&&setCurrentItem(self.prev),self.current&&self.next&&(scrollTop>=self.next.top-self.current.height?translate(self.current,self.next.top-scrollTop-self.current.height):translate(self.current,null)))}function setCurrentItem(item){if(self.current!==item){self.current&&(translate(self.current,null),setStickyState(self.current,null)),item&&setStickyState(item,"active"),self.current=item;var index=self.items.indexOf(item);self.next=self.items[index+1],self.prev=self.items[index-1],setStickyState(self.next,"next"),setStickyState(self.prev,"prev")}}function setStickyState(item,state){item&&item.state!==state&&(item.state&&(item.clone.attr("sticky-prev-state",item.state),item.element.attr("sticky-prev-state",item.state)),item.clone.attr("sticky-state",state),item.element.attr("sticky-state",state),item.state=state)}function translate(item,amount){item&&(null===amount||amount===undefined?item.translateY&&(item.translateY=null,item.clone.css($mdConstant.CSS.TRANSFORM,"")):(item.translateY=amount,item.clone.css($mdConstant.CSS.TRANSFORM,"translate3d("+item.left+"px,"+amount+"px,0)")))}var contentEl=contentCtrl.$element,debouncedRefreshElements=$$rAF.throttle(refreshElements);setupAugmentedScrollEvents(contentEl),contentEl.on("$scrollstart",debouncedRefreshElements),contentEl.on("$scroll",onScroll);var self,stickyBaseoffset=contentEl.prop("offsetTop");return self={prev:null,current:null,next:null,items:[],add:add,refreshElements:refreshElements}}function checkStickySupport($el){var stickyProp,testEl=angular.element("<div>");$document[0].body.appendChild(testEl[0]);for(var stickyProps=["sticky","-webkit-sticky"],i=0;i<stickyProps.length;++i)if(testEl.css({position:stickyProps[i],top:0,"z-index":2}),testEl.css("position")==stickyProps[i]){stickyProp=stickyProps[i];break}return testEl.remove(),stickyProp}function setupAugmentedScrollEvents(element){function loopScrollEvent(){+$mdUtil.now()-lastScrollTime>SCROLL_END_DELAY?(isScrolling=!1,element.triggerHandler("$scrollend")):(element.triggerHandler("$scroll"),$$rAF(loopScrollEvent))}var isScrolling,lastScrollTime,SCROLL_END_DELAY=200;element.on("scroll touchmove",function(){isScrolling||(isScrolling=!0,$$rAF(loopScrollEvent),element.triggerHandler("$scrollstart")),element.triggerHandler("$scroll"),lastScrollTime=+$mdUtil.now()})}var browserStickySupport=checkStickySupport();return function(scope,element,stickyClone){var contentCtrl=element.controller("mdContent");if(contentCtrl)if(browserStickySupport)element.css({position:browserStickySupport,top:0,"z-index":2});else{var $$sticky=contentCtrl.$element.data("$$sticky");$$sticky||($$sticky=setupSticky(contentCtrl),contentCtrl.$element.data("$$sticky",$$sticky));var deregister=$$sticky.add(element,stickyClone||element.clone());scope.$on("$destroy",deregister)}}}angular.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",MdSticky),MdSticky.$inject=["$document","$mdConstant","$compile","$$rAF","$mdUtil"]}(),function(){function MdSubheaderDirective($mdSticky,$compile,$mdTheming){return{restrict:"E",replace:!0,transclude:!0,template:'<h2 class="md-subheader"><div class="md-subheader-inner"><span class="md-subheader-content"></span></div></h2>',compile:function(element,attr,transclude){return function(scope,element,attr){function getContent(el){return angular.element(el[0].querySelector(".md-subheader-content"))}$mdTheming(element);var outerHTML=element[0].outerHTML;transclude(scope,function(clone){getContent(element).append(clone)}),element.hasClass("md-no-sticky")||transclude(scope,function(clone){var stickyClone=$compile(angular.element(outerHTML))(scope);getContent(stickyClone).append(clone),$mdSticky(scope,element,stickyClone)})}}}}angular.module("material.components.subheader",["material.core","material.components.sticky"]).directive("mdSubheader",MdSubheaderDirective),MdSubheaderDirective.$inject=["$mdSticky","$compile","$mdTheming"]}(),function(){function getDirective(name){function DirectiveFactory($parse){function postLink(scope,element,attr){var fn=$parse(attr[directiveName]);element.on(eventName,function(ev){scope.$apply(function(){fn(scope,{$event:ev})})})}return{restrict:"A",link:postLink}}var directiveName="md"+name,eventName="$md."+name.toLowerCase();return DirectiveFactory.$inject=["$parse"],DirectiveFactory}angular.module("material.components.swipe",["material.core"]).directive("mdSwipeLeft",getDirective("SwipeLeft")).directive("mdSwipeRight",getDirective("SwipeRight"))}(),function(){function MdSwitch(mdCheckboxDirective,$mdTheming,$mdUtil,$document,$mdConstant,$parse,$$rAF,$mdGesture){function compile(element,attr){var checkboxLink=checkboxDirective.compile(element,attr);return element.addClass("md-dragging"),function(scope,element,attr,ngModel){function onDragStart(ev){disabledGetter(scope)||(ev.stopPropagation(),element.addClass("md-dragging"),drag={width:thumbContainer.prop("offsetWidth")},element.removeClass("transition"))}function onDrag(ev){if(drag){ev.stopPropagation(),ev.srcEvent&&ev.srcEvent.preventDefault();var percent=ev.pointer.distanceX/drag.width,translate=ngModel.$viewValue?1+percent:percent;translate=Math.max(0,Math.min(1,translate)),thumbContainer.css($mdConstant.CSS.TRANSFORM,"translate3d("+100*translate+"%,0,0)"),drag.translate=translate}}function onDragEnd(ev){if(drag){ev.stopPropagation(),element.removeClass("md-dragging"),thumbContainer.css($mdConstant.CSS.TRANSFORM,"");var isChanged=ngModel.$viewValue?drag.translate<.5:drag.translate>.5;isChanged&&applyModelValue(!ngModel.$viewValue),drag=null}}function applyModelValue(newValue){scope.$apply(function(){ngModel.$setViewValue(newValue),ngModel.$render()})}ngModel=ngModel||$mdUtil.fakeNgModel();var disabledGetter=$parse(attr.ngDisabled),thumbContainer=angular.element(element[0].querySelector(".md-thumb-container")),switchContainer=angular.element(element[0].querySelector(".md-container"));$$rAF(function(){element.removeClass("md-dragging")}),checkboxLink(scope,element,attr,ngModel),angular.isDefined(attr.ngDisabled)&&scope.$watch(disabledGetter,function(isDisabled){element.attr("tabindex",isDisabled?-1:0)}),$mdGesture.register(switchContainer,"drag"),switchContainer.on("$md.dragstart",onDragStart).on("$md.drag",onDrag).on("$md.dragend",onDragEnd);var drag}}var checkboxDirective=mdCheckboxDirective[0];return{restrict:"E",priority:210,transclude:!0,template:'<div class="md-container"><div class="md-bar"></div><div class="md-thumb-container"><div class="md-thumb" md-ink-ripple md-ink-ripple-checkbox></div></div></div><div ng-transclude class="md-label"></div>',require:"?ngModel",compile:compile}}angular.module("material.components.switch",["material.core","material.components.checkbox"]).directive("mdSwitch",MdSwitch),MdSwitch.$inject=["mdCheckboxDirective","$mdTheming","$mdUtil","$document","$mdConstant","$parse","$$rAF","$mdGesture"]}(),function(){angular.module("material.components.tabs",["material.core","material.components.icon"])}(),function(){function MdToastDirective(){return{restrict:"E"}}function MdToastProvider($$interimElementProvider){function toastDefaultOptions($timeout,$animate,$mdToast,$mdUtil){function onShow(scope,element,options){return element=$mdUtil.extractElementByName(element,"md-toast"),activeToastContent=options.content,element.addClass(options.position.split(" ").map(function(pos){return"md-"+pos}).join(" ")),options.parent.addClass(toastOpenClass(options.position)),options.onSwipe=function(ev,gesture){element.addClass("md-"+ev.type.replace("$md.","")),$timeout($mdToast.cancel)},element.on("$md.swipeleft $md.swiperight",options.onSwipe),$animate.enter(element,options.parent)}function onRemove(scope,element,options){return element.off("$md.swipeleft $md.swiperight",options.onSwipe),options.parent.removeClass(toastOpenClass(options.position)),$animate.leave(element)}function toastOpenClass(position){return"md-toast-open-"+(position.indexOf("top")>-1?"top":"bottom")}return{onShow:onShow,onRemove:onRemove,position:"bottom left",themable:!0,hideDelay:3e3}}var activeToastContent,$mdToast=$$interimElementProvider("$mdToast").setDefaults({methods:["position","hideDelay","capsule"],options:toastDefaultOptions}).addPreset("simple",{argOption:"content",methods:["content","action","highlightAction","theme","parent"],options:["$mdToast","$mdTheming",function($mdToast,$mdTheming){var opts={template:['<md-toast md-theme="{{ toast.theme }}" ng-class="{\'md-capsule\': toast.capsule}">',"<span flex>{{ toast.content }}</span>",'<md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()" ng-class="{\'md-highlight\': toast.highlightAction}">',"{{ toast.action }}","</md-button>","</md-toast>"].join(""),controller:["$scope",function($scope){var self=this;$scope.$watch(function(){return activeToastContent},function(){self.content=activeToastContent}),this.resolve=function(){$mdToast.hide()}}],theme:$mdTheming.defaultTheme(),controllerAs:"toast",bindToController:!0};return opts}]}).addMethod("updateContent",function(newContent){activeToastContent=newContent});return toastDefaultOptions.$inject=["$timeout","$animate","$mdToast","$mdUtil"],$mdToast}angular.module("material.components.toast",["material.core","material.components.button"]).directive("mdToast",MdToastDirective).provider("$mdToast",MdToastProvider),MdToastProvider.$inject=["$$interimElementProvider"]}(),function(){function mdToolbarDirective($$rAF,$mdConstant,$mdUtil,$mdTheming,$animate,$timeout){return{restrict:"E",controller:angular.noop,link:function(scope,element,attr){function setupScrollShrink(){function onMdContentLoad($event,newContentEl){element.parent()[0]===newContentEl.parent()[0]&&(contentElement&&contentElement.off("scroll",debouncedContentScroll),newContentEl.on("scroll",debouncedContentScroll),newContentEl.attr("scroll-shrink","true"),contentElement=newContentEl,$$rAF(updateToolbarHeight))}function updateToolbarHeight(){toolbarHeight=element.prop("offsetHeight");var margin=-toolbarHeight*shrinkSpeedFactor+"px";contentElement.css("margin-top",margin),contentElement.css("margin-bottom",margin),onContentScroll()}function onContentScroll(e){var scrollTop=e?e.target.scrollTop:prevScrollTop;debouncedUpdateHeight(),y=Math.min(toolbarHeight/shrinkSpeedFactor,Math.max(0,y+scrollTop-prevScrollTop)),element.css($mdConstant.CSS.TRANSFORM,"translate3d(0,"+-y*shrinkSpeedFactor+"px,0)"),contentElement.css($mdConstant.CSS.TRANSFORM,"translate3d(0,"+(toolbarHeight-y)*shrinkSpeedFactor+"px,0)"),prevScrollTop=scrollTop,element.hasClass("md-whiteframe-z1")?y||$timeout(function(){$animate.removeClass(element,"md-whiteframe-z1")}):y&&$timeout(function(){$animate.addClass(element,"md-whiteframe-z1")})}var toolbarHeight,contentElement,y=0,prevScrollTop=0,shrinkSpeedFactor=attr.mdShrinkSpeedFactor||.5,debouncedContentScroll=$$rAF.throttle(onContentScroll),debouncedUpdateHeight=$mdUtil.debounce(updateToolbarHeight,5e3);scope.$on("$mdContentLoaded",onMdContentLoad)}$mdTheming(element),angular.isDefined(attr.mdScrollShrink)&&setupScrollShrink()}}}angular.module("material.components.toolbar",["material.core","material.components.content"]).directive("mdToolbar",mdToolbarDirective),mdToolbarDirective.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming","$animate","$timeout"]}(),function(){function MdTooltipDirective($timeout,$window,$$rAF,$document,$mdUtil,$mdTheming,$rootElement,$animate,$q){function postLink(scope,element,attr){function init(){setDefaults(),manipulateElement(),bindEvents(),configureWatchers(),addAriaLabel()}function setDefaults(){angular.isDefined(attr.mdDelay)||(scope.delay=TOOLTIP_SHOW_DELAY)}function configureWatchers(){scope.$on("$destroy",function(){scope.visible=!1,element.remove(),angular.element($window).off("resize",debouncedOnResize)}),scope.$watch("visible",function(isVisible){isVisible?showTooltip():hideTooltip()})}function addAriaLabel(){parent.attr("aria-label")||parent.text().trim()||parent.attr("aria-label",element.text().trim())}function manipulateElement(){element.detach(),element.attr("role","tooltip")}function getParentWithPointerEvents(){for(var parent=element.parent();parent&&"none"==$window.getComputedStyle(parent[0])["pointer-events"];)parent=parent.parent();return parent}function getNearestContentElement(){for(var current=element.parent()[0];current&&current!==$rootElement[0]&&current!==document.body;)current=current.parentNode;return current}function hasComputedStyleValue(key,value){var computedStyles=$window.getComputedStyle(element[0]);return angular.isDefined(computedStyles[key])&&computedStyles[key]==value}function bindEvents(){var mouseActive=!1,enterHandler=function(){hasComputedStyleValue("pointer-events","none")||setVisible(!0)},leaveHandler=function(){var autohide=scope.hasOwnProperty("autohide")?scope.autohide:attr.hasOwnProperty("mdAutohide");(autohide||mouseActive||$document[0].activeElement!==parent[0])&&setVisible(!1),mouseActive=!1};parent.on("mousedown",function(){mouseActive=!0}),parent.on("focus mouseenter touchstart",enterHandler),parent.on("blur mouseleave touchend touchcancel",leaveHandler),angular.element($window).on("resize",debouncedOnResize)}function setVisible(value){setVisible.value=!!value,setVisible.queued||(value?(setVisible.queued=!0,$timeout(function(){scope.visible=setVisible.value,setVisible.queued=!1},scope.delay)):$timeout(function(){scope.visible=!1}))}function showTooltip(){return tooltipParent.append(element),hasComputedStyleValue("display","none")?(scope.visible=!1,void element.detach()):(positionTooltip(),void angular.forEach([element,background,content],function(element){$animate.addClass(element,"md-show")}))}function hideTooltip(){$q.all([$animate.removeClass(content,"md-show"),$animate.removeClass(background,"md-show"),$animate.removeClass(element,"md-show")]).then(function(){scope.visible||element.detach()})}function positionTooltip(){function positionBackground(){var size="left"===direction||"right"===direction?2*Math.sqrt(Math.pow(tipRect.width,2)+Math.pow(tipRect.height/2,2)):2*Math.sqrt(Math.pow(tipRect.width/2,2)+Math.pow(tipRect.height,2)),position="left"===direction?{left:100,top:50}:"right"===direction?{left:0,top:50}:"top"===direction?{left:50,top:100}:{left:50,top:0};background.css({width:size+"px",height:size+"px",left:position.left+"%",top:position.top+"%"})}function fitInParent(pos){var newPosition={left:pos.left,top:pos.top};return newPosition.left=Math.min(newPosition.left,tooltipParent.prop("scrollWidth")-tipRect.width-TOOLTIP_WINDOW_EDGE_SPACE),newPosition.left=Math.max(newPosition.left,TOOLTIP_WINDOW_EDGE_SPACE),newPosition.top=Math.min(newPosition.top,tooltipParent.prop("scrollHeight")-tipRect.height-TOOLTIP_WINDOW_EDGE_SPACE),newPosition.top=Math.max(newPosition.top,TOOLTIP_WINDOW_EDGE_SPACE),newPosition}function getPosition(dir){return"left"===dir?{left:parentRect.left-tipRect.width-TOOLTIP_WINDOW_EDGE_SPACE,top:parentRect.top+parentRect.height/2-tipRect.height/2}:"right"===dir?{left:parentRect.left+parentRect.width+TOOLTIP_WINDOW_EDGE_SPACE,top:parentRect.top+parentRect.height/2-tipRect.height/2}:"top"===dir?{left:parentRect.left+parentRect.width/2-tipRect.width/2,top:parentRect.top-tipRect.height-TOOLTIP_WINDOW_EDGE_SPACE}:{left:parentRect.left+parentRect.width/2-tipRect.width/2,top:parentRect.top+parentRect.height+TOOLTIP_WINDOW_EDGE_SPACE}}var tipRect=$mdUtil.offsetRect(element,tooltipParent),parentRect=$mdUtil.offsetRect(parent,tooltipParent),newPosition=getPosition(direction);direction?newPosition=fitInParent(newPosition):newPosition.top>element.prop("offsetParent").scrollHeight-tipRect.height-TOOLTIP_WINDOW_EDGE_SPACE&&(newPosition=fitInParent(getPosition("top"))),element.css({top:newPosition.top+"px",left:newPosition.left+"px"}),positionBackground()}$mdTheming(element);var parent=getParentWithPointerEvents(),background=angular.element(element[0].getElementsByClassName("md-background")[0]),content=angular.element(element[0].getElementsByClassName("md-content")[0]),direction=attr.mdDirection,current=getNearestContentElement(),tooltipParent=angular.element(current||document.body),debouncedOnResize=$$rAF.throttle(function(){
scope.visible&&positionTooltip()});return init()}var TOOLTIP_SHOW_DELAY=300,TOOLTIP_WINDOW_EDGE_SPACE=8;return{restrict:"E",transclude:!0,priority:210,template:'        <div class="md-background"></div>        <div class="md-content" ng-transclude></div>',scope:{visible:"=?mdVisible",delay:"=?mdDelay",autohide:"=?mdAutohide"},link:postLink}}angular.module("material.components.tooltip",["material.core"]).directive("mdTooltip",MdTooltipDirective),MdTooltipDirective.$inject=["$timeout","$window","$$rAF","$document","$mdUtil","$mdTheming","$rootElement","$animate","$q"]}(),function(){angular.module("material.components.whiteframe",[])}(),function(){function MdAutocompleteCtrl($scope,$element,$mdUtil,$mdConstant,$timeout,$mdTheming,$window,$animate,$rootElement){function init(){configureWatchers(),$timeout(function(){gatherElements(),focusElement(),moveDropdown()})}function positionDropdown(){function correctHorizontalAlignment(){var dropdown=elements.ul.getBoundingClientRect(),styles={};dropdown.right>root.right-MENU_PADDING&&(styles.left=hrect.right-dropdown.width+"px"),elements.$.ul.css(styles)}if(!elements)return $timeout(positionDropdown,0,!1);var hrect=elements.wrap.getBoundingClientRect(),vrect=elements.snap.getBoundingClientRect(),root=elements.root.getBoundingClientRect(),top=vrect.bottom-root.top,bot=root.bottom-vrect.top,left=hrect.left-root.left,width=hrect.width,styles={left:left+"px",minWidth:width+"px",maxWidth:Math.max(hrect.right-root.left,root.right-hrect.left)-MENU_PADDING+"px"};top>bot&&root.height-hrect.bottom-MENU_PADDING<MAX_HEIGHT?(styles.top="auto",styles.bottom=bot+"px",styles.maxHeight=Math.min(MAX_HEIGHT,hrect.top-root.top-MENU_PADDING)+"px"):(styles.top=top+"px",styles.bottom="auto",styles.maxHeight=Math.min(MAX_HEIGHT,root.bottom-hrect.bottom-MENU_PADDING)+"px"),elements.$.ul.css(styles),$timeout(correctHorizontalAlignment,0,!1)}function moveDropdown(){elements.$.root.length&&($mdTheming(elements.$.ul),elements.$.ul.detach(),elements.$.root.append(elements.$.ul),$animate.pin&&$animate.pin(elements.$.ul,$rootElement))}function focusElement(){$scope.autofocus&&elements.input.focus()}function configureWatchers(){var wait=parseInt($scope.delay,10)||0;$scope.$watch("searchText",wait?$mdUtil.debounce(handleSearchText,wait):handleSearchText),registerSelectedItemWatcher(selectedItemChange),$scope.$watch("selectedItem",handleSelectedItemChange),$scope.$watch("$mdAutocompleteCtrl.hidden",function(hidden,oldHidden){!hidden&&oldHidden&&positionDropdown()}),angular.element($window).on("resize",positionDropdown),$scope.$on("$destroy",cleanup)}function cleanup(){elements.$.ul.remove()}function gatherElements(){elements={main:$element[0],ul:$element.find("ul")[0],input:$element.find("input")[0],wrap:$element.find("md-autocomplete-wrap")[0],root:document.body},elements.li=elements.ul.getElementsByTagName("li"),elements.snap=getSnapTarget(),elements.$=getAngularElements(elements)}function getSnapTarget(){for(var element=$element;element.length;element=element.parent())if(angular.isDefined(element.attr("md-autocomplete-snap")))return element[0];return elements.wrap}function getAngularElements(elements){var obj={};for(var key in elements)obj[key]=angular.element(elements[key]);return obj}function selectedItemChange(selectedItem,previousSelectedItem){selectedItem&&($scope.searchText=getDisplayValue(selectedItem)),$scope.itemChange&&selectedItem!==previousSelectedItem&&$scope.itemChange(getItemScope(selectedItem))}function handleSelectedItemChange(selectedItem,previousSelectedItem){for(var i=0;i<selectedItemWatchers.length;++i)selectedItemWatchers[i](selectedItem,previousSelectedItem)}function registerSelectedItemWatcher(cb){-1==selectedItemWatchers.indexOf(cb)&&selectedItemWatchers.push(cb)}function unregisterSelectedItemWatcher(cb){var i=selectedItemWatchers.indexOf(cb);-1!=i&&selectedItemWatchers.splice(i,1)}function handleSearchText(searchText,previousSearchText){self.index=getDefaultIndex(),searchText!==previousSearchText&&searchText!==getDisplayValue($scope.selectedItem)&&($scope.selectedItem=null,$scope.textChange&&searchText!==previousSearchText&&$scope.textChange(getItemScope($scope.selectedItem)),isMinLengthMet()?handleQuery():(self.loading=!1,self.matches=[],self.hidden=shouldHide(),updateMessages()))}function blur(){hasFocus=!1,noBlur||(self.hidden=!0)}function focus(){hasFocus=!0,angular.isString($scope.searchText)||($scope.searchText=""),$scope.minLength>0||(self.hidden=shouldHide(),self.hidden||handleQuery())}function keydown(event){switch(event.keyCode){case $mdConstant.KEY_CODE.DOWN_ARROW:if(self.loading)return;event.preventDefault(),self.index=Math.min(self.index+1,self.matches.length-1),updateScroll(),updateMessages();break;case $mdConstant.KEY_CODE.UP_ARROW:if(self.loading)return;event.preventDefault(),self.index=self.index<0?self.matches.length-1:Math.max(0,self.index-1),updateScroll(),updateMessages();break;case $mdConstant.KEY_CODE.TAB:case $mdConstant.KEY_CODE.ENTER:if(self.hidden||self.loading||self.index<0||self.matches.length<1)return;event.preventDefault(),select(self.index);break;case $mdConstant.KEY_CODE.ESCAPE:self.matches=[],self.hidden=!0,self.index=getDefaultIndex()}}function getMinLength(){return angular.isNumber($scope.minLength)?$scope.minLength:1}function getDisplayValue(item){return item&&$scope.itemText?$scope.itemText(getItemScope(item)):item}function getItemScope(item){if(item){var locals={};return self.itemName&&(locals[self.itemName]=item),locals}}function getDefaultIndex(){return $scope.autoselect?0:-1}function shouldHide(){return isMinLengthMet()?void 0:!0}function getCurrentDisplayValue(){return getDisplayValue(self.matches[self.index])}function isMinLengthMet(){return $scope.searchText&&$scope.searchText.length>=getMinLength()}function select(index){$scope.selectedItem=self.matches[index],self.hidden=!0,self.index=0,self.matches=[],$timeout(function(){elements.$.input.controller("ngModel").$setViewValue(getDisplayValue($scope.selectedItem)||$scope.searchText),self.hidden=!0})}function clearValue(){$scope.searchText="",select(-1);var eventObj=document.createEvent("CustomEvent");eventObj.initCustomEvent("input",!0,!0,{value:$scope.searchText}),elements.input.dispatchEvent(eventObj),elements.input.focus()}function fetchResults(searchText){function handleResults(matches){cache[term]=matches,searchText===$scope.searchText&&(self.loading=!1,promise=null,self.matches=matches,self.hidden=shouldHide(),updateMessages(),positionDropdown())}var items=$scope.$parent.$eval(itemExpr),term=searchText.toLowerCase();angular.isArray(items)?handleResults(items):(self.loading=!0,items.success&&items.success(handleResults),items.then&&items.then(handleResults),items.error&&items.error(function(){self.loading=!1}))}function updateMessages(){self.messages=[getCountMessage(),getCurrentDisplayValue()]}function getCountMessage(){if(lastCount===self.matches.length)return"";switch(lastCount=self.matches.length,self.matches.length){case 0:return"There are no matches available.";case 1:return"There is 1 match available.";default:return"There are "+self.matches.length+" matches available."}}function updateScroll(){if(elements.li[self.index]){var li=elements.li[self.index],top=li.offsetTop,bot=top+li.offsetHeight,hgt=elements.ul.clientHeight;top<elements.ul.scrollTop?elements.ul.scrollTop=top:bot>elements.ul.scrollTop+hgt&&(elements.ul.scrollTop=bot-hgt)}}function handleQuery(){var searchText=$scope.searchText,term=searchText.toLowerCase();promise&&promise.cancel&&(promise.cancel(),promise=null),!$scope.noCache&&cache[term]?(self.matches=cache[term],updateMessages()):fetchResults(searchText),hasFocus&&(self.hidden=shouldHide())}var self=this,itemParts=$scope.itemsExpr.split(/ in /i),itemExpr=itemParts[1],elements=null,promise=null,cache={},noBlur=!1,selectedItemWatchers=[],hasFocus=!1,lastCount=0;return self.scope=$scope,self.parent=$scope.$parent,self.itemName=itemParts[0],self.matches=[],self.loading=!1,self.hidden=!0,self.index=null,self.messages=[],self.id=$mdUtil.nextUid(),self.keydown=keydown,self.blur=blur,self.focus=focus,self.clear=clearValue,self.select=select,self.getCurrentDisplayValue=getCurrentDisplayValue,self.registerSelectedItemWatcher=registerSelectedItemWatcher,self.unregisterSelectedItemWatcher=unregisterSelectedItemWatcher,self.listEnter=function(){noBlur=!0},self.listLeave=function(){noBlur=!1,hasFocus||(self.hidden=!0)},self.mouseUp=function(){elements.input.focus()},init()}angular.module("material.components.autocomplete").controller("MdAutocompleteCtrl",MdAutocompleteCtrl);var ITEM_HEIGHT=41,MAX_HEIGHT=5.5*ITEM_HEIGHT,MENU_PADDING=8;MdAutocompleteCtrl.$inject=["$scope","$element","$mdUtil","$mdConstant","$timeout","$mdTheming","$window","$animate","$rootElement"]}(),function(){function MdAutocomplete($mdTheming,$mdUtil){function link(scope,element,attr){attr.$observe("disabled",function(value){scope.isDisabled=value}),attr.$observe("required",function(value){scope.isRequired=null!==value}),$mdUtil.initOptionalProperties(scope,attr,{searchText:null,selectedItem:null}),$mdTheming(element)}return{controller:"MdAutocompleteCtrl",controllerAs:"$mdAutocompleteCtrl",link:link,scope:{inputName:"@mdInputName",inputMinlength:"@mdInputMinlength",inputMaxlength:"@mdInputMaxlength",searchText:"=?mdSearchText",selectedItem:"=?mdSelectedItem",itemsExpr:"@mdItems",itemText:"&mdItemText",placeholder:"@placeholder",noCache:"=?mdNoCache",itemChange:"&?mdSelectedItemChange",textChange:"&?mdSearchTextChange",minLength:"=?mdMinLength",delay:"=?mdDelay",autofocus:"=?mdAutofocus",floatingLabel:"@?mdFloatingLabel",autoselect:"=?mdAutoselect",menuClass:"@?mdMenuClass"},template:function(element,attr){function getItemTemplate(){var templateTag=element.find("md-item-template").remove(),html=templateTag.length?templateTag.html():element.html();return templateTag.length||element.empty(),html}function getNoItemsTemplate(){var templateTag=element.find("md-not-found").remove(),template=templateTag.length?templateTag.html():"";return template?'<li ng-if="!$mdAutocompleteCtrl.matches.length && !$mdAutocompleteCtrl.loading                         && !$mdAutocompleteCtrl.hidden"                         ng-hide="$mdAutocompleteCtrl.hidden"                         md-autocomplete-parent-scope>'+template+"</li>":""}function getInputElement(){return attr.mdFloatingLabel?'            <md-input-container flex ng-if="floatingLabel">              <label>{{floatingLabel}}</label>              <input type="search"                  id="fl-input-{{$mdAutocompleteCtrl.id}}"                  name="{{inputName}}"                  autocomplete="off"                  ng-required="isRequired"                  ng-minlength="inputMinlength"                  ng-maxlength="inputMaxlength"                  ng-disabled="isDisabled"                  ng-model="$mdAutocompleteCtrl.scope.searchText"                  ng-keydown="$mdAutocompleteCtrl.keydown($event)"                  ng-blur="$mdAutocompleteCtrl.blur()"                  ng-focus="$mdAutocompleteCtrl.focus()"                  aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                  aria-label="{{floatingLabel}}"                  aria-autocomplete="list"                  aria-haspopup="true"                  aria-activedescendant=""                  aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>              <div md-autocomplete-parent-scope md-autocomplete-replace>'+leftover+"</div>            </md-input-container>":'            <input flex type="search"                id="input-{{$mdAutocompleteCtrl.id}}"                name="{{inputName}}"                ng-if="!floatingLabel"                autocomplete="off"                ng-required="isRequired"                ng-disabled="isDisabled"                ng-model="$mdAutocompleteCtrl.scope.searchText"                ng-keydown="$mdAutocompleteCtrl.keydown($event)"                ng-blur="$mdAutocompleteCtrl.blur()"                ng-focus="$mdAutocompleteCtrl.focus()"                placeholder="{{placeholder}}"                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                aria-label="{{placeholder}}"                aria-autocomplete="list"                aria-haspopup="true"                aria-activedescendant=""                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>            <button                type="button"                tabindex="-1"                ng-if="$mdAutocompleteCtrl.scope.searchText && !isDisabled"                ng-click="$mdAutocompleteCtrl.clear()">              <md-icon md-svg-icon="md-close"></md-icon>              <span class="md-visually-hidden">Clear</span>            </button>                '}var noItemsTemplate=getNoItemsTemplate(),itemTemplate=getItemTemplate(),leftover=element.html();return'        <md-autocomplete-wrap            layout="row"            ng-class="{ \'md-whiteframe-z1\': !floatingLabel }"            role="listbox">          '+getInputElement()+'          <md-progress-linear              ng-if="$mdAutocompleteCtrl.loading"              md-mode="indeterminate"></md-progress-linear>          <ul role="presentation"              class="md-autocomplete-suggestions md-whiteframe-z1 {{menuClass || \'\'}}"              id="ul-{{$mdAutocompleteCtrl.id}}"              ng-mouseenter="$mdAutocompleteCtrl.listEnter()"              ng-mouseleave="$mdAutocompleteCtrl.listLeave()"              ng-mouseup="$mdAutocompleteCtrl.mouseUp()">            <li ng-repeat="(index, item) in $mdAutocompleteCtrl.matches"                ng-class="{ selected: index === $mdAutocompleteCtrl.index }"                ng-hide="$mdAutocompleteCtrl.hidden"                ng-click="$mdAutocompleteCtrl.select(index)"                md-autocomplete-list-item="$mdAutocompleteCtrl.itemName">                '+itemTemplate+"            </li>            "+noItemsTemplate+'          </ul>        </md-autocomplete-wrap>        <aria-status            class="md-visually-hidden"            role="status"            aria-live="assertive">          <p ng-repeat="message in $mdAutocompleteCtrl.messages" ng-if="message">{{message}}</p>        </aria-status>'}}}angular.module("material.components.autocomplete").directive("mdAutocomplete",MdAutocomplete),MdAutocomplete.$inject=["$mdTheming","$mdUtil"]}(),function(){function MdHighlightCtrl($scope,$element,$interpolate){function init(term){var unsafeText=$interpolate($element.html())($scope),text=angular.element("<div>").text(unsafeText).html(),flags=$element.attr("md-highlight-flags")||"",watcher=$scope.$watch(term,function(term){var regex=getRegExp(term,flags),html=text.replace(regex,'<span class="highlight">$&</span>');$element.html(html)});$element.on("$destroy",function(){watcher()})}function sanitize(term){return term?term.replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/g,"\\$&"):term}function getRegExp(text,flags){var str="";return flags.indexOf("^")>=1&&(str+="^"),str+=text,flags.indexOf("$")>=1&&(str+="$"),new RegExp(sanitize(str),flags.replace(/[\$\^]/g,""))}return this.init=init,init()}angular.module("material.components.autocomplete").controller("MdHighlightCtrl",MdHighlightCtrl),MdHighlightCtrl.$inject=["$scope","$element","$interpolate"]}(),function(){function MdHighlight(){return{terminal:!0,scope:!1,controller:"MdHighlightCtrl",link:function(scope,element,attr,ctrl){ctrl.init(attr.mdHighlightText)}}}angular.module("material.components.autocomplete").directive("mdHighlightText",MdHighlight)}(),function(){function MdAutocompleteListItem($compile,$mdUtil){function postLink(scope,element,attr){var ctrl=scope.$parent.$mdAutocompleteCtrl,newScope=ctrl.parent.$new(!1,ctrl.parent),itemName=ctrl.scope.$eval(attr.mdAutocompleteListItem);newScope[itemName]=scope.item,$compile(element.contents())(newScope),element.attr({role:"option",id:"item_"+$mdUtil.nextUid()})}return{terminal:!0,link:postLink,scope:!1}}angular.module("material.components.autocomplete").directive("mdAutocompleteListItem",MdAutocompleteListItem),MdAutocompleteListItem.$inject=["$compile","$mdUtil"]}(),function(){function MdAutocompleteParentScope($compile,$mdUtil){function postLink(scope,element,attr){var ctrl=scope.$parent.$mdAutocompleteCtrl;$compile(element.contents())(ctrl.parent),attr.hasOwnProperty("mdAutocompleteReplace")&&(element.after(element.contents()),element.remove())}return{restrict:"A",terminal:!0,link:postLink,scope:!1}}angular.module("material.components.autocomplete").directive("mdAutocompleteParentScope",MdAutocompleteParentScope),MdAutocompleteParentScope.$inject=["$compile","$mdUtil"]}(),function(){function MdChip($mdTheming){function compile(element,attr){return element.append(DELETE_HINT_TEMPLATE),function(scope,element,attr,ctrl){element.addClass("md-chip"),$mdTheming(element),ctrl&&angular.element(element[0].querySelector(".md-chip-content")).on("blur",function(){ctrl.selectedChip=-1})}}return{restrict:"E",require:"^?mdChips",compile:compile}}angular.module("material.components.chips").directive("mdChip",MdChip);var DELETE_HINT_TEMPLATE='    <span ng-if="!$mdChipsCtrl.readonly" class="md-visually-hidden">      {{$mdChipsCtrl.deleteHint}}    </span>';MdChip.$inject=["$mdTheming"]}(),function(){function MdChipRemove($timeout){function postLink(scope,element,attr,ctrl){element.on("click",function(event){scope.$apply(function(){ctrl.removeChip(scope.$$replacedScope.$index)})}),$timeout(function(){element.attr({tabindex:-1,ariaHidden:!0}),element.find("button").attr("tabindex","-1")})}return{restrict:"A",require:"^mdChips",scope:!1,link:postLink}}angular.module("material.components.chips").directive("mdChipRemove",MdChipRemove),MdChipRemove.$inject=["$timeout"]}(),function(){function MdChipTransclude($compile,$mdUtil){function link(scope,element,attr){var ctrl=scope.$parent.$mdChipsCtrl,newScope=ctrl.parent.$new(!1,ctrl.parent);newScope.$$replacedScope=scope,newScope.$chip=scope.$chip,newScope.$mdChipsCtrl=ctrl,element.html(ctrl.$scope.$eval(attr.mdChipTransclude)),$compile(element.contents())(newScope)}return{restrict:"EA",terminal:!0,link:link,scope:!1}}angular.module("material.components.chips").directive("mdChipTransclude",MdChipTransclude),MdChipTransclude.$inject=["$compile","$mdUtil"]}(),function(){function MdChipsCtrl($scope,$mdConstant,$log,$element,$timeout){this.$timeout=$timeout,this.$mdConstant=$mdConstant,this.$scope=$scope,this.parent=$scope.$parent,this.$log=$log,this.$element=$element,this.ngModelCtrl=null,this.userInputNgModelCtrl=null,this.userInputElement=null,this.items=[],this.selectedChip=-1,this.deleteHint="Press delete to remove this chip.",this.deleteButtonLabel="Remove",this.chipBuffer="",this.useMdOnAppend=!1}angular.module("material.components.chips").controller("MdChipsCtrl",MdChipsCtrl),MdChipsCtrl.$inject=["$scope","$mdConstant","$log","$element","$timeout"],MdChipsCtrl.prototype.inputKeydown=function(event){var chipBuffer=this.getChipBuffer();switch(event.keyCode){case this.$mdConstant.KEY_CODE.ENTER:if(this.$scope.requireMatch||!chipBuffer)break;event.preventDefault(),this.appendChip(chipBuffer),this.resetChipBuffer();break;case this.$mdConstant.KEY_CODE.BACKSPACE:if(chipBuffer)break;event.stopPropagation(),this.items.length&&this.selectAndFocusChipSafe(this.items.length-1)}},MdChipsCtrl.prototype.chipKeydown=function(event){if(!this.getChipBuffer())switch(event.keyCode){case this.$mdConstant.KEY_CODE.BACKSPACE:case this.$mdConstant.KEY_CODE.DELETE:if(this.selectedChip<0)return;event.preventDefault(),this.removeAndSelectAdjacentChip(this.selectedChip);break;case this.$mdConstant.KEY_CODE.LEFT_ARROW:event.preventDefault(),this.selectedChip<0&&(this.selectedChip=this.items.length),this.items.length&&this.selectAndFocusChipSafe(this.selectedChip-1);break;case this.$mdConstant.KEY_CODE.RIGHT_ARROW:event.preventDefault(),this.selectAndFocusChipSafe(this.selectedChip+1);break;case this.$mdConstant.KEY_CODE.ESCAPE:case this.$mdConstant.KEY_CODE.TAB:if(this.selectedChip<0)return;event.preventDefault(),this.onFocus()}},MdChipsCtrl.prototype.getPlaceholder=function(){var useSecondary=this.items.length&&(""==this.secondaryPlaceholder||this.secondaryPlaceholder);return useSecondary?this.placeholder:this.secondaryPlaceholder},MdChipsCtrl.prototype.removeAndSelectAdjacentChip=function(index){var selIndex=this.getAdjacentChipIndex(index);this.removeChip(index),this.$timeout(angular.bind(this,function(){this.selectAndFocusChipSafe(selIndex)}))},MdChipsCtrl.prototype.resetSelectedChip=function(){this.selectedChip=-1},MdChipsCtrl.prototype.getAdjacentChipIndex=function(index){var len=this.items.length-1;return 0==len?-1:index==len?index-1:index},MdChipsCtrl.prototype.appendChip=function(newChip){this.items.indexOf(newChip)+1||(this.useMdOnAppend&&this.mdOnAppend&&(newChip=this.mdOnAppend({$chip:newChip})),this.items.push(newChip))},MdChipsCtrl.prototype.useMdOnAppendExpression=function(){this.useMdOnAppend=!0},MdChipsCtrl.prototype.getChipBuffer=function(){return this.userInputElement?this.userInputNgModelCtrl?this.userInputNgModelCtrl.$viewValue:this.userInputElement[0].value:this.chipBuffer},MdChipsCtrl.prototype.resetChipBuffer=function(){this.userInputElement?this.userInputNgModelCtrl?(this.userInputNgModelCtrl.$setViewValue(""),this.userInputNgModelCtrl.$render()):this.userInputElement[0].value="":this.chipBuffer=""},MdChipsCtrl.prototype.removeChip=function(index){this.items.splice(index,1)},MdChipsCtrl.prototype.removeChipAndFocusInput=function(index){this.removeChip(index),this.onFocus()},MdChipsCtrl.prototype.selectAndFocusChipSafe=function(index){return this.items.length?index===this.items.length?this.onFocus():(index=Math.max(index,0),index=Math.min(index,this.items.length-1),this.selectChip(index),void this.focusChip(index)):(this.selectChip(-1),void this.onFocus())},MdChipsCtrl.prototype.selectChip=function(index){index>=-1&&index<=this.items.length?this.selectedChip=index:this.$log.warn("Selected Chip index out of bounds; ignoring.")},MdChipsCtrl.prototype.selectAndFocusChip=function(index){this.selectChip(index),-1!=index&&this.focusChip(index)},MdChipsCtrl.prototype.focusChip=function(index){this.$element[0].querySelector('md-chip[index="'+index+'"] .md-chip-content').focus()},MdChipsCtrl.prototype.configureNgModel=function(ngModelCtrl){this.ngModelCtrl=ngModelCtrl;var self=this;ngModelCtrl.$render=function(){self.items=self.ngModelCtrl.$viewValue}},MdChipsCtrl.prototype.onFocus=function(){var input=this.$element[0].querySelector("input");input&&input.focus(),this.resetSelectedChip()},MdChipsCtrl.prototype.onInputFocus=function(){this.inputHasFocus=!0,this.resetSelectedChip()},MdChipsCtrl.prototype.onInputBlur=function(){this.inputHasFocus=!1},MdChipsCtrl.prototype.configureUserInput=function(inputElement){this.userInputElement=inputElement;var ngModelCtrl=inputElement.controller("ngModel");ngModelCtrl!=this.ngModelCtrl&&(this.userInputNgModelCtrl=ngModelCtrl);var scope=this.$scope,ctrl=this;inputElement.attr({tabindex:0}).on("keydown",function(event){scope.$apply(angular.bind(ctrl,function(){ctrl.inputKeydown(event)}))}).on("focus",angular.bind(ctrl,ctrl.onInputFocus)).on("blur",angular.bind(ctrl,ctrl.onInputBlur))},MdChipsCtrl.prototype.configureAutocomplete=function(ctrl){ctrl.registerSelectedItemWatcher(angular.bind(this,function(item){item&&(this.appendChip(item),this.resetChipBuffer())})),this.$element.find("input").on("focus",angular.bind(this,this.onInputFocus)).on("blur",angular.bind(this,this.onInputBlur))},MdChipsCtrl.prototype.hasFocus=function(){return this.inputHasFocus||this.selectedChip>=0}}(),function(){function MdChips($mdTheming,$mdUtil,$compile,$log,$timeout){function compile(element,attr){function getTemplateByQuery(query){if(attr.ngModel){var element=userTemplate[0].querySelector(query);return element&&element.outerHTML}}var userTemplate=attr.$mdUserTemplate;attr.$mdUserTemplate=null;var chipRemoveTemplate=getTemplateByQuery("md-chips>*[md-chip-remove]")||CHIP_REMOVE_TEMPLATE,chipContentsTemplate=getTemplateByQuery("md-chips>md-chip-template")||CHIP_DEFAULT_TEMPLATE,chipInputTemplate=getTemplateByQuery("md-chips>md-autocomplete")||getTemplateByQuery("md-chips>input")||CHIP_INPUT_TEMPLATE,staticChips=userTemplate.find("md-chip");return userTemplate[0].querySelector("md-chip-template>*[md-chip-remove]")&&$log.warn("invalid placement of md-chip-remove within md-chip-template."),function(scope,element,attrs,controllers){$mdUtil.initOptionalProperties(scope,attr),$mdTheming(element);var mdChipsCtrl=controllers[0];if(mdChipsCtrl.chipContentsTemplate=chipContentsTemplate,mdChipsCtrl.chipRemoveTemplate=chipRemoveTemplate,mdChipsCtrl.chipInputTemplate=chipInputTemplate,element.attr({ariaHidden:!0,tabindex:-1}).on("focus",function(){mdChipsCtrl.onFocus()}),attr.ngModel&&(mdChipsCtrl.configureNgModel(element.controller("ngModel")),attrs.mdOnAppend&&mdChipsCtrl.useMdOnAppendExpression(),chipInputTemplate!=CHIP_INPUT_TEMPLATE&&$timeout(function(){0===chipInputTemplate.indexOf("<md-autocomplete")&&mdChipsCtrl.configureAutocomplete(element.find("md-autocomplete").controller("mdAutocomplete")),mdChipsCtrl.configureUserInput(element.find("input"))})),staticChips.length>0){var compiledStaticChips=$compile(staticChips)(scope.$parent);$timeout(function(){element.find("md-chips-wrap").prepend(compiledStaticChips)})}}}return{template:function(element,attrs){attrs.$mdUserTemplate=element.clone();return MD_CHIPS_TEMPLATE},require:["mdChips"],restrict:"E",controller:"MdChipsCtrl",controllerAs:"$mdChipsCtrl",bindToController:!0,compile:compile,scope:{readonly:"=readonly",placeholder:"@",secondaryPlaceholder:"@",mdOnAppend:"&",deleteHint:"@",deleteButtonLabel:"@",requireMatch:"=?mdRequireMatch"}}}angular.module("material.components.chips").directive("mdChips",MdChips);var MD_CHIPS_TEMPLATE='      <md-chips-wrap          ng-if="!$mdChipsCtrl.readonly || $mdChipsCtrl.items.length > 0"          ng-keydown="$mdChipsCtrl.chipKeydown($event)"          ng-class="{ \'md-focused\': $mdChipsCtrl.hasFocus() }"          class="md-chips">        <md-chip ng-repeat="$chip in $mdChipsCtrl.items"            index="{{$index}}"            ng-class="{\'md-focused\': $mdChipsCtrl.selectedChip == $index}">          <div class="md-chip-content"              tabindex="-1"              aria-hidden="true"              ng-focus="!$mdChipsCtrl.readonly && $mdChipsCtrl.selectChip($index)"              md-chip-transclude="$mdChipsCtrl.chipContentsTemplate"></div>          <div class="md-chip-remove-container"              md-chip-transclude="$mdChipsCtrl.chipRemoveTemplate"></div>        </md-chip>        <div ng-if="!$mdChipsCtrl.readonly && $mdChipsCtrl.ngModelCtrl"            class="md-chip-input-container"            md-chip-transclude="$mdChipsCtrl.chipInputTemplate"></div>        </div>      </md-chips-wrap>',CHIP_INPUT_TEMPLATE='        <input            tabindex="0"            placeholder="{{$mdChipsCtrl.getPlaceholder()}}"            aria-label="{{$mdChipsCtrl.getPlaceholder()}}"            ng-model="$mdChipsCtrl.chipBuffer"            ng-focus="$mdChipsCtrl.onInputFocus()"            ng-blur="$mdChipsCtrl.onInputBlur()"            ng-keydown="$mdChipsCtrl.inputKeydown($event)">',CHIP_DEFAULT_TEMPLATE="      <span>{{$chip}}</span>",CHIP_REMOVE_TEMPLATE='      <button          class="md-chip-remove"          ng-if="!$mdChipsCtrl.readonly"          ng-click="$mdChipsCtrl.removeChipAndFocusInput($$replacedScope.$index)"          type="button"          aria-hidden="true"          tabindex="-1">        <md-icon md-svg-icon="md-close"></md-icon>        <span class="md-visually-hidden">          {{$mdChipsCtrl.deleteButtonLabel}}        </span>      </button>';MdChips.$inject=["$mdTheming","$mdUtil","$compile","$log","$timeout"]}(),function(){function MdContactChipsCtrl(){this.selectedItem=null,this.searchText=""}angular.module("material.components.chips").controller("MdContactChipsCtrl",MdContactChipsCtrl),MdContactChipsCtrl.prototype.queryContact=function(searchText){var results=this.contactQuery({$query:searchText});return this.filterSelected?results.filter(angular.bind(this,this.filterSelectedContacts)):results},MdContactChipsCtrl.prototype.filterSelectedContacts=function(contact){return-1==this.contacts.indexOf(contact)}}(),function(){function MdContactChips($mdTheming,$mdUtil){function compile(element,attr){return function(scope,element,attrs,controllers){$mdUtil.initOptionalProperties(scope,attr),$mdTheming(element),element.attr("tabindex","-1")}}return{template:function(element,attrs){return MD_CONTACT_CHIPS_TEMPLATE},restrict:"E",controller:"MdContactChipsCtrl",controllerAs:"$mdContactChipsCtrl",bindToController:!0,compile:compile,scope:{contactQuery:"&mdContacts",placeholder:"@",secondaryPlaceholder:"@",contactName:"@mdContactName",contactImage:"@mdContactImage",contactEmail:"@mdContactEmail",contacts:"=ngModel",requireMatch:"=?mdRequireMatch"}}}angular.module("material.components.chips").directive("mdContactChips",MdContactChips);var MD_CONTACT_CHIPS_TEMPLATE='      <md-chips class="md-contact-chips"          ng-model="$mdContactChipsCtrl.contacts"          md-require-match="$mdContactChipsCtrl.requireMatch"          md-autocomplete-snap>          <md-autocomplete              md-menu-class="md-contact-chips-suggestions"              md-selected-item="$mdContactChipsCtrl.selectedItem"              md-search-text="$mdContactChipsCtrl.searchText"              md-items="item in $mdContactChipsCtrl.queryContact($mdContactChipsCtrl.searchText)"              md-item-text="$mdContactChipsCtrl.mdContactName"              md-no-cache="true"              md-autoselect              placeholder="{{$mdContactChipsCtrl.contacts.length == 0 ?                  $mdContactChipsCtrl.placeholder : $mdContactChipsCtrl.secondaryPlaceholder}}">            <div class="md-contact-suggestion">              <img                   ng-src="{{item[$mdContactChipsCtrl.contactImage]}}"                  alt="{{item[$mdContactChipsCtrl.contactName]}}" />              <span class="md-contact-name" md-highlight-text="$mdContactChipsCtrl.searchText">                {{item[$mdContactChipsCtrl.contactName]}}              </span>              <span class="md-contact-email" >{{item[$mdContactChipsCtrl.contactEmail]}}</span>            </div>          </md-autocomplete>          <md-chip-template>            <div class="md-contact-avatar">              <img                   ng-src="{{$chip[$mdContactChipsCtrl.contactImage]}}"                  alt="{{$chip[$mdContactChipsCtrl.contactName]}}" />            </div>            <div class="md-contact-name">              {{$chip[$mdContactChipsCtrl.contactName]}}            </div>          </md-chip-template>      </md-chips>';MdContactChips.$inject=["$mdTheming","$mdUtil"]}(),function(){function MdTab(){function postLink(scope,element,attr,ctrl){if(ctrl){var tabs=element.parent()[0].getElementsByTagName("md-tab"),index=Array.prototype.indexOf.call(tabs,element[0]),body=element.find("md-tab-body").remove(),label=element.find("md-tab-label").remove(),data=ctrl.insertTab({scope:scope,parent:scope.$parent,index:index,element:element,template:body.html(),label:label.html()},index);scope.select=scope.select||angular.noop,scope.deselect=scope.deselect||angular.noop,scope.$watch("active",function(active){active&&ctrl.select(data.getIndex())}),scope.$watch("disabled",function(){ctrl.refreshIndex()}),scope.$watch(function(){return Array.prototype.indexOf.call(tabs,element[0])},function(newIndex){data.index=newIndex,ctrl.updateTabOrder()}),scope.$on("$destroy",function(){ctrl.removeTab(data)})}}return{require:"^?mdTabs",terminal:!0,template:function(element,attr){function getLabel(){function getLabelAttribute(){return attr.label}function getLabelElement(){var label=element.find("md-tab-label");return label.length?label.remove().html():void 0}function getElementContents(){var html=element.html();return element.empty(),html}return getLabelElement()||getLabelAttribute()||getElementContents()}function getTemplate(){var content=element.find("md-tab-body"),template=content.length?content.html():attr.label?element.html():"";
return content.length?content.remove():attr.label&&element.empty(),template}var label=getLabel(),body=getTemplate();return"<md-tab-label>"+label+"</md-tab-label><md-tab-body>"+body+"</md-tab-body>"},scope:{active:"=?mdActive",disabled:"=?ngDisabled",select:"&?mdOnSelect",deselect:"&?mdOnDeselect"},link:postLink}}angular.module("material.components.tabs").directive("mdTab",MdTab)}(),function(){function MdTabItem(){return{require:"^?mdTabs",link:function(scope,element,attr,ctrl){ctrl&&ctrl.attachRipple(scope,element)}}}angular.module("material.components.tabs").directive("mdTabItem",MdTabItem)}(),function(){function MdTabLabel(){return{terminal:!0}}angular.module("material.components.tabs").directive("mdTabLabel",MdTabLabel)}(),function(){function MdTabScroll($parse){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr.mdTabScroll,null,!0);return function(scope,element){element.on("mousewheel",function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}}}angular.module("material.components.tabs").directive("mdTabScroll",MdTabScroll),MdTabScroll.$inject=["$parse"]}(),function(){function MdTabsController($scope,$element,$window,$timeout,$mdConstant,$mdTabInkRipple,$mdUtil,$animate){function init(){$scope.$watch("selectedIndex",handleSelectedIndexChange),$scope.$watch("$mdTabsCtrl.focusIndex",handleFocusIndexChange),$scope.$watch("$mdTabsCtrl.offsetLeft",handleOffsetChange),$scope.$watch("$mdTabsCtrl.hasContent",handleHasContent),angular.element($window).on("resize",handleWindowResize),angular.element(elements.paging).on("DOMSubtreeModified",ctrl.updateInkBarStyles),$timeout(updateHeightFromContent,0,!1),$timeout(adjustOffset),$scope.$on("$destroy",cleanup)}function cleanup(){destroyed=!0,angular.element($window).off("resize",handleWindowResize),angular.element(elements.paging).off("DOMSubtreeModified",ctrl.updateInkBarStyles)}function handleHasContent(hasContent){$element[hasContent?"removeClass":"addClass"]("md-no-tab-content")}function handleOffsetChange(left){var newValue=shouldCenterTabs()?"":"-"+left+"px";angular.element(elements.paging).css("transform","translate3d("+newValue+", 0, 0)"),$scope.$broadcast("$mdTabsPaginationChanged")}function handleFocusIndexChange(newIndex,oldIndex){newIndex!==oldIndex&&elements.tabs[newIndex]&&(adjustOffset(),redirectFocus())}function handleSelectedIndexChange(newValue,oldValue){newValue!==oldValue&&($scope.selectedIndex=getNearestSafeIndex(newValue),ctrl.lastSelectedIndex=oldValue,ctrl.updateInkBarStyles(),updateHeightFromContent(),$scope.$broadcast("$mdTabsChanged"),ctrl.tabs[oldValue]&&ctrl.tabs[oldValue].scope.deselect(),ctrl.tabs[newValue]&&ctrl.tabs[newValue].scope.select())}function handleResizeWhenVisible(){handleResizeWhenVisible.watcher||(handleResizeWhenVisible.watcher=$scope.$watch(function(){$timeout(function(){handleResizeWhenVisible.watcher&&$element.prop("offsetParent")&&(handleResizeWhenVisible.watcher(),handleResizeWhenVisible.watcher=null,handleWindowResize())},0,!1)}))}function keydown(event){switch(event.keyCode){case $mdConstant.KEY_CODE.LEFT_ARROW:event.preventDefault(),incrementSelectedIndex(-1,!0);break;case $mdConstant.KEY_CODE.RIGHT_ARROW:event.preventDefault(),incrementSelectedIndex(1,!0);break;case $mdConstant.KEY_CODE.SPACE:case $mdConstant.KEY_CODE.ENTER:event.preventDefault(),locked||($scope.selectedIndex=ctrl.focusIndex)}ctrl.lastClick=!1}function select(index){locked||(ctrl.focusIndex=$scope.selectedIndex=index),ctrl.lastClick=!0,ctrl.tabs[index].element.triggerHandler("click")}function scroll(event){shouldPaginate()&&(event.preventDefault(),ctrl.offsetLeft=fixOffset(ctrl.offsetLeft-event.wheelDelta))}function nextPage(){var i,tab,viewportWidth=elements.canvas.clientWidth,totalWidth=viewportWidth+ctrl.offsetLeft;for(i=0;i<elements.tabs.length&&(tab=elements.tabs[i],!(tab.offsetLeft+tab.offsetWidth>totalWidth));i++);ctrl.offsetLeft=fixOffset(tab.offsetLeft)}function previousPage(){var i,tab;for(i=0;i<elements.tabs.length&&(tab=elements.tabs[i],!(tab.offsetLeft+tab.offsetWidth>=ctrl.offsetLeft));i++);ctrl.offsetLeft=fixOffset(tab.offsetLeft+tab.offsetWidth-elements.canvas.clientWidth)}function handleWindowResize(){$scope.$apply(function(){ctrl.lastSelectedIndex=$scope.selectedIndex,ctrl.offsetLeft=fixOffset(ctrl.offsetLeft),$timeout(ctrl.updateInkBarStyles,0,!1)})}function removeTab(tabData){var selectedIndex=$scope.selectedIndex,tab=ctrl.tabs.splice(tabData.getIndex(),1)[0];refreshIndex(),$scope.selectedIndex!==selectedIndex||destroyed||(tab.scope.deselect(),ctrl.tabs[$scope.selectedIndex]&&ctrl.tabs[$scope.selectedIndex].scope.select()),$timeout(function(){ctrl.offsetLeft=fixOffset(ctrl.offsetLeft)})}function insertTab(tabData,index){var proto={getIndex:function(){return ctrl.tabs.indexOf(tab)},isActive:function(){return this.getIndex()===$scope.selectedIndex},isLeft:function(){return this.getIndex()<$scope.selectedIndex},isRight:function(){return this.getIndex()>$scope.selectedIndex},shouldRender:function(){return!$scope.noDisconnect||this.isActive()},hasFocus:function(){return!ctrl.lastClick&&ctrl.hasFocus&&this.getIndex()===ctrl.focusIndex},id:$mdUtil.nextUid()},tab=angular.extend(proto,tabData);return angular.isDefined(index)?ctrl.tabs.splice(index,0,tab):ctrl.tabs.push(tab),processQueue(),updateHasContent(),tab}function getElements(){var elements={};return elements.wrapper=$element[0].getElementsByTagName("md-tabs-wrapper")[0],elements.canvas=elements.wrapper.getElementsByTagName("md-tabs-canvas")[0],elements.paging=elements.canvas.getElementsByTagName("md-pagination-wrapper")[0],elements.tabs=elements.paging.getElementsByTagName("md-tab-item"),elements.dummies=elements.canvas.getElementsByTagName("md-dummy-tab"),elements.inkBar=elements.paging.getElementsByTagName("md-ink-bar")[0],elements.contentsWrapper=$element[0].getElementsByTagName("md-tabs-content-wrapper")[0],elements.contents=elements.contentsWrapper.getElementsByTagName("md-tab-content"),elements}function canPageBack(){return ctrl.offsetLeft>0}function canPageForward(){var lastTab=elements.tabs[elements.tabs.length-1];return lastTab&&lastTab.offsetLeft+lastTab.offsetWidth>elements.canvas.clientWidth+ctrl.offsetLeft}function shouldStretchTabs(){switch($scope.stretchTabs){case"always":return!0;case"never":return!1;default:return!shouldPaginate()&&$window.matchMedia("(max-width: 600px)").matches}}function shouldCenterTabs(){return $scope.centerTabs&&!shouldPaginate()}function shouldPaginate(){if($scope.noPagination)return!1;var canvasWidth=$element.prop("clientWidth");return angular.forEach(elements.tabs,function(tab){canvasWidth-=tab.offsetWidth}),0>canvasWidth}function getNearestSafeIndex(newIndex){var i,tab,maxOffset=Math.max(ctrl.tabs.length-newIndex,newIndex);for(i=0;maxOffset>=i;i++){if(tab=ctrl.tabs[newIndex+i],tab&&tab.scope.disabled!==!0)return tab.getIndex();if(tab=ctrl.tabs[newIndex-i],tab&&tab.scope.disabled!==!0)return tab.getIndex()}return newIndex}function updateTabOrder(){var selectedItem=ctrl.tabs[$scope.selectedIndex],focusItem=ctrl.tabs[ctrl.focusIndex];ctrl.tabs=ctrl.tabs.sort(function(a,b){return a.index-b.index}),$scope.selectedIndex=ctrl.tabs.indexOf(selectedItem),ctrl.focusIndex=ctrl.tabs.indexOf(focusItem)}function incrementSelectedIndex(inc,focus){var newIndex,index=focus?ctrl.focusIndex:$scope.selectedIndex;for(newIndex=index+inc;ctrl.tabs[newIndex]&&ctrl.tabs[newIndex].scope.disabled;newIndex+=inc);ctrl.tabs[newIndex]&&(focus?ctrl.focusIndex=newIndex:$scope.selectedIndex=newIndex)}function redirectFocus(){elements.dummies[ctrl.focusIndex].focus()}function adjustOffset(){if(!shouldCenterTabs()){var tab=elements.tabs[ctrl.focusIndex],left=tab.offsetLeft,right=tab.offsetWidth+left;ctrl.offsetLeft=Math.max(ctrl.offsetLeft,fixOffset(right-elements.canvas.clientWidth)),ctrl.offsetLeft=Math.min(ctrl.offsetLeft,fixOffset(left))}}function processQueue(){queue.forEach(function(func){$timeout(func)}),queue=[]}function updateHasContent(){var hasContent=!1;angular.forEach(ctrl.tabs,function(tab){tab.template&&(hasContent=!0)}),ctrl.hasContent=hasContent}function refreshIndex(){$scope.selectedIndex=getNearestSafeIndex($scope.selectedIndex),ctrl.focusIndex=getNearestSafeIndex(ctrl.focusIndex)}function updateHeightFromContent(){if(!$scope.dynamicHeight)return $element.css("height","");if(!ctrl.tabs.length)return queue.push(updateHeightFromContent);var tabContent=elements.contents[$scope.selectedIndex],contentHeight=tabContent?tabContent.offsetHeight:0,tabsHeight=elements.wrapper.offsetHeight,newHeight=contentHeight+tabsHeight,currentHeight=$element.prop("clientHeight");currentHeight!==newHeight&&(locked=!0,$animate.animate($element,{height:currentHeight+"px"},{height:newHeight+"px"}).then(function(){$element.css("height",""),locked=!1}))}function updateInkBarStyles(){if(elements.tabs[$scope.selectedIndex]){if(!ctrl.tabs.length)return queue.push(ctrl.updateInkBarStyles);if(!$element.prop("offsetParent"))return handleResizeWhenVisible();var index=$scope.selectedIndex,totalWidth=elements.paging.offsetWidth,tab=elements.tabs[index],left=tab.offsetLeft,right=totalWidth-left-tab.offsetWidth;updateInkBarClassName(),angular.element(elements.inkBar).css({left:left+"px",right:right+"px"})}}function updateInkBarClassName(){var newIndex=$scope.selectedIndex,oldIndex=ctrl.lastSelectedIndex,ink=angular.element(elements.inkBar);ink.removeClass("md-left md-right"),angular.isNumber(oldIndex)&&(oldIndex>newIndex?ink.addClass("md-left"):newIndex>oldIndex&&ink.addClass("md-right"))}function fixOffset(value){if(!elements.tabs.length||!shouldPaginate())return 0;var lastTab=elements.tabs[elements.tabs.length-1],totalWidth=lastTab.offsetLeft+lastTab.offsetWidth;return value=Math.max(0,value),value=Math.min(totalWidth-elements.canvas.clientWidth,value)}function attachRipple(scope,element){var options={colorElement:angular.element(elements.inkBar)};$mdTabInkRipple.attach(scope,element,options)}var ctrl=this,locked=!1,elements=getElements(),queue=[],destroyed=!1;ctrl.scope=$scope,ctrl.parent=$scope.$parent,ctrl.tabs=[],ctrl.lastSelectedIndex=null,ctrl.focusIndex=$scope.selectedIndex||0,ctrl.offsetLeft=0,ctrl.hasContent=!1,ctrl.hasFocus=!1,ctrl.lastClick=!0,ctrl.redirectFocus=redirectFocus,ctrl.attachRipple=attachRipple,ctrl.shouldStretchTabs=shouldStretchTabs,ctrl.shouldPaginate=shouldPaginate,ctrl.shouldCenterTabs=shouldCenterTabs,ctrl.insertTab=insertTab,ctrl.removeTab=removeTab,ctrl.select=select,ctrl.scroll=scroll,ctrl.nextPage=nextPage,ctrl.previousPage=previousPage,ctrl.keydown=keydown,ctrl.canPageForward=canPageForward,ctrl.canPageBack=canPageBack,ctrl.refreshIndex=refreshIndex,ctrl.incrementSelectedIndex=incrementSelectedIndex,ctrl.updateInkBarStyles=$mdUtil.debounce(updateInkBarStyles,100),ctrl.updateTabOrder=$mdUtil.debounce(updateTabOrder,100),init()}angular.module("material.components.tabs").controller("MdTabsController",MdTabsController),MdTabsController.$inject=["$scope","$element","$window","$timeout","$mdConstant","$mdTabInkRipple","$mdUtil","$animate"]}(),function(){function MdTabs($mdTheming,$mdUtil,$compile){return{scope:{noPagination:"=?mdNoPagination",dynamicHeight:"=?mdDynamicHeight",centerTabs:"=?mdCenterTabs",selectedIndex:"=?mdSelected",stretchTabs:"@?mdStretchTabs",swipeContent:"=?mdSwipeContent",noDisconnect:"=?mdNoDisconnect"},template:function(element,attr){return attr.$mdTabsTemplate=element.html(),'        <md-tabs-wrapper ng-class="{ \'md-stretch-tabs\': $mdTabsCtrl.shouldStretchTabs() }">          <md-tab-data></md-tab-data>          <md-prev-button              tabindex="-1"              role="button"              aria-label="Previous Page"              aria-disabled="{{!$mdTabsCtrl.canPageBack()}}"              ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageBack() }"              ng-if="$mdTabsCtrl.shouldPaginate()"              ng-click="$mdTabsCtrl.previousPage()">            <md-icon md-svg-icon="md-tabs-arrow"></md-icon>          </md-prev-button>          <md-next-button              tabindex="-1"              role="button"              aria-label="Next Page"              aria-disabled="{{!$mdTabsCtrl.canPageForward()}}"              ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageForward() }"              ng-if="$mdTabsCtrl.shouldPaginate()"              ng-click="$mdTabsCtrl.nextPage()">            <md-icon md-svg-icon="md-tabs-arrow"></md-icon>          </md-next-button>          <md-tabs-canvas              tabindex="0"              aria-activedescendant="tab-item-{{$mdTabsCtrl.tabs[$mdTabsCtrl.focusIndex].id}}"              ng-focus="$mdTabsCtrl.redirectFocus()"              ng-class="{                  \'md-paginated\': $mdTabsCtrl.shouldPaginate(),                  \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs()              }"              ng-keydown="$mdTabsCtrl.keydown($event)"              role="tablist">            <md-pagination-wrapper                ng-class="{ \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs() }"                md-tab-scroll="$mdTabsCtrl.scroll($event)">              <md-tab-item                  tabindex="-1"                  class="md-tab"                  style="max-width: {{ tabWidth ? tabWidth + \'px\' : \'none\' }}"                  ng-repeat="tab in $mdTabsCtrl.tabs"                  role="tab"                  aria-controls="tab-content-{{tab.id}}"                  aria-selected="{{tab.isActive()}}"                  aria-disabled="{{tab.scope.disabled || \'false\'}}"                  ng-click="$mdTabsCtrl.select(tab.getIndex())"                  ng-class="{                      \'md-active\':    tab.isActive(),                      \'md-focused\':   tab.hasFocus(),                      \'md-disabled\':  tab.scope.disabled                  }"                  ng-disabled="tab.scope.disabled"                  md-swipe-left="$mdTabsCtrl.nextPage()"                  md-swipe-right="$mdTabsCtrl.previousPage()"                  md-template="tab.label"                  md-scope="tab.parent"></md-tab-item>              <md-ink-bar ng-hide="noInkBar"></md-ink-bar>            </md-pagination-wrapper>            <div class="md-visually-hidden md-dummy-wrapper">              <md-dummy-tab                  tabindex="-1"                  id="tab-item-{{tab.id}}"                  role="tab"                  aria-controls="tab-content-{{tab.id}}"                  aria-selected="{{tab.isActive()}}"                  aria-disabled="{{tab.scope.disabled || \'false\'}}"                  ng-focus="$mdTabsCtrl.hasFocus = true"                  ng-blur="$mdTabsCtrl.hasFocus = false"                  ng-repeat="tab in $mdTabsCtrl.tabs"                  md-template="tab.label"                  md-scope="tab.parent"></md-dummy-tab>            </div>          </md-tabs-canvas>        </md-tabs-wrapper>        <md-tabs-content-wrapper ng-show="$mdTabsCtrl.hasContent">          <md-tab-content              id="tab-content-{{tab.id}}"              role="tabpanel"              aria-labelledby="tab-item-{{tab.id}}"              md-swipe-left="swipeContent && $mdTabsCtrl.incrementSelectedIndex(1)"              md-swipe-right="swipeContent && $mdTabsCtrl.incrementSelectedIndex(-1)"              ng-if="$mdTabsCtrl.hasContent"              ng-repeat="(index, tab) in $mdTabsCtrl.tabs"              md-connected-if="tab.isActive()"              ng-class="{                \'md-no-transition\': $mdTabsCtrl.lastSelectedIndex == null,                \'md-active\':        tab.isActive(),                \'md-left\':          tab.isLeft(),                \'md-right\':         tab.isRight(),                \'md-no-scroll\':     dynamicHeight              }">            <div                md-template="tab.template"                md-scope="tab.parent"                ng-if="tab.shouldRender()"></div>          </md-tab-content>        </md-tabs-content-wrapper>      '},controller:"MdTabsController",controllerAs:"$mdTabsCtrl",link:function(scope,element,attr){function compileTabData(template){var dataElement=element.find("md-tab-data");dataElement.html(template),$compile(dataElement.contents())(scope.$parent)}compileTabData(attr.$mdTabsTemplate),delete attr.$mdTabsTemplate,$mdUtil.initOptionalProperties(scope,attr),attr.$observe("mdNoBar",function(value){scope.noInkBar=angular.isDefined(value)}),scope.selectedIndex=angular.isNumber(scope.selectedIndex)?scope.selectedIndex:0,$mdTheming(element)}}}angular.module("material.components.tabs").directive("mdTabs",MdTabs),MdTabs.$inject=["$mdTheming","$mdUtil","$compile"]}(),function(){function MdTemplate($compile,$mdUtil,$timeout){function link(scope,element,attr,ctrl){function handleScope(){scope.$watch("connected",function(value){value===!1?disconnect():reconnect()}),scope.$on("$destroy",reconnect)}function disconnect(){ctrl.scope.noDisconnect||$mdUtil.disconnectScope(compileScope)}function reconnect(){ctrl.scope.noDisconnect||$mdUtil.reconnectScope(compileScope)}if(ctrl){var compileScope=scope.compileScope.$new();return element.html(scope.template),$compile(element.contents())(compileScope),$timeout(handleScope)}}return{restrict:"A",link:link,scope:{template:"=mdTemplate",compileScope:"=mdScope",connected:"=?mdConnectedIf"},require:"^?mdTabs"}}angular.module("material.components.tabs").directive("mdTemplate",MdTemplate),MdTemplate.$inject=["$compile","$mdUtil","$timeout"]}(),function(){angular.module("material.core").constant("$MD_THEME_CSS","/* mixin definition ; sets LTR and RTL within the same style call */md-autocomplete.md-THEME_NAME-theme {  background: '{{background-50}}'; }  md-autocomplete.md-THEME_NAME-theme[disabled] {    background: '{{background-100}}'; }  md-autocomplete.md-THEME_NAME-theme button md-icon path {    fill: '{{background-600}}'; }  md-autocomplete.md-THEME_NAME-theme button:after {    background: '{{background-600-0.3}}'; }.md-autocomplete-suggestions.md-THEME_NAME-theme {  background: '{{background-50}}'; }  .md-autocomplete-suggestions.md-THEME_NAME-theme li {    color: '{{background-900}}'; }    .md-autocomplete-suggestions.md-THEME_NAME-theme li .highlight {      color: '{{background-600}}'; }    .md-autocomplete-suggestions.md-THEME_NAME-theme li:hover, .md-autocomplete-suggestions.md-THEME_NAME-theme li.selected {      background: '{{background-200}}'; }md-backdrop.md-opaque.md-THEME_NAME-theme {  background-color: '{{foreground-4-0.5}}'; }md-bottom-sheet.md-THEME_NAME-theme {  background-color: '{{background-50}}';  border-top-color: '{{background-300}}'; }  md-bottom-sheet.md-THEME_NAME-theme.md-list md-list-item {    color: '{{foreground-1}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    background-color: '{{background-50}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    color: '{{foreground-1}}'; }a.md-button.md-THEME_NAME-theme, .md-button.md-THEME_NAME-theme {  border-radius: 3px; }  a.md-button.md-THEME_NAME-theme:not([disabled]):hover, .md-button.md-THEME_NAME-theme:not([disabled]):hover {    background-color: '{{background-500-0.2}}'; }  a.md-button.md-THEME_NAME-theme:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme:not([disabled]).md-focused {    background-color: '{{background-500-0.2}}'; }  a.md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover, .md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover {    background-color: transparent; }  a.md-button.md-THEME_NAME-theme.md-fab, .md-button.md-THEME_NAME-theme.md-fab {    border-radius: 50%;    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-fab md-icon, .md-button.md-THEME_NAME-theme.md-fab md-icon {      color: '{{accent-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {      background-color: '{{accent-color}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {      background-color: '{{accent-A700}}'; }  a.md-button.md-THEME_NAME-theme.md-icon-button, .md-button.md-THEME_NAME-theme.md-icon-button {    border-radius: 50%; }  a.md-button.md-THEME_NAME-theme.md-primary, .md-button.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }    a.md-button.md-THEME_NAME-theme.md-primary.md-raised, a.md-button.md-THEME_NAME-theme.md-primary.md-fab, .md-button.md-THEME_NAME-theme.md-primary.md-raised, .md-button.md-THEME_NAME-theme.md-primary.md-fab {      color: '{{primary-contrast}}';      background-color: '{{primary-color}}'; }      a.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon, a.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon {        color: '{{primary-contrast}}'; }      a.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover, a.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover {        background-color: '{{primary-color}}'; }      a.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused, a.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused {        background-color: '{{primary-600}}'; }    a.md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon {      color: '{{primary-color}}'; }  a.md-button.md-THEME_NAME-theme.md-fab, .md-button.md-THEME_NAME-theme.md-fab {    border-radius: 50%;    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon {      color: '{{accent-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {      background-color: '{{accent-color}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {      background-color: '{{accent-A700}}'; }  a.md-button.md-THEME_NAME-theme.md-raised, .md-button.md-THEME_NAME-theme.md-raised {    color: '{{background-contrast}}';    background-color: '{{background-50}}'; }    a.md-button.md-THEME_NAME-theme.md-raised:not([disabled]) .md-icon, .md-button.md-THEME_NAME-theme.md-raised:not([disabled]) .md-icon {      color: '{{background-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover {      background-color: '{{background-50}}'; }    a.md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused {      background-color: '{{background-200}}'; }  a.md-button.md-THEME_NAME-theme.md-warn, .md-button.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }    a.md-button.md-THEME_NAME-theme.md-warn.md-raised, a.md-button.md-THEME_NAME-theme.md-warn.md-fab, .md-button.md-THEME_NAME-theme.md-warn.md-raised, .md-button.md-THEME_NAME-theme.md-warn.md-fab {      color: '{{warn-contrast}}';      background-color: '{{warn-color}}'; }      a.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon, a.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon {        color: '{{warn-contrast}}'; }      a.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover, a.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover {        background-color: '{{warn-color}}'; }      a.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused, a.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused {        background-color: '{{warn-700}}'; }    a.md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon {      color: '{{warn-color}}'; }  a.md-button.md-THEME_NAME-theme.md-accent, .md-button.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }    a.md-button.md-THEME_NAME-theme.md-accent.md-raised, a.md-button.md-THEME_NAME-theme.md-accent.md-fab, .md-button.md-THEME_NAME-theme.md-accent.md-raised, .md-button.md-THEME_NAME-theme.md-accent.md-fab {      color: '{{accent-contrast}}';      background-color: '{{accent-color}}'; }      a.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon, a.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon {        color: '{{accent-contrast}}'; }      a.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover, a.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover {        background-color: '{{accent-color}}'; }      a.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused, a.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused {        background-color: '{{accent-700}}'; }    a.md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon {      color: '{{accent-color}}'; }  a.md-button.md-THEME_NAME-theme[disabled], a.md-button.md-THEME_NAME-theme.md-raised[disabled], a.md-button.md-THEME_NAME-theme.md-fab[disabled], a.md-button.md-THEME_NAME-theme.md-accent[disabled], a.md-button.md-THEME_NAME-theme.md-warn[disabled], .md-button.md-THEME_NAME-theme[disabled], .md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled], .md-button.md-THEME_NAME-theme.md-accent[disabled], .md-button.md-THEME_NAME-theme.md-warn[disabled] {    color: '{{foreground-3}}';    cursor: not-allowed; }    a.md-button.md-THEME_NAME-theme[disabled] md-icon, a.md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon, a.md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon, a.md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon, a.md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon, .md-button.md-THEME_NAME-theme[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon {      color: '{{foreground-3}}'; }  a.md-button.md-THEME_NAME-theme.md-raised[disabled], a.md-button.md-THEME_NAME-theme.md-fab[disabled], .md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled] {    background-color: '{{foreground-4}}'; }  a.md-button.md-THEME_NAME-theme[disabled], .md-button.md-THEME_NAME-theme[disabled] {    background-color: transparent; }md-card.md-THEME_NAME-theme {  background-color: '{{background-color}}';  border-radius: 2px; }  md-card.md-THEME_NAME-theme .md-card-image {    border-radius: 2px 2px 0 0; }md-checkbox.md-THEME_NAME-theme .md-ripple {  color: '{{accent-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked.md-focused .md-container:before {  background-color: '{{accent-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-icon {  background-color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ripple {  color: '{{primary-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon {  background-color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked.md-focused .md-container:before {  background-color: '{{primary-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ripple {  color: '{{warn-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon {  background-color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked.md-focused:not([disabled]) .md-container:before {  background-color: '{{warn-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] .md-icon {  border-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked .md-icon {  background-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled] .md-label {  color: '{{foreground-3}}'; }md-chips.md-THEME_NAME-theme .md-chips {  box-shadow: 0 1px '{{background-300}}'; }  md-chips.md-THEME_NAME-theme .md-chips.md-focused {    box-shadow: 0 2px '{{primary-color}}'; }md-chips.md-THEME_NAME-theme .md-chip {  background: '{{background-300}}';  color: '{{background-800}}'; }  md-chips.md-THEME_NAME-theme .md-chip.md-focused {    background: '{{primary-color}}';    color: '{{primary-contrast}}'; }    md-chips.md-THEME_NAME-theme .md-chip.md-focused md-icon {      color: '{{primary-contrast}}'; }md-chips.md-THEME_NAME-theme md-chip-remove .md-button md-icon path {  fill: '{{background-500}}'; }.md-contact-suggestion span.md-contact-email {  color: '{{background-400}}'; }md-content.md-THEME_NAME-theme {  background-color: '{{background-color}}'; }md-dialog.md-THEME_NAME-theme {  border-radius: 4px;  background-color: '{{background-color}}'; }  md-dialog.md-THEME_NAME-theme.md-content-overflow .md-actions {    border-top-color: '{{foreground-4}}'; }md-divider.md-THEME_NAME-theme {  border-top-color: '{{foreground-4}}'; }md-icon.md-THEME_NAME-theme {  color: '{{foreground-2}}'; }  md-icon.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  md-icon.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  md-icon.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-input-container.md-THEME_NAME-theme .md-input {  color: '{{foreground-1}}';  border-color: '{{foreground-4}}';  text-shadow: '{{foreground-shadow}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder, md-input-container.md-THEME_NAME-theme .md-input::-moz-placeholder, md-input-container.md-THEME_NAME-theme .md-input:-moz-placeholder, md-input-container.md-THEME_NAME-theme .md-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme > md-icon {  color: '{{foreground-1}}'; }md-input-container.md-THEME_NAME-theme label, md-input-container.md-THEME_NAME-theme .md-placeholder {  text-shadow: '{{foreground-shadow}}';  color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme ng-messages, md-input-container.md-THEME_NAME-theme [ng-message], md-input-container.md-THEME_NAME-theme [data-ng-message], md-input-container.md-THEME_NAME-theme [x-ng-message] {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-has-value label {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused .md-input {  border-color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused label {  color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused md-icon {  color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent .md-input {  border-color: '{{accent-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent label {  color: '{{accent-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn .md-input {  border-color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn label {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input {  border-color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid.md-input-focused label {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid data-ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid x-ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid [ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid [data-ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid [x-ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid .md-char-counter {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme .md-input[disabled], [disabled] md-input-container.md-THEME_NAME-theme .md-input {  border-bottom-color: transparent;  color: '{{foreground-3}}';  background-image: linear-gradient(to right, '{{foreground-3}}' 0%, '{{foreground-3}}' 33%, transparent 0%);  background-image: -ms-linear-gradient(left, transparent 0%, '{{foreground-3}}' 100%); }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h3, md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h4, md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h3, md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h4 {  color: '{{foreground-1}}'; }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text p, md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text p {  color: '{{foreground-2}}'; }md-list.md-THEME_NAME-theme .md-proxy-focus.md-focused div.md-no-style {  background-color: '{{background-100}}'; }md-list.md-THEME_NAME-theme md-list-item > md-icon {  color: '{{foreground-2}}'; }  md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight {    color: '{{primary-color}}'; }    md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight.md-accent {      color: '{{accent-color}}'; }md-list.md-THEME_NAME-theme md-list-item button {  background-color: '{{background-color}}'; }  md-list.md-THEME_NAME-theme md-list-item button.md-button:not([disabled]):hover {    background-color: '{{background-color}}'; }md-progress-circular.md-THEME_NAME-theme {  background-color: transparent; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-gap {    border-top-color: '{{primary-color}}';    border-bottom-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme .md-inner .md-right .md-half-circle {    border-top-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-right .md-half-circle {    border-right-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-left .md-half-circle {    border-left-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-gap {    border-top-color: '{{warn-color}}';    border-bottom-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-right .md-half-circle {    border-top-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-right .md-half-circle {    border-right-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-left .md-half-circle {    border-left-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-gap {    border-top-color: '{{accent-color}}';    border-bottom-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-right .md-half-circle {    border-top-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-right .md-half-circle {    border-right-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-left .md-half-circle {    border-left-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme .md-container {  background-color: '{{primary-100}}'; }md-progress-linear.md-THEME_NAME-theme .md-bar {  background-color: '{{primary-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn .md-container {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn .md-bar {  background-color: '{{warn-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent .md-container {  background-color: '{{accent-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent .md-bar {  background-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-bar1 {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-dashed:before {  background: radial-gradient('{{warn-100}}' 0%, '{{warn-100}}' 16%, transparent 42%); }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-bar1 {  background-color: '{{accent-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-dashed:before {  background: radial-gradient('{{accent-100}}' 0%, '{{accent-100}}' 16%, transparent 42%); }md-radio-button.md-THEME_NAME-theme .md-off {  border-color: '{{foreground-2}}'; }md-radio-button.md-THEME_NAME-theme .md-on {  background-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-off {  border-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme .md-container .md-ripple {  color: '{{accent-600}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-on, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-on, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-on {  background-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off {  border-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-container .md-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple {  color: '{{primary-600}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-on, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-on, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-on {  background-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off {  border-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-container .md-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple {  color: '{{warn-600}}'; }md-radio-group.md-THEME_NAME-theme[disabled], md-radio-button.md-THEME_NAME-theme[disabled] {  color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] .md-container .md-off, md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-off {    border-color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] .md-container .md-on, md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-on {    border-color: '{{foreground-3}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked .md-container:before {  background-color: '{{accent-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked:not([disabled]).md-primary .md-container:before {  background-color: '{{primary-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-primary .md-container:before {  background-color: '{{warn-color-0.26}}'; }md-select.md-THEME_NAME-theme.ng-invalid.ng-dirty .md-select-label {  color: '{{warn-500}}' !important;  border-bottom-color: '{{warn-500}}' !important; }md-select.md-THEME_NAME-theme:not([disabled]):focus .md-select-label {  border-bottom-color: '{{primary-color}}';  color: '{{ foreground-1 }}'; }  md-select.md-THEME_NAME-theme:not([disabled]):focus .md-select-label.md-placeholder {    color: '{{ foreground-1 }}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-accent .md-select-label {  border-bottom-color: '{{accent-color}}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-warn .md-select-label {  border-bottom-color: '{{warn-color}}'; }md-select.md-THEME_NAME-theme[disabled] .md-select-label {  color: '{{foreground-3}}'; }  md-select.md-THEME_NAME-theme[disabled] .md-select-label.md-placeholder {    color: '{{foreground-3}}'; }md-select.md-THEME_NAME-theme .md-select-label {  border-bottom-color: '{{foreground-4}}'; }  md-select.md-THEME_NAME-theme .md-select-label.md-placeholder {    color: '{{foreground-2}}'; }md-select-menu.md-THEME_NAME-theme md-optgroup {  color: '{{foreground-2}}'; }  md-select-menu.md-THEME_NAME-theme md-optgroup md-option {    color: '{{foreground-1}}'; }md-select-menu.md-THEME_NAME-theme md-option[selected] {  color: '{{primary-500}}'; }  md-select-menu.md-THEME_NAME-theme md-option[selected]:focus {    color: '{{primary-600}}'; }  md-select-menu.md-THEME_NAME-theme md-option[selected].md-accent {    color: '{{accent-500}}'; }    md-select-menu.md-THEME_NAME-theme md-option[selected].md-accent:focus {      color: '{{accent-600}}'; }md-select-menu.md-THEME_NAME-theme md-option:focus:not([selected]) {  background: '{{background-200}}'; }md-sidenav.md-THEME_NAME-theme {  background-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme .md-track {  background-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme .md-track-ticks {  background-color: '{{foreground-4}}'; }md-slider.md-THEME_NAME-theme .md-focus-thumb {  background-color: '{{foreground-2}}'; }md-slider.md-THEME_NAME-theme .md-focus-ring {  border-color: '{{foreground-4}}'; }md-slider.md-THEME_NAME-theme .md-disabled-thumb {  border-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme.md-min .md-thumb:after {  background-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme .md-track.md-track-fill {  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme .md-thumb:after {  border-color: '{{accent-color}}';  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme .md-sign {  background-color: '{{accent-color}}'; }  md-slider.md-THEME_NAME-theme .md-sign:after {    border-top-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme .md-thumb-text {  color: '{{accent-contrast}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-track.md-track-fill {  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-thumb:after {  border-color: '{{warn-color}}';  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-sign {  background-color: '{{warn-color}}'; }  md-slider.md-THEME_NAME-theme.md-warn .md-sign:after {    border-top-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-thumb-text {  color: '{{warn-contrast}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-track.md-track-fill {  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-thumb:after {  border-color: '{{primary-color}}';  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-sign {  background-color: '{{primary-color}}'; }  md-slider.md-THEME_NAME-theme.md-primary .md-sign:after {    border-top-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-thumb-text {  color: '{{primary-contrast}}'; }md-slider.md-THEME_NAME-theme[disabled] .md-thumb:after {  border-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme[disabled]:not(.md-min) .md-thumb:after {  background-color: '{{foreground-3}}'; }.md-subheader.md-THEME_NAME-theme {  color: '{{ foreground-2-0.23 }}';  background-color: '{{background-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme .md-thumb {  background-color: '{{background-50}}'; }md-switch.md-THEME_NAME-theme .md-bar {  background-color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-thumb {  background-color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-bar {  background-color: '{{accent-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-focused .md-thumb:before {  background-color: '{{accent-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-thumb {  background-color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-bar {  background-color: '{{primary-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary.md-focused .md-thumb:before {  background-color: '{{primary-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-thumb {  background-color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-bar {  background-color: '{{warn-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn.md-focused .md-thumb:before {  background-color: '{{warn-color-0.26}}'; }md-switch.md-THEME_NAME-theme[disabled] .md-thumb {  background-color: '{{background-400}}'; }md-switch.md-THEME_NAME-theme[disabled] .md-bar {  background-color: '{{foreground-4}}'; }md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: transparent;  border-color: '{{foreground-4}}'; }md-tabs.md-THEME_NAME-theme .md-paginator md-icon {  color: '{{primary-color}}'; }md-tabs.md-THEME_NAME-theme md-ink-bar {  color: '{{accent-color}}';  background: '{{accent-color}}'; }md-tabs.md-THEME_NAME-theme .md-tab {  color: '{{foreground-2}}'; }  md-tabs.md-THEME_NAME-theme .md-tab[disabled] {    color: '{{foreground-3}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-active, md-tabs.md-THEME_NAME-theme .md-tab.md-focused {    color: '{{primary-color}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-focused {    background: '{{primary-color-0.1}}'; }  md-tabs.md-THEME_NAME-theme .md-tab .md-ripple-container {    color: '{{accent-100}}'; }md-tabs.md-THEME_NAME-theme.md-accent md-tabs-wrapper {  background-color: '{{accent-color}}'; }md-tabs.md-THEME_NAME-theme.md-accent md-tab-item:not([disabled]) {  color: '{{accent-100}}'; }  md-tabs.md-THEME_NAME-theme.md-accent md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-accent md-tab-item:not([disabled]).md-focused {    color: '{{accent-contrast}}'; }  md-tabs.md-THEME_NAME-theme.md-accent md-tab-item:not([disabled]).md-focused {    background: '{{accent-contrast-0.1}}'; }md-tabs.md-THEME_NAME-theme.md-accent md-ink-bar {  color: '{{primary-600-1}}';  background: '{{primary-600-1}}'; }md-tabs.md-THEME_NAME-theme.md-primary md-tabs-wrapper {  background-color: '{{primary-color}}'; }md-tabs.md-THEME_NAME-theme.md-primary md-tab-item:not([disabled]) {  color: '{{primary-100}}'; }  md-tabs.md-THEME_NAME-theme.md-primary md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-primary md-tab-item:not([disabled]).md-focused {    color: '{{primary-contrast}}'; }  md-tabs.md-THEME_NAME-theme.md-primary md-tab-item:not([disabled]).md-focused {    background: '{{primary-contrast-0.1}}'; }md-tabs.md-THEME_NAME-theme.md-warn md-tabs-wrapper {  background-color: '{{warn-color}}'; }md-tabs.md-THEME_NAME-theme.md-warn md-tab-item:not([disabled]) {  color: '{{warn-100}}'; }  md-tabs.md-THEME_NAME-theme.md-warn md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-warn md-tab-item:not([disabled]).md-focused {    color: '{{warn-contrast}}'; }  md-tabs.md-THEME_NAME-theme.md-warn md-tab-item:not([disabled]).md-focused {    background: '{{warn-contrast-0.1}}'; }md-toolbar > md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: '{{primary-color}}'; }md-toolbar > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]) {  color: '{{primary-100}}'; }  md-toolbar > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-active, md-toolbar > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    color: '{{primary-contrast}}'; }  md-toolbar > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    background: '{{primary-contrast-0.1}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: '{{accent-color}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]) {  color: '{{accent-100}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-active, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    color: '{{accent-contrast}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    background: '{{accent-contrast-0.1}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-ink-bar {  color: '{{primary-600-1}}';  background: '{{primary-600-1}}'; }md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: '{{warn-color}}'; }md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]) {  color: '{{warn-100}}'; }  md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-active, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    color: '{{warn-contrast}}'; }  md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    background: '{{warn-contrast-0.1}}'; }md-toast.md-THEME_NAME-theme {  background-color: #323232;  color: '{{background-50}}'; }  md-toast.md-THEME_NAME-theme .md-button {    color: '{{background-50}}'; }    md-toast.md-THEME_NAME-theme .md-button.md-highlight {      color: '{{primary-A200}}'; }      md-toast.md-THEME_NAME-theme .md-button.md-highlight.md-accent {        color: '{{accent-A200}}'; }      md-toast.md-THEME_NAME-theme .md-button.md-highlight.md-warn {        color: '{{warn-A200}}'; }md-toolbar.md-THEME_NAME-theme {  background-color: '{{primary-color}}';  color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme md-icon {    color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme .md-button {    color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme.md-accent {    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }  md-toolbar.md-THEME_NAME-theme.md-warn {    background-color: '{{warn-color}}';    color: '{{warn-contrast}}'; }md-tooltip.md-THEME_NAME-theme {  color: '{{background-A100}}'; }  md-tooltip.md-THEME_NAME-theme .md-background {    background-color: '{{foreground-2}}'; }");
}()}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function($animate){return{link:function(scope,element,attrs){function expand(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),$animate.addClass(element,"in",{to:{height:element[0].scrollHeight+"px"}}).then(expandDone)}function expandDone(){element.removeClass("collapsing"),element.css({height:"auto"})}function collapse(){return element.hasClass("collapse")||element.hasClass("in")?(element.css({height:element[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void $animate.removeClass(element,"in",{to:{height:"0"}}).then(collapseDone)):collapseDone()}function collapseDone(){element.css({height:"0"}),element.removeClass("collapsing"),element.addClass("collapse")}scope.$watch(attrs.collapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function($scope,$attrs,accordionConfig){this.groups=[],this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;closeOthers&&angular.forEach(this.groups,function(group){group!==openGroup&&(group.isOpen=!1)})},this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope),groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})},this.removeGroup=function(group){var index=this.groups.indexOf(group);-1!==index&&this.groups.splice(index,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){accordionCtrl.addGroup(scope),scope.$watch("isOpen",function(value){value&&accordionCtrl.closeOthers(scope)}),scope.toggleOpen=function(){scope.isDisabled||(scope.isOpen=!scope.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(scope,element,attr,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,angular.noop))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(scope,element,attr,controller){scope.$watch(function(){return controller[attr.accordionTransclude]},function(heading){heading&&(element.html(""),element.append(heading))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function($scope,$attrs){$scope.closeable=!!$attrs.close,this.close=$scope.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function($timeout){return{require:"alert",link:function(scope,element,attrs,alertCtrl){$timeout(function(){alertCtrl.close()},parseInt(attrs.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).value("$bindHtmlUnsafeSuppressDeprecated",!1).directive("bindHtmlUnsafe",["$log","$bindHtmlUnsafeSuppressDeprecated",function($log,$bindHtmlUnsafeSuppressDeprecated){return function(scope,element,attr){$bindHtmlUnsafeSuppressDeprecated||$log.warn("bindHtmlUnsafe is now deprecated. Use ngBindHtml instead"),element.addClass("ng-binding").data("$binding",attr.bindHtmlUnsafe),scope.$watch(attr.bindHtmlUnsafe,function(value){element.html(value||"")})}}]),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.btnRadio)))},element.bind(buttonsCtrl.toggleEvent,function(){var isActive=element.hasClass(buttonsCtrl.activeClass);(!isActive||angular.isDefined(attrs.uncheckable))&&scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.btnRadio)),ngModelCtrl.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attributeValue,defaultValue){var val=scope.$eval(attributeValue);return angular.isDefined(val)?val:defaultValue}var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.bind(buttonsCtrl.toggleEvent,function(){scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$element","$interval","$animate",function($scope,$element,$interval,$animate){function goNext(slide,index,direction){destroyed||(angular.extend(slide,{direction:direction,active:!0}),angular.extend(self.currentSlide||{},{direction:direction,active:!1}),$animate.enabled()&&!$scope.noTransition&&!$scope.$currentTransition&&slide.$element&&(slide.$element.data(SLIDE_DIRECTION,slide.direction),$scope.$currentTransition=!0,slide.$element.one("$animate:close",function(){$scope.$currentTransition=null})),self.currentSlide=slide,currentIndex=index,restartTimer())}function getSlideByIndex(index){if(angular.isUndefined(slides[index].index))return slides[index];var i;slides.length;for(i=0;i<slides.length;++i)if(slides[i].index==index)return slides[i]}function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>0&&(currentInterval=$interval(timerFn,interval))}function resetTimer(){currentInterval&&($interval.cancel(currentInterval),currentInterval=null)}function timerFn(){var interval=+$scope.interval;isPlaying&&!isNaN(interval)&&interval>0&&slides.length?$scope.next():$scope.pause()}var currentInterval,isPlaying,self=this,slides=self.slides=$scope.slides=[],NO_TRANSITION="uib-noTransition",SLIDE_DIRECTION="uib-slideDirection",currentIndex=-1;self.currentSlide=null;var destroyed=!1;self.select=$scope.select=function(nextSlide,direction){var nextIndex=self.indexOfSlide(nextSlide);void 0===direction&&(direction=nextIndex>self.getCurrentIndex()?"next":"prev"),nextSlide&&nextSlide!==self.currentSlide&&!$scope.$currentTransition&&goNext(nextSlide,nextIndex,direction)},$scope.$on("$destroy",function(){destroyed=!0}),self.getCurrentIndex=function(){return self.currentSlide&&angular.isDefined(self.currentSlide.index)?+self.currentSlide.index:currentIndex},self.indexOfSlide=function(slide){return angular.isDefined(slide.index)?+slide.index:slides.indexOf(slide)},$scope.next=function(){var newIndex=(self.getCurrentIndex()+1)%slides.length;return 0===newIndex&&$scope.noWrap()?void $scope.pause():self.select(getSlideByIndex(newIndex),"next")},$scope.prev=function(){var newIndex=self.getCurrentIndex()-1<0?slides.length-1:self.getCurrentIndex()-1;return $scope.noWrap()&&newIndex===slides.length-1?void $scope.pause():self.select(getSlideByIndex(newIndex),"prev")},$scope.isActive=function(slide){return self.currentSlide===slide},$scope.$watch("interval",restartTimer),$scope.$on("$destroy",resetTimer),$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},self.addSlide=function(slide,element){slide.$element=element,slides.push(slide),1===slides.length||slide.active?(self.select(slides[slides.length-1]),1==slides.length&&$scope.play()):slide.active=!1},self.removeSlide=function(slide){angular.isDefined(slide.index)&&slides.sort(function(a,b){return+a.index>+b.index});var index=slides.indexOf(slide);slides.splice(index,1),slides.length>0&&slide.active?index>=slides.length?self.select(slides[index-1]):self.select(slides[index]):currentIndex>index&&currentIndex--},$scope.$watch("noTransition",function(noTransition){$element.data(NO_TRANSITION,noTransition)})}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?",index:"=?"},link:function(scope,element,attrs,carouselCtrl){carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){active&&carouselCtrl.select(scope)})}}}).animation(".item",["$animate",function($animate){var NO_TRANSITION="uib-noTransition",SLIDE_DIRECTION="uib-slideDirection";return{beforeAddClass:function(element,className,done){if("active"==className&&element.parent()&&!element.parent().data(NO_TRANSITION)){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"==direction?"left":"right";return element.addClass(direction),$animate.addClass(element,directionClass).then(function(){stopped||element.removeClass(directionClass+" "+direction),done()}),function(){stopped=!0}}done()},beforeRemoveClass:function(element,className,done){if("active"==className&&element.parent()&&!element.parent().data(NO_TRANSITION)){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"==direction?"left":"right";return $animate.addClass(element,directionClass).then(function(){stopped||element.removeClass(directionClass),done()}),function(){stopped=!0}}done()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function($locale,orderByFilter){function createParser(format){var map=[],regex=format.split("");return angular.forEach(formatCodeToRegex,function(data,code){var index=format.indexOf(code);if(index>-1){format=format.split(""),regex[index]="("+data.regex+")",format[index]="$";for(var i=index+1,n=index+code.length;n>i;i++)regex[i]="",format[i]="$";format=format.join(""),map.push({index:index,apply:data.apply})}}),{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}function isValid(year,month,date){return 1>date?!1:1===month&&date>28?29===date&&(year%4===0&&year%100!==0||year%400===0):3===month||5===month||8===month||10===month?31>date:!0}var SPECIAL_CHARACTERS_REGEXP=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var formatCodeToRegex={yyyy:{regex:"\\d{4}",apply:function(value){this.year=+value}},yy:{regex:"\\d{2}",apply:function(value){this.year=+value+2e3}},y:{regex:"\\d{1,4}",apply:function(value){this.year=+value}},MMMM:{regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)}},MMM:{regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(value){this.month=value-1}},M:{regex:"[1-9]|1[0-2]",apply:function(value){this.month=value-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value}},EEEE:{regex:$locale.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(value){this.hours=+value}},H:{regex:"1?[0-9]|2[0-3]",apply:function(value){this.hours=+value}},mm:{regex:"[0-5][0-9]",apply:function(value){this.minutes=+value}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(value){this.minutes=+value}},sss:{regex:"[0-9][0-9][0-9]",apply:function(value){this.milliseconds=+value}},ss:{regex:"[0-5][0-9]",apply:function(value){this.seconds=+value}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(value){this.seconds=+value}}};this.parse=function(input,format,baseDate){if(!angular.isString(input)||!format)return input;format=$locale.DATETIME_FORMATS[format]||format,format=format.replace(SPECIAL_CHARACTERS_REGEXP,"\\$&"),this.parsers[format]||(this.parsers[format]=createParser(format));var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex);if(results&&results.length){var fields,dt;fields=baseDate?{year:baseDate.getFullYear(),month:baseDate.getMonth(),date:baseDate.getDate(),hours:baseDate.getHours(),minutes:baseDate.getMinutes(),seconds:baseDate.getSeconds(),milliseconds:baseDate.getMilliseconds()}:{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0};for(var i=1,n=results.length;n>i;i++){var mapper=map[i-1];mapper.apply&&mapper.apply.call(fields,results[i])}return isValid(fields.year,fields.month,fields.date)&&(dt=new Date(fields.year,fields.month,fields.date,fields.hours,fields.minutes,fields.seconds,fields.milliseconds||0)),dt}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){return el.currentStyle?el.currentStyle[cssprop]:$window.getComputedStyle?$window.getComputedStyle(el)[cssprop]:el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function(element){for(var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);offsetParentEl!=$document[0]&&(offsetParentBCR=this.offset(angular.element(offsetParentEl)),offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop,offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft);var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function(hostEl,targetEl,positionStr,appendToBody){var hostElPos,targetElWidth,targetElHeight,targetElPos,positionStrParts=positionStr.split("-"),pos0=positionStrParts[0],pos1=positionStrParts[1]||"center";hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl),targetElWidth=targetEl.prop("offsetWidth"),targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function(){return hostElPos.left},right:function(){return hostElPos.left+hostElPos.width}},shiftHeight={center:function(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function(){return hostElPos.top},bottom:function(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()}}return targetElPos}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig",function($scope,$attrs,$parse,$interpolate,$log,dateFilter,datepickerConfig){var self=this,ngModelCtrl={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange","shortcutPropagation"],function(key,index){self[key]=angular.isDefined($attrs[key])?8>index?$interpolate($attrs[key])($scope.$parent):$scope.$parent.$eval($attrs[key]):datepickerConfig[key]}),angular.forEach(["minDate","maxDate"],function(key){$attrs[key]?$scope.$parent.$watch($parse($attrs[key]),function(value){self[key]=value?new Date(value):null,self.refreshView()}):self[key]=datepickerConfig[key]?new Date(datepickerConfig[key]):null}),$scope.datepickerMode=$scope.datepickerMode||datepickerConfig.datepickerMode,$scope.maxMode=self.maxMode,$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined($attrs.initDate)?(this.activeDate=$scope.$parent.$eval($attrs.initDate)||new Date,$scope.$parent.$watch($attrs.initDate,function(initDate){initDate&&(ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue)||ngModelCtrl.$invalid)&&(self.activeDate=initDate,self.refreshView())})):this.activeDate=new Date,$scope.isActive=function(dateObject){return 0===self.compare(dateObject.date,self.activeDate)?($scope.activeDateId=dateObject.uid,!0):!1},this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=function(){self.render()}},this.render=function(){if(ngModelCtrl.$viewValue){var date=new Date(ngModelCtrl.$viewValue),isValid=!isNaN(date);isValid?this.activeDate=date:$log.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),ngModelCtrl.$setValidity("date",isValid)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var date=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;ngModelCtrl.$setValidity("date-disabled",!date||this.element&&!this.isDisabled(date))}},this.createDateObject=function(date,format){var model=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;return{date:date,label:dateFilter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),current:0===this.compare(date,new Date),customClass:this.customClass(date)}},this.isDisabled=function(date){return this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$attrs.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})},this.customClass=function(date){return $scope.customClass({date:date,mode:$scope.datepickerMode})},this.split=function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},this.fixTimeZone=function(date){var hours=date.getHours();date.setHours(23===hours?hours+2:0)},$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),ngModelCtrl.$setViewValue(dt),ngModelCtrl.$render()}else self.activeDate=date,$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)-1]},$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1),self.refreshView()},$scope.toggleMode=function(direction){direction=direction||1,$scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&-1===direction||($scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)+direction])},$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){self.element[0].focus()};$scope.$on("datepicker.focus",focusElement),$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(key&&!evt.shiftKey&&!evt.altKey)if(evt.preventDefault(),self.shortcutPropagation||evt.stopPropagation(),"enter"===key||"space"===key){if(self.isDisabled(self.activeDate))return;$scope.select(self.activeDate),focusElement()}else!evt.ctrlKey||"up"!==key&&"down"!==key?(self.handleKeyDown(key,evt),self.refreshView()):($scope.toggleMode("up"===key?1:-1),focusElement())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&datepickerCtrl.init(ngModelCtrl)}}}).directive("daypicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){function getDaysInMonth(year,month){return 1!==month||year%4!==0||year%100===0&&year%400!==0?DAYS_IN_MONTH[month]:29}function getDates(startDate,n){for(var date,dates=new Array(n),current=new Date(startDate),i=0;n>i;)date=new Date(current),ctrl.fixTimeZone(date),dates[i++]=date,current.setDate(current.getDate()+1);return dates}function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}scope.showWeeks=ctrl.showWeeks,ctrl.step={months:1},ctrl.element=element;var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];ctrl._refreshView=function(){var year=ctrl.activeDate.getFullYear(),month=ctrl.activeDate.getMonth(),firstDayOfMonth=new Date(year,month,1),difference=ctrl.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);numDisplayedFromPreviousMonth>0&&firstDate.setDate(-numDisplayedFromPreviousMonth+1);for(var days=getDates(firstDate,42),i=0;42>i;i++)days[i]=angular.extend(ctrl.createDateObject(days[i],ctrl.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i});scope.labels=new Array(7);for(var j=0;7>j;j++)scope.labels[j]={abbr:dateFilter(days[j].date,ctrl.formatDayHeader),full:dateFilter(days[j].date,"EEEE")};if(scope.title=dateFilter(ctrl.activeDate,ctrl.formatDayTitle),scope.rows=ctrl.split(days,7),scope.showWeeks){scope.weekNumbers=[];for(var thursdayIndex=(11-ctrl.startingDay)%7,numWeeks=scope.rows.length,curWeek=0;numWeeks>curWeek;curWeek++)scope.weekNumbers.push(getISO8601WeekNumber(scope.rows[curWeek][thursdayIndex].date))}},ctrl.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getDate();if("left"===key)date-=1;else if("up"===key)date-=7;else if("right"===key)date+=1;else if("down"===key)date+=7;else if("pageup"===key||"pagedown"===key){var month=ctrl.activeDate.getMonth()+("pageup"===key?-1:1);ctrl.activeDate.setMonth(month,1),date=Math.min(getDaysInMonth(ctrl.activeDate.getFullYear(),ctrl.activeDate.getMonth()),date)}else"home"===key?date=1:"end"===key&&(date=getDaysInMonth(ctrl.activeDate.getFullYear(),ctrl.activeDate.getMonth()));ctrl.activeDate.setDate(date)},ctrl.refreshView()}}}]).directive("monthpicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){ctrl.step={years:1},ctrl.element=element,ctrl._refreshView=function(){for(var date,months=new Array(12),year=ctrl.activeDate.getFullYear(),i=0;12>i;i++)date=new Date(year,i,1),ctrl.fixTimeZone(date),months[i]=angular.extend(ctrl.createDateObject(date,ctrl.formatMonth),{uid:scope.uniqueId+"-"+i});scope.title=dateFilter(ctrl.activeDate,ctrl.formatMonthTitle),scope.rows=ctrl.split(months,3)},ctrl.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth())-new Date(date2.getFullYear(),date2.getMonth())},ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getMonth();if("left"===key)date-=1;else if("up"===key)date-=3;else if("right"===key)date+=1;else if("down"===key)date+=3;else if("pageup"===key||"pagedown"===key){var year=ctrl.activeDate.getFullYear()+("pageup"===key?-1:1);ctrl.activeDate.setFullYear(year)}else"home"===key?date=0:"end"===key&&(date=11);ctrl.activeDate.setMonth(date)},ctrl.refreshView()}}}]).directive("yearpicker",["dateFilter",function(dateFilter){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(scope,element,attrs,ctrl){function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}var range=ctrl.yearRange;ctrl.step={years:range},ctrl.element=element,ctrl._refreshView=function(){for(var date,years=new Array(range),i=0,start=getStartingYear(ctrl.activeDate.getFullYear());range>i;i++)date=new Date(start+i,0,1),ctrl.fixTimeZone(date),years[i]=angular.extend(ctrl.createDateObject(date,ctrl.formatYear),{uid:scope.uniqueId+"-"+i});scope.title=[years[0].label,years[range-1].label].join(" - "),scope.rows=ctrl.split(years,5)},ctrl.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()},ctrl.handleKeyDown=function(key,evt){var date=ctrl.activeDate.getFullYear();"left"===key?date-=1:"up"===key?date-=5:"right"===key?date+=1:"down"===key?date+=5:"pageup"===key||"pagedown"===key?date+=("pageup"===key?-1:1)*ctrl.step.years:"home"===key?date=getStartingYear(ctrl.activeDate.getFullYear()):"end"===key&&(date=getStartingYear(ctrl.activeDate.getFullYear())+range-1),ctrl.activeDate.setFullYear(date)},ctrl.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig","$timeout",function($compile,$parse,$document,$position,dateFilter,dateParser,datepickerPopupConfig,$timeout){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(scope,element,attrs,ngModel){function cameltoDash(string){return string.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function parseDate(viewValue){if(angular.isNumber(viewValue)&&(viewValue=new Date(viewValue)),viewValue){if(angular.isDate(viewValue)&&!isNaN(viewValue))return viewValue;if(angular.isString(viewValue)){var date=dateParser.parse(viewValue,dateFormat,scope.date)||new Date(viewValue);return isNaN(date)?void 0:date}return void 0}return null}function validator(modelValue,viewValue){var value=modelValue||viewValue;if(angular.isNumber(value)&&(value=new Date(value)),value){if(angular.isDate(value)&&!isNaN(value))return!0;if(angular.isString(value)){var date=dateParser.parse(value,dateFormat)||new Date(value);return!isNaN(date)}return!1}return!0}var dateFormat,closeOnDateSelection=angular.isDefined(attrs.closeOnDateSelection)?scope.$parent.$eval(attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined(attrs.datepickerAppendToBody)?scope.$parent.$eval(attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody;scope.showButtonBar=angular.isDefined(attrs.showButtonBar)?scope.$parent.$eval(attrs.showButtonBar):datepickerPopupConfig.showButtonBar,scope.getText=function(key){return scope[key+"Text"]||datepickerPopupConfig[key+"Text"]};var isHtml5DateInput=!1;if(datepickerPopupConfig.html5Types[attrs.type]?(dateFormat=datepickerPopupConfig.html5Types[attrs.type],isHtml5DateInput=!0):(dateFormat=attrs.datepickerPopup||datepickerPopupConfig.datepickerPopup,attrs.$observe("datepickerPopup",function(value,oldValue){var newDateFormat=value||datepickerPopupConfig.datepickerPopup;if(newDateFormat!==dateFormat&&(dateFormat=newDateFormat,ngModel.$modelValue=null,!dateFormat))throw new Error("datepickerPopup must have a date format specified.")})),!dateFormat)throw new Error("datepickerPopup must have a date format specified.");if(isHtml5DateInput&&attrs.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var popupEl=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");popupEl.attr({"ng-model":"date","ng-change":"dateSelection(date)"});var datepickerEl=angular.element(popupEl.children()[0]);if(isHtml5DateInput&&"month"==attrs.type&&(datepickerEl.attr("datepicker-mode",'"month"'),datepickerEl.attr("min-mode","month")),attrs.datepickerOptions){var options=scope.$parent.$eval(attrs.datepickerOptions);options.initDate&&(scope.initDate=options.initDate,datepickerEl.attr("init-date","initDate"),delete options.initDate),angular.forEach(options,function(value,option){datepickerEl.attr(cameltoDash(option),value)})}scope.watchData={},angular.forEach(["minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(key){
if(attrs[key]){var getAttribute=$parse(attrs[key]);if(scope.$parent.$watch(getAttribute,function(value){scope.watchData[key]=value}),datepickerEl.attr(cameltoDash(key),"watchData."+key),"datepickerMode"===key){var setAttribute=getAttribute.assign;scope.$watch("watchData."+key,function(value,oldvalue){angular.isFunction(setAttribute)&&value!==oldvalue&&setAttribute(scope.$parent,value)})}}}),attrs.dateDisabled&&datepickerEl.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),attrs.showWeeks&&datepickerEl.attr("show-weeks",attrs.showWeeks),attrs.customClass&&datepickerEl.attr("custom-class","customClass({ date: date, mode: mode })"),isHtml5DateInput?ngModel.$formatters.push(function(value){return scope.date=value,value}):(ngModel.$$parserName="date",ngModel.$validators.date=validator,ngModel.$parsers.unshift(parseDate),ngModel.$formatters.push(function(value){return scope.date=value,ngModel.$isEmpty(value)?value:dateFilter(value,dateFormat)})),scope.dateSelection=function(dt){angular.isDefined(dt)&&(scope.date=dt);var date=scope.date?dateFilter(scope.date,dateFormat):"";element.val(date),ngModel.$setViewValue(date),closeOnDateSelection&&(scope.isOpen=!1,element[0].focus())},ngModel.$viewChangeListeners.push(function(){scope.date=dateParser.parse(ngModel.$viewValue,dateFormat,scope.date)||new Date(ngModel.$viewValue)});var documentClickBind=function(event){scope.isOpen&&event.target!==element[0]&&scope.$apply(function(){scope.isOpen=!1})},inputKeydownBind=function(evt){27===evt.which&&scope.isOpen?(evt.preventDefault(),evt.stopPropagation(),scope.$apply(function(){scope.isOpen=!1}),element[0].focus()):40!==evt.which||scope.isOpen||(evt.preventDefault(),evt.stopPropagation(),scope.$apply(function(){scope.isOpen=!0}))};element.bind("keydown",inputKeydownBind),scope.keydown=function(evt){27===evt.which&&(scope.isOpen=!1,element[0].focus())},scope.$watch("isOpen",function(value){value?(scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top=scope.position.top+element.prop("offsetHeight"),$document.bind("click",documentClickBind),$timeout(function(){scope.$broadcast("datepicker.focus")},0,!1)):$document.unbind("click",documentClickBind)}),scope.select=function(date){if("today"===date){var today=new Date;angular.isDate(scope.date)?(date=new Date(scope.date),date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())):date=new Date(today.setHours(0,0,0,0))}scope.dateSelection(date)},scope.close=function(){scope.isOpen=!1,element[0].focus()};var $popup=$compile(popupEl)(scope);popupEl.remove(),appendToBody?$document.find("body").append($popup):element.after($popup),scope.$on("$destroy",function(){scope.isOpen===!0&&scope.$apply(function(){scope.isOpen=!1}),$popup.remove(),element.unbind("keydown",inputKeydownBind),$document.unbind("click",documentClickBind)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html"}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function($document,$rootScope){var openScope=null;this.open=function(dropdownScope){openScope||($document.bind("click",closeDropdown),$document.bind("keydown",keybindFilter)),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope},this.close=function(dropdownScope){openScope===dropdownScope&&(openScope=null,$document.unbind("click",closeDropdown),$document.unbind("keydown",keybindFilter))};var closeDropdown=function(evt){if(openScope&&(!evt||"disabled"!==openScope.getAutoClose())){var toggleElement=openScope.getToggleElement();if(!(evt&&toggleElement&&toggleElement[0].contains(evt.target))){var dropdownElement=openScope.getDropdownElement();evt&&"outsideClick"===openScope.getAutoClose()&&dropdownElement&&dropdownElement[0].contains(evt.target)||(openScope.isOpen=!1,$rootScope.$$phase||openScope.$apply())}}},keybindFilter=function(evt){27===evt.which?(openScope.focusToggleElement(),closeDropdown()):openScope.isKeynavEnabled()&&/(38|40)/.test(evt.which)&&openScope.isOpen&&(evt.preventDefault(),evt.stopPropagation(),openScope.focusDropdownEntry(evt.which))}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document","$compile","$templateRequest",function($scope,$attrs,$parse,dropdownConfig,dropdownService,$animate,$position,$document,$compile,$templateRequest){var templateScope,getIsOpen,self=this,scope=$scope.$new(),openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,appendToBody=!1,keynavEnabled=!1;this.init=function(element){self.$element=element,$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})),appendToBody=angular.isDefined($attrs.dropdownAppendToBody),keynavEnabled=angular.isDefined($attrs.keyboardNav),appendToBody&&self.dropdownMenu&&($document.find("body").append(self.dropdownMenu),element.on("$destroy",function(){self.dropdownMenu.remove()}))},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.getAutoClose=function(){return $attrs.autoClose||"always"},scope.getElement=function(){return self.$element},scope.isKeynavEnabled=function(){return keynavEnabled},scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):angular.element(self.$element).find("ul").eq(0).find("a");switch(keyCode){case 40:angular.isNumber(self.selectedOption)?self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1:self.selectedOption=0;break;case 38:if(!angular.isNumber(self.selectedOption))return;self.selectedOption=0===self.selectedOption?0:self.selectedOption-1}elems[self.selectedOption].focus()},scope.getDropdownElement=function(){return self.dropdownMenu},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){if(appendToBody&&self.dropdownMenu){var pos=$position.positionElements(self.$element,self.dropdownMenu,"bottom-left",!0),css={top:pos.top+"px",display:isOpen?"block":"none"},rightalign=self.dropdownMenu.hasClass("dropdown-menu-right");rightalign?(css.left="auto",css.right=window.innerWidth-(pos.left+self.$element.prop("offsetWidth"))+"px"):(css.left=pos.left+"px",css.right="auto"),self.dropdownMenu.css(css)}if($animate[isOpen?"addClass":"removeClass"](self.$element,openClass).then(function(){angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})}),isOpen)self.dropdownMenuTemplateUrl&&$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new(),$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl})}),scope.focusToggleElement(),dropdownService.open(scope);else{if(self.dropdownMenuTemplateUrl){templateScope&&templateScope.$destroy();var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl}dropdownService.close(scope),self.selectedOption=null}setIsOpen($scope,isOpen)}),$scope.$on("$locationChangeSuccess",function(){"disabled"!==scope.getAutoClose()&&(scope.isOpen=!1)}),$scope.$on("$destroy",function(){scope.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init(element),element.addClass("dropdown")}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){var tplUrl=attrs.templateUrl;tplUrl&&(dropdownCtrl.dropdownMenuTemplateUrl=tplUrl),dropdownCtrl.dropdownMenu||(dropdownCtrl.dropdownMenu=element)}}}}).directive("keyboardNav",function(){return{restrict:"A",require:"?^dropdown",link:function(scope,element,attrs,dropdownCtrl){element.bind("keydown",function(e){if(-1!==[38,40].indexOf(e.which)){e.preventDefault(),e.stopPropagation();var elems=angular.element(element).find("a");switch(e.keyCode){case 40:angular.isNumber(dropdownCtrl.selectedOption)?dropdownCtrl.selectedOption=dropdownCtrl.selectedOption===elems.length-1?dropdownCtrl.selectedOption:dropdownCtrl.selectedOption+1:dropdownCtrl.selectedOption=0;break;case 38:dropdownCtrl.selectedOption=0===dropdownCtrl.selectedOption?0:dropdownCtrl.selectedOption-1}elems[dropdownCtrl.selectedOption].focus()}})}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){element.addClass("dropdown-toggle"),dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.bind("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key==stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key==stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.splice(stack.length-1,1)[0]},length:function(){return stack.length}}}}}).directive("modalBackdrop",["$animate","$modalStack",function($animate,$modalStack){function linkFn(scope,element,attrs){attrs.modalInClass&&($animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animate.removeClass(element,attrs.modalInClass).then(done)}))}return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(tElement,tAttrs){return tElement.addClass(tAttrs.backdropClass),linkFn}}}]).directive("modalWindow",["$modalStack","$q","$animate",function($modalStack,$q,$animate){return{restrict:"EA",scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowClass||""),scope.size=attrs.size,scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!=modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))},scope.$isRendered=!0;var modalRenderDeferObj=$q.defer();attrs.$observe("modalRender",function(value){"true"==value&&modalRenderDeferObj.resolve()}),modalRenderDeferObj.promise.then(function(){attrs.modalInClass&&($animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animate.removeClass(element,attrs.modalInClass).then(done)}));var inputsWithAutofocus=element[0].querySelectorAll("[autofocus]");inputsWithAutofocus.length?inputsWithAutofocus[0].focus():element[0].focus();var modal=$modalStack.getTop();modal&&$modalStack.modalRendered(modal.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(tElement,tAttrs){tAttrs.modalAnimation&&tElement.addClass(tAttrs.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function($scope,$element,$attrs,controller,$transclude){$transclude($scope.$parent,function(clone){$element.empty(),$element.append(clone)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$$stackedMap",function($animate,$timeout,$document,$compile,$rootScope,$q,$$stackedMap){function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex}function removeModalWindow(modalInstance,elementToReceiveFocus){var body=$document.find("body").eq(0),modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,function(){body.toggleClass(OPENED_MODAL_CLASS,openedWindows.length()>0),checkRemoveBackdrop()}),elementToReceiveFocus&&elementToReceiveFocus.focus?elementToReceiveFocus.focus():body.focus()}function checkRemoveBackdrop(){if(backdropDomEl&&-1==backdropIndex()){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,function(){backdropScopeRef=null}),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,done){function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,domEl.remove(),scope.$destroy(),done&&done())}var asyncDeferred,asyncPromise=null,setIsAsync=function(){return asyncDeferred||(asyncDeferred=$q.defer(),asyncPromise=asyncDeferred.promise),function(){asyncDeferred.resolve()}};return scope.$broadcast($modalStack.NOW_CLOSING_EVENT,setIsAsync),$q.when(asyncPromise).then(afterAnimating)}function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast("modal.closing",resultOrReason,closing).defaultPrevented}var backdropDomEl,backdropScope,OPENED_MODAL_CLASS="modal-open",openedWindows=$$stackedMap.createNew(),$modalStack={NOW_CLOSING_EVENT:"modal.stack.now-closing"};return $rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)}),$document.bind("keydown",function(evt){var modal;27===evt.which&&(modal=openedWindows.top(),modal&&modal.value.keyboard&&(evt.preventDefault(),$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")})))}),$modalStack.open=function(modalInstance,modal){var modalOpener=$document[0].activeElement;openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard});var body=$document.find("body").eq(0),currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(!0),backdropScope.index=currBackdropIndex;var angularBackgroundDomEl=angular.element('<div modal-backdrop="modal-backdrop"></div>');angularBackgroundDomEl.attr("backdrop-class",modal.backdropClass),modal.animation&&angularBackgroundDomEl.attr("modal-animation","true"),backdropDomEl=$compile(angularBackgroundDomEl)(backdropScope),body.append(backdropDomEl)}var angularDomEl=angular.element('<div modal-window="modal-window"></div>');angularDomEl.attr({"template-url":modal.windowTemplateUrl,"window-class":modal.windowClass,size:modal.size,index:openedWindows.length()-1,animate:"animate"}).html(modal.content),modal.animation&&angularDomEl.attr("modal-animation","true");var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl,openedWindows.top().value.modalOpener=modalOpener,body.append(modalDomEl),body.addClass(OPENED_MODAL_CLASS)},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);return modalWindow&&broadcastClosing(modalWindow,result,!0)?(modalWindow.value.deferred.resolve(result),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);return modalWindow&&broadcastClosing(modalWindow,reason,!1)?(modalWindow.value.deferred.reject(reason),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal&&this.dismiss(topModal.key,reason);)topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);modalWindow&&modalWindow.value.renderDeferred.resolve()},$modalStack}]).provider("$modal",function(){var $modalProvider={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function($injector,$rootScope,$q,$templateRequest,$controller,$modalStack){function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}function getResolvePromises(resolves){var promisesArr=[];return angular.forEach(resolves,function(value){(angular.isFunction(value)||angular.isArray(value))&&promisesArr.push($q.when($injector.invoke(value)))}),promisesArr}var $modal={};return $modal.open=function(modalOptions){var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalRenderDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,rendered:modalRenderDeferred.promise,close:function(result){return $modalStack.close(modalInstance,result)},dismiss:function(reason){return $modalStack.dismiss(modalInstance,reason)}};if(modalOptions=angular.extend({},$modalProvider.options,modalOptions),modalOptions.resolve=modalOptions.resolve||{},!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of template or templateUrl options is required.");var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));return templateAndResolvePromise.then(function(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss;var ctrlInstance,ctrlLocals={},resolveIter=1;modalOptions.controller&&(ctrlLocals.$scope=modalScope,ctrlLocals.$modalInstance=modalInstance,angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]}),ctrlInstance=$controller(modalOptions.controller,ctrlLocals),modalOptions.controllerAs&&(modalOptions.bindToController?angular.extend(modalScope,ctrlInstance):modalScope[modalOptions.controllerAs]=ctrlInstance)),$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,content:tplAndVars[0],animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size})},function(reason){modalResultDeferred.reject(reason)}),templateAndResolvePromise.then(function(){modalOpenedDeferred.resolve(!0)},function(reason){modalOpenedDeferred.reject(reason)}),modalInstance},$modal}]};return $modalProvider}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function($scope,$attrs,$parse){var self=this,ngModelCtrl={$setViewValue:angular.noop},setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;this.init=function(ngModelCtrl_,config){ngModelCtrl=ngModelCtrl_,this.config=config,ngModelCtrl.$render=function(){self.render()},$attrs.itemsPerPage?$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){self.itemsPerPage=parseInt(value,10),$scope.totalPages=self.calculateTotalPages()}):this.itemsPerPage=config.itemsPerPage,$scope.$watch("totalItems",function(){$scope.totalPages=self.calculateTotalPages()}),$scope.$watch("totalPages",function(value){setNumPages($scope.$parent,value),$scope.page>value?$scope.selectPage(value):ngModelCtrl.$render()})},this.calculateTotalPages=function(){var totalPages=this.itemsPerPage<1?1:Math.ceil($scope.totalItems/this.itemsPerPage);return Math.max(totalPages||0,1)},this.render=function(){$scope.page=parseInt(ngModelCtrl.$viewValue,10)||1},$scope.selectPage=function(page,evt){var clickAllowed=!$scope.ngDisabled||!evt;clickAllowed&&$scope.page!==page&&page>0&&page<=$scope.totalPages&&(evt&&evt.target&&evt.target.blur(),ngModelCtrl.$setViewValue(page),ngModelCtrl.$render())},$scope.getText=function(key){return $scope[key+"Text"]||self.config[key+"Text"]},$scope.noPrevious=function(){return 1===$scope.page},$scope.noNext=function(){return $scope.page===$scope.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function($parse,paginationConfig){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(scope,element,attrs,ctrls){function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&totalPages>maxSize;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;endPage>=number;number++){var page=makePage(number,number,number===currentPage);pages.push(page)}if(isMaxSized&&!rotate){if(startPage>1){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(totalPages>endPage){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}}return pages}var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){var maxSize=angular.isDefined(attrs.maxSize)?scope.$parent.$eval(attrs.maxSize):paginationConfig.maxSize,rotate=angular.isDefined(attrs.rotate)?scope.$parent.$eval(attrs.rotate):paginationConfig.rotate;scope.boundaryLinks=angular.isDefined(attrs.boundaryLinks)?scope.$parent.$eval(attrs.boundaryLinks):paginationConfig.boundaryLinks,scope.directionLinks=angular.isDefined(attrs.directionLinks)?scope.$parent.$eval(attrs.directionLinks):paginationConfig.directionLinks,paginationCtrl.init(ngModelCtrl,paginationConfig),attrs.maxSize&&scope.$parent.$watch($parse(attrs.maxSize),function(value){maxSize=parseInt(value,10),paginationCtrl.render()});var originalRender=paginationCtrl.render;paginationCtrl.render=function(){originalRender(),scope.page>0&&scope.page<=scope.totalPages&&(scope.pages=getPages(scope.page,scope.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(pagerConfig){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(scope,element,attrs,ctrls){var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&(scope.align=angular.isDefined(attrs.align)?scope.$parent.$eval(attrs.align):pagerConfig.align,paginationCtrl.init(ngModelCtrl,pagerConfig))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var defaultOptions={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function($window,$compile,$timeout,$document,$position,$interpolate){return function(type,prefix,defaultTriggerShow,options){function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow,hide=triggerMap[show]||show;return{show:show,hide:hide}}options=angular.extend({},defaultOptions,globalOptions,options);var directiveName=snake_case(type),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup title="'+startSym+"title"+endSym+'" '+(options.useContentExp?'content-exp="contentExp()" ':'content="'+startSym+"content"+endSym+'" ')+'placement="'+startSym+"placement"+endSym+'" popup-class="'+startSym+"popupClass"+endSym+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(tElem,tAttrs){var tooltipLinker=$compile(template);return function(scope,element,attrs,tooltipCtrl){function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){(!hasEnableExp||scope.$eval(attrs[prefix+"Enable"]))&&(prepareTooltip(),ttScope.popupDelay?popupTimeout||(popupTimeout=$timeout(show,ttScope.popupDelay,!1),popupTimeout.then(function(reposition){reposition()})):show()())}function hideTooltipBind(){scope.$apply(function(){hide()})}function show(){return popupTimeout=null,transitionTimeout&&($timeout.cancel(transitionTimeout),transitionTimeout=null),(options.useContentExp?ttScope.contentExp():ttScope.content)?(createTooltip(),tooltip.css({top:0,left:0,display:"block"}),ttScope.$digest(),positionTooltip(),ttScope.isOpen=!0,ttScope.$apply(),positionTooltip):angular.noop}function hide(){ttScope.isOpen=!1,$timeout.cancel(popupTimeout),popupTimeout=null,ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,500)):removeTooltip()}function createTooltip(){tooltip&&removeTooltip(),tooltipLinkedScope=ttScope.$new(),tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){appendToBody?$document.find("body").append(tooltip):element.after(tooltip)}),tooltipLinkedScope.$watch(function(){$timeout(positionTooltip,0,!1)}),options.useContentExp&&tooltipLinkedScope.$watch("contentExp()",function(val){!val&&ttScope.isOpen&&hide()})}function removeTooltip(){transitionTimeout=null,tooltip&&(tooltip.remove(),tooltip=null),tooltipLinkedScope&&(tooltipLinkedScope.$destroy(),tooltipLinkedScope=null)}function prepareTooltip(){prepPopupClass(),prepPlacement(),prepPopupDelay()}function prepPopupClass(){ttScope.popupClass=attrs[prefix+"Class"]}function prepPlacement(){var val=attrs[prefix+"Placement"];ttScope.placement=angular.isDefined(val)?val:options.placement}function prepPopupDelay(){var val=attrs[prefix+"PopupDelay"],delay=parseInt(val,10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay}function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers(),triggers=getTriggers(val),triggers.show===triggers.hide?element.bind(triggers.show,toggleTooltipBind):(element.bind(triggers.show,showTooltipBind),element.bind(triggers.hide,hideTooltipBind))}var tooltip,tooltipLinkedScope,transitionTimeout,popupTimeout,appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:!1,triggers=getTriggers(void 0),hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),ttScope=scope.$new(!0),positionTooltip=function(){if(tooltip){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+="px",ttPosition.left+="px",tooltip.css(ttPosition)}};ttScope.origScope=scope,ttScope.isOpen=!1,ttScope.contentExp=function(){return scope.$eval(attrs[type])},options.useContentExp||attrs.$observe(type,function(val){ttScope.content=val,!val&&ttScope.isOpen&&hide()}),attrs.$observe("disabled",function(val){val&&ttScope.isOpen&&hide()}),attrs.$observe(prefix+"Title",function(val){ttScope.title=val});var unregisterTriggers=function(){element.unbind(triggers.show,showTooltipBind),element.unbind(triggers.hide,hideTooltipBind)};prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody,appendToBody&&scope.$on("$locationChangeSuccess",function(){ttScope.isOpen&&hide()}),scope.$on("$destroy",function(){$timeout.cancel(transitionTimeout),$timeout.cancel(popupTimeout),unregisterTriggers(),removeTooltip(),ttScope=null})}}}}}]}).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function($animate,$sce,$compile,$templateRequest){return{link:function(scope,elem,attrs){var currentScope,previousElement,currentElement,origScope=scope.$eval(attrs.tooltipTemplateTranscludeScope),changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(attrs.tooltipTemplateTransclude),function(src){var thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=origScope.$new(),template=response,clone=$compile(template)(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,elem)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):cleanupLastIncludeContent()}),scope.$on("$destroy",cleanupLastIncludeContent)}}}]).directive("tooltipClasses",function(){return{restrict:"A",link:function(scope,element,attrs){scope.placement&&element.addClass(scope.placement),scope.popupClass&&element.addClass(scope.popupClass),scope.animation()&&element.addClass(attrs.tooltipAnimationClass)}}}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}}).directive("tooltipTemplate",["$tooltip",function($tooltip){return $tooltip("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html"}}).directive("tooltipHtml",["$tooltip",function($tooltip){return $tooltip("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function($tooltip,tooltipHtmlUnsafeSuppressDeprecated,$log){return tooltipHtmlUnsafeSuppressDeprecated||$log.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),$tooltip("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",function(){
return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}}).directive("popoverTemplate",["$tooltip",function($tooltip){return $tooltip("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function($tooltip){return $tooltip("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[],$scope.max=angular.isDefined($scope.max)?$scope.max:progressConfig.max,this.addBar=function(bar,element){animate||element.css({transition:"none"}),this.bars.push(bar),bar.max=$scope.max,bar.$watch("value",function(value){bar.recalculatePercentage()}),bar.recalculatePercentage=function(){bar.percent=+(100*bar.value/bar.max).toFixed(2)},bar.$on("$destroy",function(){element=null,self.removeBar(bar)})},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1)},$scope.$watch("max",function(max){self.bars.forEach(function(bar){bar.max=$scope.max,bar.recalculatePercentage()})})}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,ngModelCtrl.$formatters.push(function(value){return angular.isNumber(value)&&value<<0!==value&&(value=Math.round(value)),value}),this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn,this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)},this.buildTemplateObjects=function(states){for(var i=0,n=states.length;n>i;i++)states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff},states[i]);return states},$scope.rate=function(value){!$scope.readonly&&value>=0&&value<=$scope.range.length&&(ngModelCtrl.$setViewValue(ngModelCtrl.$viewValue===value?0:value),ngModelCtrl.$render())},$scope.enter=function(value){$scope.readonly||($scope.value=value),$scope.onHover({value:value})},$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue,$scope.onLeave()},$scope.onKeydown=function(evt){/(37|38|39|40)/.test(evt.which)&&(evt.preventDefault(),evt.stopPropagation(),$scope.rate($scope.value+(38===evt.which||39===evt.which?1:-1)))},this.render=function(){$scope.value=ngModelCtrl.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ratingCtrl.init(ngModelCtrl)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function($scope){var ctrl=this,tabs=ctrl.tabs=$scope.tabs=[];ctrl.select=function(selectedTab){angular.forEach(tabs,function(tab){tab.active&&tab!==selectedTab&&(tab.active=!1,tab.onDeselect())}),selectedTab.active=!0,selectedTab.onSelect()},ctrl.addTab=function(tab){tabs.push(tab),1===tabs.length&&tab.active!==!1?tab.active=!0:tab.active?ctrl.select(tab):tab.active=!1},ctrl.removeTab=function(tab){var index=tabs.indexOf(tab);if(tab.active&&tabs.length>1&&!destroyed){var newActiveIndex=index==tabs.length-1?index-1:index+1;ctrl.select(tabs[newActiveIndex])}tabs.splice(index,1)};var destroyed;$scope.$on("$destroy",function(){destroyed=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(scope,element,attrs){scope.vertical=angular.isDefined(attrs.vertical)?scope.$parent.$eval(attrs.vertical):!1,scope.justified=angular.isDefined(attrs.justified)?scope.$parent.$eval(attrs.justified):!1}}}).directive("tab",["$parse","$log",function($parse,$log){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(elm,attrs,transclude){return function(scope,elm,attrs,tabsetCtrl){scope.$watch("active",function(active){active&&tabsetCtrl.select(scope)}),scope.disabled=!1,attrs.disable&&scope.$parent.$watch($parse(attrs.disable),function(value){scope.disabled=!!value}),attrs.disabled&&($log.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),scope.$parent.$watch($parse(attrs.disabled),function(value){scope.disabled=!!value})),scope.select=function(){scope.disabled||(scope.active=!0)},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(scope,elm,attrs,tabCtrl){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}]).directive("tabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("tab-heading")||node.hasAttribute("data-tab-heading")||"tab-heading"===node.tagName.toLowerCase()||"data-tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.tabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function($scope,$attrs,$parse,$log,$locale,timepickerConfig){function getHoursFromTemplate(){var hours=parseInt($scope.hours,10),valid=$scope.showMeridian?hours>0&&13>hours:hours>=0&&24>hours;return valid?($scope.showMeridian&&(12===hours&&(hours=0),$scope.meridian===meridians[1]&&(hours+=12)),hours):void 0}function getMinutesFromTemplate(){var minutes=parseInt($scope.minutes,10);return minutes>=0&&60>minutes?minutes:void 0}function pad(value){return angular.isDefined(value)&&value.toString().length<2?"0"+value:value.toString()}function refresh(keyboardChange){makeValid(),ngModelCtrl.$setViewValue(new Date(selected)),updateTemplate(keyboardChange)}function makeValid(){ngModelCtrl.$setValidity("time",!0),$scope.invalidHours=!1,$scope.invalidMinutes=!1}function updateTemplate(keyboardChange){var hours=selected.getHours(),minutes=selected.getMinutes();$scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12),$scope.hours="h"===keyboardChange?hours:pad(hours),"m"!==keyboardChange&&($scope.minutes=pad(minutes)),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}function addMinutes(minutes){var dt=new Date(selected.getTime()+6e4*minutes);selected.setHours(dt.getHours(),dt.getMinutes()),refresh()}var selected=new Date,ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS;this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,ngModelCtrl.$formatters.unshift(function(modelValue){return modelValue?new Date(modelValue):null});var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;mousewheel&&this.setupMousewheelEvents(hoursInputEl,minutesInputEl);var arrowkeys=angular.isDefined($attrs.arrowkeys)?$scope.$parent.$eval($attrs.arrowkeys):timepickerConfig.arrowkeys;arrowkeys&&this.setupArrowkeyEvents(hoursInputEl,minutesInputEl),$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput,this.setupInputEvents(hoursInputEl,minutesInputEl)};var hourStep=timepickerConfig.hourStep;$attrs.hourStep&&$scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=parseInt(value,10)});var minuteStep=timepickerConfig.minuteStep;$attrs.minuteStep&&$scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=parseInt(value,10)}),$scope.showMeridian=timepickerConfig.showMeridian,$attrs.showMeridian&&$scope.$parent.$watch($parse($attrs.showMeridian),function(value){if($scope.showMeridian=!!value,ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)&&(selected.setHours(hours),refresh())}else updateTemplate()}),this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl){var isScrollingUp=function(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours()),e.preventDefault()}),minutesInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes()),e.preventDefault()})},this.setupArrowkeyEvents=function(hoursInputEl,minutesInputEl){hoursInputEl.bind("keydown",function(e){38===e.which?(e.preventDefault(),$scope.incrementHours(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementHours(),$scope.$apply())}),minutesInputEl.bind("keydown",function(e){38===e.which?(e.preventDefault(),$scope.incrementMinutes(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementMinutes(),$scope.$apply())})},this.setupInputEvents=function(hoursInputEl,minutesInputEl){if($scope.readonlyInput)return $scope.updateHours=angular.noop,void($scope.updateMinutes=angular.noop);var invalidate=function(invalidHours,invalidMinutes){ngModelCtrl.$setViewValue(null),ngModelCtrl.$setValidity("time",!1),angular.isDefined(invalidHours)&&($scope.invalidHours=invalidHours),angular.isDefined(invalidMinutes)&&($scope.invalidMinutes=invalidMinutes)};$scope.updateHours=function(){var hours=getHoursFromTemplate();angular.isDefined(hours)?(selected.setHours(hours),refresh("h")):invalidate(!0)},hoursInputEl.bind("blur",function(e){!$scope.invalidHours&&$scope.hours<10&&$scope.$apply(function(){$scope.hours=pad($scope.hours)})}),$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate();angular.isDefined(minutes)?(selected.setMinutes(minutes),refresh("m")):invalidate(void 0,!0)},minutesInputEl.bind("blur",function(e){!$scope.invalidMinutes&&$scope.minutes<10&&$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})})},this.render=function(){var date=ngModelCtrl.$viewValue;isNaN(date)?(ngModelCtrl.$setValidity("time",!1),$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(date&&(selected=date),makeValid(),updateTemplate())},$scope.showSpinners=angular.isDefined($attrs.showSpinners)?$scope.$parent.$eval($attrs.showSpinners):timepickerConfig.showSpinners,$scope.incrementHours=function(){addMinutes(60*hourStep)},$scope.decrementHours=function(){addMinutes(60*-hourStep)},$scope.incrementMinutes=function(){addMinutes(minuteStep)},$scope.decrementMinutes=function(){addMinutes(-minuteStep)},$scope.toggleMeridian=function(){addMinutes(720*(selected.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function($q,$timeout,$rootScope,$log,$transitionSuppressDeprecated){function findEndEventName(endEventNames){for(var name in endEventNames)if(void 0!==transElement.style[name])return endEventNames[name]}$transitionSuppressDeprecated||$log.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var $transition=function(element,trigger,options){options=options||{};var deferred=$q.defer(),endEventName=$transition[options.animation?"animationEndEventName":"transitionEndEventName"],transitionEndHandler=function(event){$rootScope.$apply(function(){element.unbind(endEventName,transitionEndHandler),deferred.resolve(element)})};return endEventName&&element.bind(endEventName,transitionEndHandler),$timeout(function(){angular.isString(trigger)?element.addClass(trigger):angular.isFunction(trigger)?trigger(element):angular.isObject(trigger)&&element.css(trigger),endEventName||deferred.resolve(element)}),deferred.promise.cancel=function(){endEventName&&element.unbind(endEventName,transitionEndHandler),deferred.reject("Transition cancelled")},deferred.promise},transElement=document.createElement("trans"),transitionEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},animationEndEventNames={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return $transition.transitionEndEventName=findEndEventName(transitionEndEventNames),$transition.animationEndEventName=findEndEventName(animationEndEventNames),$transition}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$position","typeaheadParser",function($compile,$parse,$q,$timeout,$document,$window,$rootScope,$position,typeaheadParser){var HOT_KEYS=[9,13,27,38,40],eventDebounceTime=200;return{require:"ngModel",link:function(originalScope,element,attrs,modelCtrl){function fireRecalculating(){scope.moveInProgress||(scope.moveInProgress=!0,scope.$digest()),timeoutEventPromise&&$timeout.cancel(timeoutEventPromise),timeoutEventPromise=$timeout(function(){scope.matches.length&&recalculatePosition(),scope.moveInProgress=!1,scope.$digest()},eventDebounceTime)}function recalculatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top+=element.prop("offsetHeight")}var minLength=originalScope.$eval(attrs.typeaheadMinLength);minLength||0===minLength||(minLength=1);var hasFocus,selected,waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=originalScope.$eval(attrs.typeaheadEditable)!==!1,isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,onSelectCallback=$parse(attrs.typeaheadOnSelect),isSelectOnBlur=angular.isDefined(attrs.typeaheadSelectOnBlur)?originalScope.$eval(attrs.typeaheadSelectOnBlur):!1,inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=attrs.typeaheadAppendToBody?originalScope.$eval(attrs.typeaheadAppendToBody):!1,focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==!1,$setModelValue=$parse(attrs.ngModel).assign,parserResult=typeaheadParser.parse(attrs.typeahead),scope=originalScope.$new();originalScope.$on("$destroy",function(){scope.$destroy()});var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random());element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":popupId});var popUpEl=angular.element("<div typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl);var resetMatches=function(){scope.matches=[],scope.activeIdx=-1,element.attr("aria-expanded",!1)},getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){0>index?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))});var getMatchesAsync=function(inputValue){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches&&matches.length>0){scope.activeIdx=focusFirst?0:-1,scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]});scope.query=inputValue,recalculatePosition(),element.attr("aria-expanded",!0)}else resetMatches();onCurrentRequest&&isLoadingSetter(originalScope,!1)},function(){resetMatches(),isLoadingSetter(originalScope,!1)})};appendToBody&&(angular.element($window).bind("resize",fireRecalculating),$document.find("body").bind("scroll",fireRecalculating));var timeoutEventPromise;scope.moveInProgress=!1,resetMatches(),scope.query=void 0;var timeoutPromise,scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)},cancelPreviousTimeout=function(){timeoutPromise&&$timeout.cancel(timeoutPromise)};modelCtrl.$parsers.unshift(function(inputValue){return hasFocus=!0,0===minLength||inputValue&&inputValue.length>=minLength?waitTime>0?(cancelPreviousTimeout(),scheduleSearchWithTimeout(inputValue)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),cancelPreviousTimeout(),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),inputValue)}),modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return isEditable||modelCtrl.$setValidity("editable",!0),inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,emptyViewValue=parserResult.viewMapper(originalScope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)}),scope.select=function(activeIdx){var model,item,locals={};selected=!0,locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals)}),resetMatches(),$timeout(function(){element[0].focus()},0,!1)},element.bind("keydown",function(evt){if(0!==scope.matches.length&&-1!==HOT_KEYS.indexOf(evt.which)&&(-1!==scope.activeIdx||13!==evt.which)){if(-1===scope.activeIdx&&9===evt.which)return resetMatches(),void scope.$digest();evt.preventDefault(),40===evt.which?(scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest()):38===evt.which?(scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1,scope.$digest()):13===evt.which||9===evt.which?scope.$apply(function(){scope.select(scope.activeIdx)}):27===evt.which&&(evt.stopPropagation(),resetMatches(),scope.$digest())}}),element.bind("blur",function(){isSelectOnBlur&&scope.matches.length&&-1!==scope.activeIdx&&!selected&&(selected=!0,scope.$apply(function(){scope.select(scope.activeIdx)})),hasFocus=!1,selected=!1});var dismissClickHandler=function(evt){element[0]!==evt.target&&3!==evt.which&&(resetMatches(),$rootScope.$$phase||scope.$digest())};$document.bind("click",dismissClickHandler),originalScope.$on("$destroy",function(){$document.unbind("click",dismissClickHandler),appendToBody&&$popup.remove(),popUpEl.remove()});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):element.after($popup)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){return scope.matches.length>0},scope.isActive=function(matchIdx){return scope.active==matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx){scope.select({activeIdx:activeIdx})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function($templateRequest,$compile,$parse){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"template/typeahead/typeahead-match.html";$templateRequest(tplUrl).then(function(tplContent){$compile(tplContent.trim())(scope,function(clonedElement){element.replaceWith(clonedElement)})})}}}]).filter("typeaheadHighlight",function(){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query){return query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href="#" tabindex="0" class="accordion-toggle" ng-click="$event.preventDefault(); toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close($event)">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:\'index\' track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n');
}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n    modal-in-class="in"\n	ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href="#" ng-click="$event.preventDefault(); select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/timepicker/timepicker.html",'<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-match.html",'<a href="#" ng-click="$event.preventDefault()" tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),function($,undefined){function addStepToCache(wizard,step){getSteps(wizard).push(step)}function analyzeData(wizard,options,state){var stepTitles=wizard.children(options.headerTag),stepContents=wizard.children(options.bodyTag);stepTitles.length>stepContents.length?throwError(_missingCorrespondingElementErrorMessage,"contents"):stepTitles.length<stepContents.length&&throwError(_missingCorrespondingElementErrorMessage,"titles");var startIndex=options.startIndex;if(state.stepCount=stepTitles.length,options.saveState&&$.cookie){var savedState=$.cookie(_cookiePrefix+getUniqueId(wizard)),savedIndex=parseInt(savedState,0);!isNaN(savedIndex)&&savedIndex<state.stepCount&&(startIndex=savedIndex)}state.currentIndex=startIndex,stepTitles.each(function(index){var item=$(this),content=stepContents.eq(index),modeData=content.data("mode"),mode=null==modeData?contentMode.html:getValidEnumValue(contentMode,/^\s*$/.test(modeData)||isNaN(modeData)?modeData:parseInt(modeData,0)),contentUrl=mode===contentMode.html||content.data("url")===undefined?"":content.data("url"),contentLoaded=mode!==contentMode.html&&"1"===content.data("loaded"),step=$.extend({},stepModel,{title:item.html(),content:mode===contentMode.html?content.html():"",contentUrl:contentUrl,contentMode:mode,contentLoaded:contentLoaded});addStepToCache(wizard,step)})}function cancel(wizard){wizard.triggerHandler("canceled")}function decreaseCurrentIndexBy(state,decreaseBy){return state.currentIndex-decreaseBy}function destroy(wizard,options){var eventNamespace=getEventNamespace(wizard);wizard.unbind(eventNamespace).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(eventNamespace),wizard.removeClass(options.clearFixCssClass+" vertical");var contents=wizard.find(".content > *");contents.removeData("loaded").removeData("mode").removeData("url"),contents.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),wizard.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var wizardSubstitute=$('<{0} class="{1}"></{0}>'.format(wizard.get(0).tagName,wizard.attr("class"))),wizardId=wizard._id();return null!=wizardId&&""!==wizardId&&wizardSubstitute._id(wizardId),wizardSubstitute.html(wizard.find(".content").html()),wizard.after(wizardSubstitute),wizard.remove(),wizardSubstitute}function finishStep(wizard,state){var currentStep=wizard.find(".steps li").eq(state.currentIndex);wizard.triggerHandler("finishing",[state.currentIndex])?(currentStep.addClass("done").removeClass("error"),wizard.triggerHandler("finished",[state.currentIndex])):currentStep.addClass("error")}function getEventNamespace(wizard){var eventNamespace=wizard.data("eventNamespace");return null==eventNamespace&&(eventNamespace="."+getUniqueId(wizard),wizard.data("eventNamespace",eventNamespace)),eventNamespace}function getStepAnchor(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+_tabSuffix+index)}function getStepPanel(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+_tabpanelSuffix+index)}function getStepTitle(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+_titleSuffix+index)}function getOptions(wizard){return wizard.data("options")}function getState(wizard){return wizard.data("state")}function getSteps(wizard){return wizard.data("steps")}function getStep(wizard,index){var steps=getSteps(wizard);return(0>index||index>=steps.length)&&throwError(_indexOutOfRangeErrorMessage),steps[index]}function getUniqueId(wizard){var uniqueId=wizard.data("uid");return null==uniqueId&&(uniqueId=wizard._id(),null==uniqueId&&(uniqueId="steps-uid-".concat(_uniqueId),wizard._id(uniqueId)),_uniqueId++,wizard.data("uid",uniqueId)),uniqueId}function getValidEnumValue(enumType,keyOrValue){if(validateArgument("enumType",enumType),validateArgument("keyOrValue",keyOrValue),"string"==typeof keyOrValue){var value=enumType[keyOrValue];return value===undefined&&throwError("The enum key '{0}' does not exist.",keyOrValue),value}if("number"==typeof keyOrValue){for(var key in enumType)if(enumType[key]===keyOrValue)return keyOrValue;throwError("Invalid enum value '{0}'.",keyOrValue)}else throwError("Invalid key or value type.")}function goToNextStep(wizard,options,state){return paginationClick(wizard,options,state,increaseCurrentIndexBy(state,1))}function goToPreviousStep(wizard,options,state){return paginationClick(wizard,options,state,decreaseCurrentIndexBy(state,1))}function goToStep(wizard,options,state,index){if((0>index||index>=state.stepCount)&&throwError(_indexOutOfRangeErrorMessage),!(options.forceMoveForward&&index<state.currentIndex)){var oldIndex=state.currentIndex;return wizard.triggerHandler("stepChanging",[state.currentIndex,index])?(state.currentIndex=index,saveCurrentStateToCookie(wizard,options,state),refreshStepNavigation(wizard,options,state,oldIndex),refreshPagination(wizard,options,state),loadAsyncContent(wizard,options,state),startTransitionEffect(wizard,options,state,index,oldIndex,function(){wizard.triggerHandler("stepChanged",[index,oldIndex])})):wizard.find(".steps li").eq(oldIndex).addClass("error"),!0}}function increaseCurrentIndexBy(state,increaseBy){return state.currentIndex+increaseBy}function initialize(options){var opts=$.extend(!0,{},defaults,options);return this.each(function(){var wizard=$(this),state={currentIndex:opts.startIndex,currentStep:null,stepCount:0,transitionElement:null};wizard.data("options",opts),wizard.data("state",state),wizard.data("steps",[]),analyzeData(wizard,opts,state),render(wizard,opts,state),registerEvents(wizard,opts),opts.autoFocus&&0===_uniqueId&&getStepAnchor(wizard,opts.startIndex).focus(),wizard.triggerHandler("init",[opts.startIndex])})}function insertStep(wizard,options,state,index,step){(0>index||index>state.stepCount)&&throwError(_indexOutOfRangeErrorMessage),step=$.extend({},stepModel,step),insertStepToCache(wizard,index,step),state.currentIndex!==state.stepCount&&state.currentIndex>=index&&(state.currentIndex++,saveCurrentStateToCookie(wizard,options,state)),state.stepCount++;var contentContainer=wizard.find(".content"),header=$("<{0}>{1}</{0}>".format(options.headerTag,step.title)),body=$("<{0}></{0}>".format(options.bodyTag));return(null==step.contentMode||step.contentMode===contentMode.html)&&body.html(step.content),0===index?contentContainer.prepend(body).prepend(header):getStepPanel(wizard,index-1).after(body).after(header),renderBody(wizard,state,body,index),renderTitle(wizard,options,state,header,index),refreshSteps(wizard,options,state,index),index===state.currentIndex&&refreshStepNavigation(wizard,options,state),refreshPagination(wizard,options,state),wizard}function insertStepToCache(wizard,index,step){getSteps(wizard).splice(index,0,step)}function keyUpHandler(event){var wizard=$(this),options=getOptions(wizard),state=getState(wizard);if(options.suppressPaginationOnFocus&&wizard.find(":focus").is(":input"))return event.preventDefault(),!1;var keyCodes={left:37,right:39};event.keyCode===keyCodes.left?(event.preventDefault(),goToPreviousStep(wizard,options,state)):event.keyCode===keyCodes.right&&(event.preventDefault(),goToNextStep(wizard,options,state))}function loadAsyncContent(wizard,options,state){if(state.stepCount>0){var currentIndex=state.currentIndex,currentStep=getStep(wizard,currentIndex);if(!options.enableContentCache||!currentStep.contentLoaded)switch(getValidEnumValue(contentMode,currentStep.contentMode)){case contentMode.iframe:wizard.find(".content > .body").eq(state.currentIndex).empty().html('<iframe src="'+currentStep.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case contentMode.async:var currentStepContent=getStepPanel(wizard,currentIndex)._aria("busy","true").empty().append(renderTemplate(options.loadingTemplate,{text:options.labels.loading}));$.ajax({url:currentStep.contentUrl,cache:!1}).done(function(data){currentStepContent.empty().html(data)._aria("busy","false").data("loaded","1"),wizard.triggerHandler("contentLoaded",[currentIndex])})}}}function paginationClick(wizard,options,state,index){var oldIndex=state.currentIndex;if(index>=0&&index<state.stepCount&&!(options.forceMoveForward&&index<state.currentIndex)){var anchor=getStepAnchor(wizard,index),parent=anchor.parent(),isDisabled=parent.hasClass("disabled");return parent._enableAria(),anchor.click(),oldIndex===state.currentIndex&&isDisabled?(parent._enableAria(!1),!1):!0}return!1}function paginationClickHandler(event){event.preventDefault();var anchor=$(this),wizard=anchor.parent().parent().parent().parent(),options=getOptions(wizard),state=getState(wizard),href=anchor.attr("href");switch(href.substring(href.lastIndexOf("#")+1)){case"cancel":cancel(wizard);break;case"finish":finishStep(wizard,state);break;case"next":goToNextStep(wizard,options,state);break;case"previous":goToPreviousStep(wizard,options,state)}}function refreshPagination(wizard,options,state){if(options.enablePagination){var finish=wizard.find(".actions a[href$='#finish']").parent(),next=wizard.find(".actions a[href$='#next']").parent();if(!options.forceMoveForward){var previous=wizard.find(".actions a[href$='#previous']").parent();previous._enableAria(state.currentIndex>0)}options.enableFinishButton&&options.showFinishButtonAlways?(finish._enableAria(state.stepCount>0),next._enableAria(state.stepCount>1&&state.stepCount>state.currentIndex+1)):(finish._showAria(options.enableFinishButton&&state.stepCount===state.currentIndex+1),next._showAria(0===state.stepCount||state.stepCount>state.currentIndex+1)._enableAria(state.stepCount>state.currentIndex+1||!options.enableFinishButton))}}function refreshStepNavigation(wizard,options,state,oldIndex){var currentOrNewStepAnchor=getStepAnchor(wizard,state.currentIndex),currentInfo=$('<span class="current-info audible">'+options.labels.current+" </span>"),stepTitles=wizard.find(".content > .title");if(null!=oldIndex){var oldStepAnchor=getStepAnchor(wizard,oldIndex);oldStepAnchor.parent().addClass("done").removeClass("error")._selectAria(!1),stepTitles.eq(oldIndex).removeClass("current").next(".body").removeClass("current"),currentInfo=oldStepAnchor.find(".current-info"),currentOrNewStepAnchor.focus()}currentOrNewStepAnchor.prepend(currentInfo).parent()._selectAria().removeClass("done")._enableAria(),stepTitles.eq(state.currentIndex).addClass("current").next(".body").addClass("current")}function refreshSteps(wizard,options,state,index){for(var uniqueId=getUniqueId(wizard),i=index;i<state.stepCount;i++){var uniqueStepId=uniqueId+_tabSuffix+i,uniqueBodyId=uniqueId+_tabpanelSuffix+i,uniqueHeaderId=uniqueId+_titleSuffix+i,title=wizard.find(".title").eq(i)._id(uniqueHeaderId);wizard.find(".steps a").eq(i)._id(uniqueStepId)._aria("controls",uniqueBodyId).attr("href","#"+uniqueHeaderId).html(renderTemplate(options.titleTemplate,{index:i+1,title:title.html()})),wizard.find(".body").eq(i)._id(uniqueBodyId)._aria("labelledby",uniqueHeaderId)}}function registerEvents(wizard,options){var eventNamespace=getEventNamespace(wizard);wizard.bind("canceled"+eventNamespace,options.onCanceled),wizard.bind("contentLoaded"+eventNamespace,options.onContentLoaded),wizard.bind("finishing"+eventNamespace,options.onFinishing),wizard.bind("finished"+eventNamespace,options.onFinished),wizard.bind("init"+eventNamespace,options.onInit),wizard.bind("stepChanging"+eventNamespace,options.onStepChanging),wizard.bind("stepChanged"+eventNamespace,options.onStepChanged),options.enableKeyNavigation&&wizard.bind("keyup"+eventNamespace,keyUpHandler),wizard.find(".actions a").bind("click"+eventNamespace,paginationClickHandler)}function removeStep(wizard,options,state,index){return 0>index||index>=state.stepCount||state.currentIndex===index?!1:(removeStepFromCache(wizard,index),state.currentIndex>index&&(state.currentIndex--,saveCurrentStateToCookie(wizard,options,state)),state.stepCount--,getStepTitle(wizard,index).remove(),getStepPanel(wizard,index).remove(),getStepAnchor(wizard,index).parent().remove(),0===index&&wizard.find(".steps li").first().addClass("first"),index===state.stepCount&&wizard.find(".steps li").eq(index).addClass("last"),refreshSteps(wizard,options,state,index),refreshPagination(wizard,options,state),!0)}function removeStepFromCache(wizard,index){getSteps(wizard).splice(index,1)}function render(wizard,options,state){var wrapperTemplate='<{0} class="{1}">{2}</{0}>',orientation=getValidEnumValue(stepsOrientation,options.stepsOrientation),verticalCssClass=orientation===stepsOrientation.vertical?" vertical":"",contentWrapper=$(wrapperTemplate.format(options.contentContainerTag,"content "+options.clearFixCssClass,wizard.html())),stepsWrapper=$(wrapperTemplate.format(options.stepsContainerTag,"steps "+options.clearFixCssClass,'<ul role="tablist"></ul>')),stepTitles=contentWrapper.children(options.headerTag),stepContents=contentWrapper.children(options.bodyTag);wizard.attr("role","application").empty().append(stepsWrapper).append(contentWrapper).addClass(options.cssClass+" "+options.clearFixCssClass+verticalCssClass),stepContents.each(function(index){renderBody(wizard,state,$(this),index)}),stepTitles.each(function(index){renderTitle(wizard,options,state,$(this),index)}),refreshStepNavigation(wizard,options,state),renderPagination(wizard,options,state)}function renderBody(wizard,state,body,index){var uniqueId=getUniqueId(wizard),uniqueBodyId=uniqueId+_tabpanelSuffix+index,uniqueHeaderId=uniqueId+_titleSuffix+index;body._id(uniqueBodyId).attr("role","tabpanel")._aria("labelledby",uniqueHeaderId).addClass("body")._showAria(state.currentIndex===index)}function renderPagination(wizard,options,state){if(options.enablePagination){var pagination='<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',buttonTemplate='<li><a href="#{0}" role="menuitem">{1}</a></li>',buttons="";options.forceMoveForward||(buttons+=buttonTemplate.format("previous",options.labels.previous)),buttons+=buttonTemplate.format("next",options.labels.next),options.enableFinishButton&&(buttons+=buttonTemplate.format("finish",options.labels.finish)),options.enableCancelButton&&(buttons+=buttonTemplate.format("cancel",options.labels.cancel)),wizard.append(pagination.format(options.actionContainerTag,options.clearFixCssClass,options.labels.pagination,buttons)),refreshPagination(wizard,options,state),loadAsyncContent(wizard,options,state)}}function renderTemplate(template,substitutes){for(var matches=template.match(/#([a-z]*)#/gi),i=0;i<matches.length;i++){var match=matches[i],key=match.substring(1,match.length-1);substitutes[key]===undefined&&throwError("The key '{0}' does not exist in the substitute collection!",key),template=template.replace(match,substitutes[key])}return template}function renderTitle(wizard,options,state,header,index){var uniqueId=getUniqueId(wizard),uniqueStepId=uniqueId+_tabSuffix+index,uniqueBodyId=uniqueId+_tabpanelSuffix+index,uniqueHeaderId=uniqueId+_titleSuffix+index,stepCollection=wizard.find(".steps > ul"),title=renderTemplate(options.titleTemplate,{index:index+1,title:header.html()}),stepItem=$('<li role="tab"><a id="'+uniqueStepId+'" href="#'+uniqueHeaderId+'" aria-controls="'+uniqueBodyId+'">'+title+"</a></li>");stepItem._enableAria(options.enableAllSteps||state.currentIndex>index),state.currentIndex>index&&stepItem.addClass("done"),header._id(uniqueHeaderId).attr("tabindex","-1").addClass("title"),0===index?stepCollection.prepend(stepItem):stepCollection.find("li").eq(index-1).after(stepItem),0===index&&stepCollection.find("li").removeClass("first").eq(index).addClass("first"),index===state.stepCount-1&&stepCollection.find("li").removeClass("last").eq(index).addClass("last"),stepItem.children("a").bind("click"+getEventNamespace(wizard),stepClickHandler)}function saveCurrentStateToCookie(wizard,options,state){options.saveState&&$.cookie&&$.cookie(_cookiePrefix+getUniqueId(wizard),state.currentIndex)}function startTransitionEffect(wizard,options,state,index,oldIndex,doneCallback){var stepContents=wizard.find(".content > .body"),effect=getValidEnumValue(transitionEffect,options.transitionEffect),effectSpeed=options.transitionEffectSpeed,newStep=stepContents.eq(index),currentStep=stepContents.eq(oldIndex);switch(effect){case transitionEffect.fade:case transitionEffect.slide:var hide=effect===transitionEffect.fade?"fadeOut":"slideUp",show=effect===transitionEffect.fade?"fadeIn":"slideDown";state.transitionElement=newStep,currentStep[hide](effectSpeed,function(){var wizard=$(this)._showAria(!1).parent().parent(),state=getState(wizard);state.transitionElement&&(state.transitionElement[show](effectSpeed,function(){$(this)._showAria()}).promise().done(doneCallback),state.transitionElement=null)});break;case transitionEffect.slideLeft:var outerWidth=currentStep.outerWidth(!0),posFadeOut=index>oldIndex?-outerWidth:outerWidth,posFadeIn=index>oldIndex?outerWidth:-outerWidth;$.when(currentStep.animate({left:posFadeOut},effectSpeed,function(){$(this)._showAria(!1)}),newStep.css("left",posFadeIn+"px")._showAria().animate({left:0},effectSpeed)).done(doneCallback);break;default:$.when(currentStep._showAria(!1),newStep._showAria()).done(doneCallback)}}function stepClickHandler(event){event.preventDefault();var anchor=$(this),wizard=anchor.parent().parent().parent().parent(),options=getOptions(wizard),state=getState(wizard),oldIndex=state.currentIndex;if(anchor.parent().is(":not(.disabled):not(.current)")){var href=anchor.attr("href"),position=parseInt(href.substring(href.lastIndexOf("-")+1),0);goToStep(wizard,options,state,position)}return oldIndex===state.currentIndex?(getStepAnchor(wizard,oldIndex).focus(),!1):void 0}function throwError(message){throw arguments.length>1&&(message=message.format(Array.prototype.slice.call(arguments,1))),new Error(message)}function validateArgument(argumentName,argumentValue){null==argumentValue&&throwError("The argument '{0}' is null or undefined.",argumentName)}$.fn.extend({_aria:function(name,value){return this.attr("aria-"+name,value)},_removeAria:function(name){return this.removeAttr("aria-"+name)},_enableAria:function(enable){return null==enable||enable?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(show){return null==show||show?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(select){return null==select||select?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(id){return id?this.attr("id",id):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var args=1===arguments.length&&$.isArray(arguments[0])?arguments[0]:arguments,formattedString=this,i=0;i<args.length;i++){var pattern=new RegExp("\\{"+i+"\\}","gm");formattedString=formattedString.replace(pattern,args[i])}return formattedString});var _uniqueId=0,_cookiePrefix="jQu3ry_5teps_St@te_",_tabSuffix="-t-",_tabpanelSuffix="-p-",_titleSuffix="-h-",_indexOutOfRangeErrorMessage="Index out of range.",_missingCorrespondingElementErrorMessage="One or more corresponding step {0} are missing.";$.fn.steps=function(method){return $.fn.steps[method]?$.fn.steps[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.steps"):initialize.apply(this,arguments)},$.fn.steps.add=function(step){var state=getState(this);return insertStep(this,getOptions(this),state,state.stepCount,step)},$.fn.steps.destroy=function(){return destroy(this,getOptions(this))},$.fn.steps.finish=function(){finishStep(this,getState(this))},$.fn.steps.getCurrentIndex=function(){return getState(this).currentIndex},$.fn.steps.getCurrentStep=function(){return getStep(this,getState(this).currentIndex)},$.fn.steps.getStep=function(index){return getStep(this,index)},$.fn.steps.insert=function(index,step){return insertStep(this,getOptions(this),getState(this),index,step)},$.fn.steps.next=function(){return goToNextStep(this,getOptions(this),getState(this))},$.fn.steps.previous=function(){return goToPreviousStep(this,getOptions(this),getState(this))},$.fn.steps.remove=function(index){return removeStep(this,getOptions(this),getState(this),index)},$.fn.steps.setStep=function(index,step){throw new Error("Not yet implemented!")},$.fn.steps.skip=function(count){throw new Error("Not yet implemented!")};var contentMode=$.fn.steps.contentMode={html:0,iframe:1,async:2},stepsOrientation=$.fn.steps.stepsOrientation={horizontal:0,vertical:1},transitionEffect=$.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},stepModel=$.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:contentMode.html,contentLoaded:!1},defaults=$.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:stepsOrientation.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:transitionEffect.none,transitionEffectSpeed:200,onStepChanging:function(event,currentIndex,newIndex){return!0},onStepChanged:function(event,currentIndex,priorIndex){},onCanceled:function(event){},onFinishing:function(event,currentIndex){return!0},onFinished:function(event,currentIndex){},onContentLoaded:function(event,currentIndex){},onInit:function(event,currentIndex){},
labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery),function(define){define(["jquery"],function($){return function(){function error(message,title,optionsOverride){return notify({type:toastType.error,iconClass:getOptions().iconClasses.error,message:message,optionsOverride:optionsOverride,title:title})}function getContainer(options,create){return options||(options=getOptions()),$container=$("#"+options.containerId),$container.length?$container:(create&&($container=createContainer(options)),$container)}function info(message,title,optionsOverride){return notify({type:toastType.info,iconClass:getOptions().iconClasses.info,message:message,optionsOverride:optionsOverride,title:title})}function subscribe(callback){listener=callback}function success(message,title,optionsOverride){return notify({type:toastType.success,iconClass:getOptions().iconClasses.success,message:message,optionsOverride:optionsOverride,title:title})}function warning(message,title,optionsOverride){return notify({type:toastType.warning,iconClass:getOptions().iconClasses.warning,message:message,optionsOverride:optionsOverride,title:title})}function clear($toastElement,clearOptions){var options=getOptions();$container||getContainer(options),clearToast($toastElement,options,clearOptions)||clearContainer(options)}function remove($toastElement){var options=getOptions();return $container||getContainer(options),$toastElement&&0===$(":focus",$toastElement).length?void removeToast($toastElement):void($container.children().length&&$container.remove())}function clearContainer(options){for(var toastsToClear=$container.children(),i=toastsToClear.length-1;i>=0;i--)clearToast($(toastsToClear[i]),options)}function clearToast($toastElement,options,clearOptions){var force=clearOptions&&clearOptions.force?clearOptions.force:!1;return $toastElement&&(force||0===$(":focus",$toastElement).length)?($toastElement[options.hideMethod]({duration:options.hideDuration,easing:options.hideEasing,complete:function(){removeToast($toastElement)}}),!0):!1}function createContainer(options){return $container=$("<div/>").attr("id",options.containerId).addClass(options.positionClass).attr("aria-live","polite").attr("role","alert"),$container.appendTo($(options.target)),$container}function getDefaults(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function publish(args){listener&&listener(args)}function notify(map){function personalizeToast(){setIcon(),setTitle(),setMessage(),setCloseButton(),setProgressBar(),setSequence()}function handleEvents(){$toastElement.hover(stickAround,delayedHideToast),!options.onclick&&options.tapToDismiss&&$toastElement.click(hideToast),options.closeButton&&$closeElement&&$closeElement.click(function(event){event.stopPropagation?event.stopPropagation():void 0!==event.cancelBubble&&event.cancelBubble!==!0&&(event.cancelBubble=!0),hideToast(!0)}),options.onclick&&$toastElement.click(function(){options.onclick(),hideToast()})}function displayToast(){$toastElement.hide(),$toastElement[options.showMethod]({duration:options.showDuration,easing:options.showEasing,complete:options.onShown}),options.timeOut>0&&(intervalId=setTimeout(hideToast,options.timeOut),progressBar.maxHideTime=parseFloat(options.timeOut),progressBar.hideEta=(new Date).getTime()+progressBar.maxHideTime,options.progressBar&&(progressBar.intervalId=setInterval(updateProgress,10)))}function setIcon(){map.iconClass&&$toastElement.addClass(options.toastClass).addClass(iconClass)}function setSequence(){options.newestOnTop?$container.prepend($toastElement):$container.append($toastElement)}function setTitle(){map.title&&($titleElement.append(map.title).addClass(options.titleClass),$toastElement.append($titleElement))}function setMessage(){map.message&&($messageElement.append(map.message).addClass(options.messageClass),$toastElement.append($messageElement))}function setCloseButton(){options.closeButton&&($closeElement.addClass("toast-close-button").attr("role","button"),$toastElement.prepend($closeElement))}function setProgressBar(){options.progressBar&&($progressElement.addClass("toast-progress"),$toastElement.prepend($progressElement))}function shouldExit(options,map){if(options.preventDuplicates){if(map.message===previousToast)return!0;previousToast=map.message}return!1}function hideToast(override){return!$(":focus",$toastElement).length||override?(clearTimeout(progressBar.intervalId),$toastElement[options.hideMethod]({duration:options.hideDuration,easing:options.hideEasing,complete:function(){removeToast($toastElement),options.onHidden&&"hidden"!==response.state&&options.onHidden(),response.state="hidden",response.endTime=new Date,publish(response)}})):void 0}function delayedHideToast(){(options.timeOut>0||options.extendedTimeOut>0)&&(intervalId=setTimeout(hideToast,options.extendedTimeOut),progressBar.maxHideTime=parseFloat(options.extendedTimeOut),progressBar.hideEta=(new Date).getTime()+progressBar.maxHideTime)}function stickAround(){clearTimeout(intervalId),progressBar.hideEta=0,$toastElement.stop(!0,!0)[options.showMethod]({duration:options.showDuration,easing:options.showEasing})}function updateProgress(){var percentage=(progressBar.hideEta-(new Date).getTime())/progressBar.maxHideTime*100;$progressElement.width(percentage+"%")}var options=getOptions(),iconClass=map.iconClass||options.iconClass;if("undefined"!=typeof map.optionsOverride&&(options=$.extend(options,map.optionsOverride),iconClass=map.optionsOverride.iconClass||iconClass),!shouldExit(options,map)){toastId++,$container=getContainer(options,!0);var intervalId=null,$toastElement=$("<div/>"),$titleElement=$("<div/>"),$messageElement=$("<div/>"),$progressElement=$("<div/>"),$closeElement=$(options.closeHtml),progressBar={intervalId:null,hideEta:null,maxHideTime:null},response={toastId:toastId,state:"visible",startTime:new Date,options:options,map:map};return personalizeToast(),displayToast(),handleEvents(),publish(response),options.debug&&console&&console.log(response),$toastElement}}function getOptions(){return $.extend({},getDefaults(),toastr.options)}function removeToast($toastElement){$container||($container=getContainer()),$toastElement.is(":visible")||($toastElement.remove(),$toastElement=null,0===$container.children().length&&($container.remove(),previousToast=void 0))}var $container,listener,previousToast,toastId=0,toastType={error:"error",info:"info",success:"success",warning:"warning"},toastr={clear:clear,remove:remove,error:error,getContainer:getContainer,info:info,options:{},subscribe:subscribe,success:success,version:"2.1.1",warning:warning};return toastr}()})}("function"==typeof define&&define.amd?define:function(deps,factory){"undefined"!=typeof module&&module.exports?module.exports=factory(require("jquery")):window.toastr=factory(window.jQuery)}),function($){$.fn.bootstrapFileInput=function(){this.each(function(i,elem){var $elem=$(elem);if("undefined"==typeof $elem.attr("data-bfi-disabled")){var buttonWord="Browse";"undefined"!=typeof $elem.attr("title")&&(buttonWord=$elem.attr("title"));var className="";$elem.attr("class")&&(className=" "+$elem.attr("class")),$elem.wrap('<a class="file-input-wrapper btn btn-default '+className+'"></a>').parent().prepend($("<span></span>").html(buttonWord))}}).promise().done(function(){$(".file-input-wrapper").mousemove(function(cursor){var input,wrapper,wrapperX,wrapperY,inputWidth,inputHeight,cursorX,cursorY;wrapper=$(this),input=wrapper.find("input"),wrapperX=wrapper.offset().left,wrapperY=wrapper.offset().top,inputWidth=input.width(),inputHeight=input.height(),cursorX=cursor.pageX,cursorY=cursor.pageY,moveInputX=cursorX-wrapperX-inputWidth+20,moveInputY=cursorY-wrapperY-inputHeight/2,input.css({left:moveInputX,top:moveInputY})}),$("body").on("change",".file-input-wrapper input[type=file]",function(){var fileName;fileName=$(this).val(),$(this).parent().next(".file-input-name").remove(),fileName=$(this).prop("files")&&$(this).prop("files").length>1?$(this)[0].files.length+" files":fileName.substring(fileName.lastIndexOf("\\")+1,fileName.length);var selectedFileNamePlacement=$(this).data("filename-placement")||"outside";"inside"===selectedFileNamePlacement?($(this).siblings("span").html(fileName),$(this).attr("title",fileName)):"outside"===selectedFileNamePlacement?$(this).parent().after('<span class="file-input-name">'+fileName+"</span>"):console.log("Error in bootstrap-file-input plugin : unknown placement ["+selectedFileNamePlacement+"] for selected filename")})})};var cssHtml="<style>.file-input-wrapper { overflow: hidden; position: relative; cursor: pointer; z-index: 1; }.file-input-wrapper input[type=file], .file-input-wrapper input[type=file]:focus, .file-input-wrapper input[type=file]:hover { position: absolute; top: 0; left: 0; cursor: pointer; opacity: 0; filter: alpha(opacity=0); z-index: 99; outline: 0; }.file-input-name { margin-left: 8px; }</style>";$("link[rel=stylesheet]").eq(0).before(cssHtml)}(jQuery),function($){$.fn.extend({slimScroll:function(options){var defaults={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},o=$.extend(defaults,options);return this.each(function(){function _onWheel(e){if(isOverPanel){var e=e||window.event,delta=0;e.wheelDelta&&(delta=-e.wheelDelta/120),e.detail&&(delta=e.detail/3);var target=e.target||e.srcTarget||e.srcElement;$(target).closest("."+o.wrapperClass).is(me.parent())&&scrollContent(delta,!0),e.preventDefault&&!releaseScroll&&e.preventDefault(),releaseScroll||(e.returnValue=!1)}}function scrollContent(y,isWheel,isJump){releaseScroll=!1;var delta=y,maxTop=me.outerHeight()-bar.outerHeight();if(isWheel&&(delta=parseInt(bar.css("top"))+y*parseInt(o.wheelStep)/100*bar.outerHeight(),delta=Math.min(Math.max(delta,0),maxTop),delta=y>0?Math.ceil(delta):Math.floor(delta),bar.css({top:delta+"px"})),percentScroll=parseInt(bar.css("top"))/(me.outerHeight()-bar.outerHeight()),delta=percentScroll*(me[0].scrollHeight-me.outerHeight()),isJump){delta=y;var offsetTop=delta/me[0].scrollHeight*me.outerHeight();offsetTop=Math.min(Math.max(offsetTop,0),maxTop),bar.css({top:offsetTop+"px"})}me.scrollTop(delta),me.trigger("slimscrolling",~~delta),showBar(),hideBar()}function attachWheel(target){window.addEventListener?(target.addEventListener("DOMMouseScroll",_onWheel,!1),target.addEventListener("mousewheel",_onWheel,!1)):document.attachEvent("onmousewheel",_onWheel)}function getBarHeight(){barHeight=Math.max(me.outerHeight()/me[0].scrollHeight*me.outerHeight(),minBarHeight),bar.css({height:barHeight+"px"});var display=barHeight==me.outerHeight()?"none":"block";bar.css({display:display})}function showBar(){if(getBarHeight(),clearTimeout(queueHide),percentScroll==~~percentScroll){if(releaseScroll=o.allowPageScroll,lastScroll!=percentScroll){var msg=0==~~percentScroll?"top":"bottom";me.trigger("slimscroll",msg)}}else releaseScroll=!1;return lastScroll=percentScroll,barHeight>=me.outerHeight()?void(releaseScroll=!0):(bar.stop(!0,!0).fadeIn("fast"),void(o.railVisible&&rail.stop(!0,!0).fadeIn("fast")))}function hideBar(){o.alwaysVisible||(queueHide=setTimeout(function(){o.disableFadeOut&&isOverPanel||isOverBar||isDragg||(bar.fadeOut("slow"),rail.fadeOut("slow"))},1e3))}var isOverPanel,isOverBar,isDragg,queueHide,touchDif,barHeight,percentScroll,lastScroll,divS="<div></div>",minBarHeight=30,releaseScroll=!1,me=$(this);if(me.parent().hasClass(o.wrapperClass)){var offset=me.scrollTop();if(bar=me.closest("."+o.barClass),rail=me.closest("."+o.railClass),getBarHeight(),$.isPlainObject(options)){if("height"in options&&"auto"==options.height){me.parent().css("height","auto"),me.css("height","auto");var height=me.parent().parent().height();me.parent().css("height",height),me.css("height",height)}if("scrollTo"in options)offset=parseInt(o.scrollTo);else if("scrollBy"in options)offset+=parseInt(o.scrollBy);else if("destroy"in options)return bar.remove(),rail.remove(),void me.unwrap();scrollContent(offset,!1,!0)}}else if(!($.isPlainObject(options)&&"destroy"in options)){o.height="auto"==o.height?me.parent().height():o.height;var wrapper=$(divS).addClass(o.wrapperClass).css({position:"relative",overflow:"hidden",width:o.width,height:o.height});me.css({overflow:"hidden",width:o.width,height:o.height});var rail=$(divS).addClass(o.railClass).css({width:o.size,height:"100%",position:"absolute",top:0,display:o.alwaysVisible&&o.railVisible?"block":"none","border-radius":o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90}),bar=$(divS).addClass(o.barClass).css({background:o.color,width:o.size,position:"absolute",top:0,opacity:o.opacity,display:o.alwaysVisible?"block":"none","border-radius":o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99}),posCss="right"==o.position?{right:o.distance}:{left:o.distance};rail.css(posCss),bar.css(posCss),me.wrap(wrapper),me.parent().append(bar),me.parent().append(rail),o.railDraggable&&bar.bind("mousedown",function(e){var $doc=$(document);return isDragg=!0,t=parseFloat(bar.css("top")),pageY=e.pageY,$doc.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,bar.css("top",currTop),scrollContent(0,bar.position().top,!1)}),$doc.bind("mouseup.slimscroll",function(e){isDragg=!1,hideBar(),$doc.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),rail.hover(function(){showBar()},function(){hideBar()}),bar.hover(function(){isOverBar=!0},function(){isOverBar=!1}),me.hover(function(){isOverPanel=!0,showBar(),hideBar()},function(){isOverPanel=!1,hideBar()}),me.bind("touchstart",function(e,b){e.originalEvent.touches.length&&(touchDif=e.originalEvent.touches[0].pageY)}),me.bind("touchmove",function(e){if(releaseScroll||e.originalEvent.preventDefault(),e.originalEvent.touches.length){var diff=(touchDif-e.originalEvent.touches[0].pageY)/o.touchScrollStep;scrollContent(diff,!0),touchDif=e.originalEvent.touches[0].pageY}}),getBarHeight(),"bottom"===o.start?(bar.css({top:me.outerHeight()-bar.outerHeight()}),scrollContent(0,!0)):"top"!==o.start&&(scrollContent($(o.start).position().top,null,!0),o.alwaysVisible||bar.hide()),attachWheel(this)}}),this}}),$.fn.extend({slimscroll:$.fn.slimScroll})}(jQuery),function($){$.color={},$.color.make=function(r,g,b,a){var o={};return o.r=r||0,o.g=g||0,o.b=b||0,o.a=null!=a?a:1,o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()},o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()},o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"},o.normalize=function(){function clamp(min,value,max){return min>value?min:value>max?max:value}return o.r=clamp(0,parseInt(o.r),255),o.g=clamp(0,parseInt(o.g),255),o.b=clamp(0,parseInt(o.b),255),o.a=clamp(0,o.a,1),o},o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)},o.normalize()},$.color.extract=function(elem,css){var c;do{if(c=elem.css(css).toLowerCase(),""!=c&&"transparent"!=c)break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));return"rgba(0, 0, 0, 0)"==c&&(c="transparent"),$.color.parse(c)},$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]));if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]),parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();return"transparent"==name?m(255,255,255,0):(res=lookupColors[name]||[0,0,0],m(res[0],res[1],res[2]))};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function($){function Canvas(cls,container){var element=container.children("."+cls)[0];if(null==element&&(element=document.createElement("canvas"),element.className=cls,$(element).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(container),!element.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");element=window.G_vmlCanvasManager.initElement(element)}this.element=element;var context=this.context=element.getContext("2d"),devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio,this.resize(container.width(),container.height()),this.textContainer=null,this.text={},this._textCache={}}function Plot(placeholder,data_,options_,plugins){function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i)hook[i].apply(this,args)}function initPlugins(){for(var classes={Canvas:Canvas},i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes),p.options&&$.extend(!0,options,p.options)}}function parseOptions(opts){$.extend(!0,options,opts),opts&&opts.colors&&(options.colors=opts.colors),null==options.xaxis.color&&(options.xaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString()),null==options.yaxis.color&&(options.yaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString()),null==options.xaxis.tickColor&&(options.xaxis.tickColor=options.grid.tickColor||options.xaxis.color),null==options.yaxis.tickColor&&(options.yaxis.tickColor=options.grid.tickColor||options.yaxis.color),null==options.grid.borderColor&&(options.grid.borderColor=options.grid.color),null==options.grid.tickColor&&(options.grid.tickColor=$.color.parse(options.grid.color).scale("a",.22).toString());var i,axisOptions,axisCount,fontSize=placeholder.css("font-size"),fontSizeDefault=fontSize?+fontSize.replace("px",""):13,fontDefaults={style:placeholder.css("font-style"),size:Math.round(.8*fontSizeDefault),variant:placeholder.css("font-variant"),weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};for(axisCount=options.xaxes.length||1,i=0;axisCount>i;++i)axisOptions=options.xaxes[i],axisOptions&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color),axisOptions=$.extend(!0,{},options.xaxis,axisOptions),options.xaxes[i]=axisOptions,axisOptions.font&&(axisOptions.font=$.extend({},fontDefaults,axisOptions.font),axisOptions.font.color||(axisOptions.font.color=axisOptions.color),axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size)));for(axisCount=options.yaxes.length||1,i=0;axisCount>i;++i)axisOptions=options.yaxes[i],axisOptions&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color),axisOptions=$.extend(!0,{},options.yaxis,axisOptions),options.yaxes[i]=axisOptions,axisOptions.font&&(axisOptions.font=$.extend({},fontDefaults,axisOptions.font),axisOptions.font.color||(axisOptions.font.color=axisOptions.color),axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size)));for(options.xaxis.noTicks&&null==options.xaxis.ticks&&(options.xaxis.ticks=options.xaxis.noTicks),options.yaxis.noTicks&&null==options.yaxis.ticks&&(options.yaxis.ticks=options.yaxis.noTicks),options.x2axis&&(options.xaxes[1]=$.extend(!0,{},options.xaxis,options.x2axis),options.xaxes[1].position="top",null==options.x2axis.min&&(options.xaxes[1].min=null),null==options.x2axis.max&&(options.xaxes[1].max=null)),options.y2axis&&(options.yaxes[1]=$.extend(!0,{},options.yaxis,options.y2axis),options.yaxes[1].position="right",null==options.y2axis.min&&(options.yaxes[1].min=null),null==options.y2axis.max&&(options.yaxes[1].max=null)),options.grid.coloredAreas&&(options.grid.markings=options.grid.coloredAreas),options.grid.coloredAreasColor&&(options.grid.markingsColor=options.grid.coloredAreasColor),options.lines&&$.extend(!0,options.series.lines,options.lines),options.points&&$.extend(!0,options.series.points,options.points),options.bars&&$.extend(!0,options.series.bars,options.bars),null!=options.shadowSize&&(options.series.shadowSize=options.shadowSize),null!=options.highlightColor&&(options.series.highlightColor=options.highlightColor),i=0;i<options.xaxes.length;++i)getOrCreateAxis(xaxes,i+1).options=options.xaxes[i];for(i=0;i<options.yaxes.length;++i)getOrCreateAxis(yaxes,i+1).options=options.yaxes[i];for(var n in hooks)options.hooks[n]&&options.hooks[n].length&&(hooks[n]=hooks[n].concat(options.hooks[n]));executeHooks(hooks.processOptions,[options])}function setData(d){series=parseData(d),fillInSeriesOptions(),processData()}function parseData(d){for(var res=[],i=0;i<d.length;++i){var s=$.extend(!0,{},options.series);null!=d[i].data?(s.data=d[i].data,delete d[i].data,$.extend(!0,s,d[i]),d[i].data=s.data):s.data=d[i],res.push(s)}return res}function axisNumber(obj,coord){var a=obj[coord+"axis"];return"object"==typeof a&&(a=a.n),"number"!=typeof a&&(a=1),a}function allAxes(){return $.grep(xaxes.concat(yaxes),function(a){return a})}function canvasToAxisCoords(pos){var i,axis,res={};for(i=0;i<xaxes.length;++i)axis=xaxes[i],axis&&axis.used&&(res["x"+axis.n]=axis.c2p(pos.left));for(i=0;i<yaxes.length;++i)axis=yaxes[i],axis&&axis.used&&(res["y"+axis.n]=axis.c2p(pos.top));return void 0!==res.x1&&(res.x=res.x1),void 0!==res.y1&&(res.y=res.y1),res}function axisToCanvasCoords(pos){var i,axis,key,res={};for(i=0;i<xaxes.length;++i)if(axis=xaxes[i],axis&&axis.used&&(key="x"+axis.n,null==pos[key]&&1==axis.n&&(key="x"),null!=pos[key])){res.left=axis.p2c(pos[key]);break}for(i=0;i<yaxes.length;++i)if(axis=yaxes[i],axis&&axis.used&&(key="y"+axis.n,null==pos[key]&&1==axis.n&&(key="y"),null!=pos[key])){res.top=axis.p2c(pos[key]);break}return res}function getOrCreateAxis(axes,number){return axes[number-1]||(axes[number-1]={n:number,direction:axes==xaxes?"x":"y",options:$.extend(!0,{},axes==xaxes?options.xaxis:options.yaxis)}),axes[number-1]}function fillInSeriesOptions(){var i,neededColors=series.length,maxIndex=-1;for(i=0;i<series.length;++i){var sc=series[i].color;null!=sc&&(neededColors--,"number"==typeof sc&&sc>maxIndex&&(maxIndex=sc))}maxIndex>=neededColors&&(neededColors=maxIndex+1);var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;neededColors>i;i++)c=$.color.parse(colorPool[i%colorPoolSize]||"#666"),i%colorPoolSize==0&&i&&(variation=variation>=0?.5>variation?-variation-.2:0:-variation),colors[i]=c.scale("rgb",1+variation);var s,colori=0;for(i=0;i<series.length;++i){if(s=series[i],null==s.color?(s.color=colors[colori].toString(),++colori):"number"==typeof s.color&&(s.color=colors[s.color].toString()),null==s.lines.show){var v,show=!0;for(v in s)if(s[v]&&s[v].show){show=!1;break}show&&(s.lines.show=!0)}null==s.lines.zero&&(s.lines.zero=!!s.lines.fill),s.xaxis=getOrCreateAxis(xaxes,axisNumber(s,"x")),s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,"y"))}}function processData(){function updateAxis(axis,min,max){min<axis.datamin&&min!=-fakeInfinity&&(axis.datamin=min),max>axis.datamax&&max!=fakeInfinity&&(axis.datamax=max)}var i,j,k,m,s,points,ps,val,f,p,data,format,topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE;for($.each(allAxes(),function(_,axis){axis.datamin=topSentry,axis.datamax=bottomSentry,axis.used=!1}),i=0;i<series.length;++i)s=series[i],s.datapoints={points:[]},executeHooks(hooks.processRawData,[s,s.data,s.datapoints]);for(i=0;i<series.length;++i){if(s=series[i],data=s.data,format=s.datapoints.format,!format){if(format=[],format.push({x:!0,number:!0,required:!0}),format.push({y:!0,number:!0,required:!0}),s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:autoscale}),s.bars.horizontal&&(delete format[format.length-1].y,format[format.length-1].x=!0)}s.datapoints.format=format}if(null==s.datapoints.pointsize){s.datapoints.pointsize=format.length,ps=s.datapoints.pointsize,points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;for(s.xaxis.used=s.yaxis.used=!0,j=k=0;j<data.length;++j,k+=ps){p=data[j];var nullify=null==p;if(!nullify)for(m=0;ps>m;++m)val=p[m],f=format[m],f&&(f.number&&null!=val&&(val=+val,isNaN(val)?val=null:val==1/0?val=fakeInfinity:val==-(1/0)&&(val=-fakeInfinity)),null==val&&(f.required&&(nullify=!0),null!=f.defaultValue&&(val=f.defaultValue))),points[k+m]=val;if(nullify)for(m=0;ps>m;++m)val=points[k+m],null!=val&&(f=format[m],f.autoscale!==!1&&(f.x&&updateAxis(s.xaxis,val,val),f.y&&updateAxis(s.yaxis,val,val))),points[k+m]=null;else if(insertSteps&&k>0&&null!=points[k-ps]&&points[k-ps]!=points[k]&&points[k-ps+1]!=points[k+1]){for(m=0;ps>m;++m)points[k+ps+m]=points[k+m];points[k+1]=points[k-ps+1],k+=ps}}}}for(i=0;i<series.length;++i)s=series[i],executeHooks(hooks.processDatapoints,[s,s.datapoints]);for(i=0;i<series.length;++i){s=series[i],points=s.datapoints.points,ps=s.datapoints.pointsize,format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps)if(null!=points[j])for(m=0;ps>m;++m)val=points[j+m],f=format[m],f&&f.autoscale!==!1&&val!=fakeInfinity&&val!=-fakeInfinity&&(f.x&&(xmin>val&&(xmin=val),val>xmax&&(xmax=val)),f.y&&(ymin>val&&(ymin=val),val>ymax&&(ymax=val)));if(s.bars.show){var delta;switch(s.bars.align){case"left":delta=0;break;case"right":delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2}s.bars.horizontal?(ymin+=delta,ymax+=delta+s.bars.barWidth):(xmin+=delta,xmax+=delta+s.bars.barWidth)}updateAxis(s.xaxis,xmin,xmax),updateAxis(s.yaxis,ymin,ymax)}$.each(allAxes(),function(_,axis){axis.datamin==topSentry&&(axis.datamin=null),axis.datamax==bottomSentry&&(axis.datamax=null)})}function setupCanvases(){placeholder.css("padding",0).children().filter(function(){return!$(this).hasClass("flot-overlay")&&!$(this).hasClass("flot-base")}).remove(),"static"==placeholder.css("position")&&placeholder.css("position","relative"),surface=new Canvas("flot-base",placeholder),overlay=new Canvas("flot-overlay",placeholder),ctx=surface.context,octx=overlay.context,eventHolder=$(overlay.element).unbind();var existing=placeholder.data("plot");existing&&(existing.shutdown(),overlay.clear()),placeholder.data("plot",plot)}function bindEvents(){options.grid.hoverable&&(eventHolder.mousemove(onMouseMove),eventHolder.bind("mouseleave",onMouseLeave)),options.grid.clickable&&eventHolder.click(onClick),executeHooks(hooks.bindEvents,[eventHolder])}function shutdown(){redrawTimeout&&clearTimeout(redrawTimeout),eventHolder.unbind("mousemove",onMouseMove),eventHolder.unbind("mouseleave",onMouseLeave),eventHolder.unbind("click",onClick),executeHooks(hooks.shutdown,[eventHolder])}function setTransformationHelpers(axis){function identity(x){return x}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;"x"==axis.direction?(s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min)),m=Math.min(t(axis.max),t(axis.min))):(s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min)),s=-s,m=Math.max(t(axis.max),t(axis.min))),t==identity?axis.p2c=function(p){return(p-m)*s}:axis.p2c=function(p){return(t(p)-m)*s},it?axis.c2p=function(c){return it(m+c/s)}:axis.c2p=function(c){return m+c/s}}function measureTickLabels(axis){for(var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||("x"==axis.direction?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=opts.font||"flot-tick-label tickLabel",i=0;i<ticks.length;++i){var t=ticks[i];if(t.label){var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);labelWidth=Math.max(labelWidth,info.width),labelHeight=Math.max(labelHeight,info.height)}}axis.labelWidth=opts.labelWidth||labelWidth,axis.labelHeight=opts.labelHeight||labelHeight}function allocateAxisBoxFirstPhase(axis){var lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis="x"===axis.direction,tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,innermost=!0,outermost=!0,first=!0,found=!1;$.each(isXAxis?xaxes:yaxes,function(i,a){a&&(a.show||a.reserveSpace)&&(a===axis?found=!0:a.options.position===pos&&(found?outermost=!1:innermost=!1),found||(first=!1))}),outermost&&(axisMargin=0),null==tickLength&&(tickLength=first?"full":5),isNaN(+tickLength)||(padding+=+tickLength),isXAxis?(lh+=padding,"bottom"==pos?(plotOffset.bottom+=lh+axisMargin,axis.box={top:surface.height-plotOffset.bottom,height:lh}):(axis.box={top:plotOffset.top+axisMargin,height:lh},plotOffset.top+=lh+axisMargin)):(lw+=padding,"left"==pos?(axis.box={left:plotOffset.left+axisMargin,width:lw},plotOffset.left+=lw+axisMargin):(plotOffset.right+=lw+axisMargin,axis.box={left:surface.width-plotOffset.right,width:lw})),axis.position=pos,axis.tickLength=tickLength,axis.box.padding=padding,axis.innermost=innermost}function allocateAxisBoxSecondPhase(axis){"x"==axis.direction?(axis.box.left=plotOffset.left-axis.labelWidth/2,axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth):(axis.box.top=plotOffset.top-axis.labelHeight/2,axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight);
}function adjustLayoutForThingsStickingOut(){var i,minMargin=options.grid.minBorderMargin;if(null==minMargin)for(minMargin=0,i=0;i<series.length;++i)minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2));var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};$.each(allAxes(),function(_,axis){axis.reserveSpace&&axis.ticks&&axis.ticks.length&&("x"===axis.direction?(margins.left=Math.max(margins.left,axis.labelWidth/2),margins.right=Math.max(margins.right,axis.labelWidth/2)):(margins.bottom=Math.max(margins.bottom,axis.labelHeight/2),margins.top=Math.max(margins.top,axis.labelHeight/2)))}),plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left)),plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right)),plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top)),plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom))}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;for(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]="number"==typeof margin?margin:margin[a]||0}executeHooks(hooks.processOffset,[plotOffset]);for(var a in plotOffset)"object"==typeof options.grid.borderWidth?plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0:plotOffset[a]+=showGrid?options.grid.borderWidth:0;if($.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=null==axisOpts.show?axis.used:axisOpts.show,axis.reserveSpace=null==axisOpts.reserveSpace?axis.show:axisOpts.reserveSpace,setRange(axis)}),showGrid){var allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace});for($.each(allocatedAxes,function(_,axis){setupTickGeneration(axis),setTicks(axis),snapRangeToTicks(axis,axis.ticks),measureTickLabels(axis)}),i=allocatedAxes.length-1;i>=0;--i)allocateAxisBoxFirstPhase(allocatedAxes[i]);adjustLayoutForThingsStickingOut(),$.each(allocatedAxes,function(_,axis){allocateAxisBoxSecondPhase(axis)})}plotWidth=surface.width-plotOffset.left-plotOffset.right,plotHeight=surface.height-plotOffset.bottom-plotOffset.top,$.each(axes,function(_,axis){setTransformationHelpers(axis)}),showGrid&&drawAxisLabels(),insertLegend()}function setRange(axis){var opts=axis.options,min=+(null!=opts.min?opts.min:axis.datamin),max=+(null!=opts.max?opts.max:axis.datamax),delta=max-min;if(0==delta){var widen=0==max?1:.01;null==opts.min&&(min-=widen),(null==opts.max||null!=opts.min)&&(max+=widen)}else{var margin=opts.autoscaleMargin;null!=margin&&(null==opts.min&&(min-=delta*margin,0>min&&null!=axis.datamin&&axis.datamin>=0&&(min=0)),null==opts.max&&(max+=delta*margin,max>0&&null!=axis.datamax&&axis.datamax<=0&&(max=0)))}axis.min=min,axis.max=max}function setupTickGeneration(axis){var noTicks,opts=axis.options;noTicks="number"==typeof opts.ticks&&opts.ticks>0?opts.ticks:.3*Math.sqrt("x"==axis.direction?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;null!=maxDec&&dec>maxDec&&(dec=maxDec);var size,magn=Math.pow(10,-dec),norm=delta/magn;if(1.5>norm?size=1:3>norm?(size=2,norm>2.25&&(null==maxDec||maxDec>=dec+1)&&(size=2.5,++dec)):size=7.5>norm?5:10,size*=magn,null!=opts.minTickSize&&size<opts.minTickSize&&(size=opts.minTickSize),axis.delta=delta,axis.tickDecimals=Math.max(0,null!=maxDec?maxDec:dec),axis.tickSize=opts.tickSize||size,"time"==opts.mode&&!axis.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(axis.tickGenerator||(axis.tickGenerator=function(axis){var prev,ticks=[],start=floorInBase(axis.min,axis.tickSize),i=0,v=Number.NaN;do prev=v,v=start+i*axis.tickSize,ticks.push(v),++i;while(v<axis.max&&v!=prev);return ticks},axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1,formatted=""+Math.round(value*factor)/factor;if(null!=axis.tickDecimals){var decimal=formatted.indexOf("."),precision=-1==decimal?0:formatted.length-decimal-1;if(precision<axis.tickDecimals)return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}return formatted}),$.isFunction(opts.tickFormatter)&&(axis.tickFormatter=function(v,axis){return""+opts.tickFormatter(v,axis)}),null!=opts.alignTicksWithAxis){var otherAxis=("x"==axis.direction?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){var niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0&&(null==opts.min&&(axis.min=Math.min(axis.min,niceTicks[0])),null==opts.max&&niceTicks.length>1&&(axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1]))),axis.tickGenerator=function(axis){var v,i,ticks=[];for(i=0;i<otherAxis.ticks.length;++i)v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min),v=axis.min+v*(axis.max-axis.min),ticks.push(v);return ticks},!axis.mode&&null==opts.tickDecimals){var extraDec=Math.max(0,-Math.floor(Math.log(axis.delta)/Math.LN10)+1),ts=axis.tickGenerator(axis);ts.length>1&&/\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))||(axis.tickDecimals=extraDec)}}}}function setTicks(axis){var oticks=axis.options.ticks,ticks=[];null==oticks||"number"==typeof oticks&&oticks>0?ticks=axis.tickGenerator(axis):oticks&&(ticks=$.isFunction(oticks)?oticks(axis):oticks);var i,v;for(axis.ticks=[],i=0;i<ticks.length;++i){var label=null,t=ticks[i];"object"==typeof t?(v=+t[0],t.length>1&&(label=t[1])):v=+t,null==label&&(label=axis.tickFormatter(v,axis)),isNaN(v)||axis.ticks.push({v:v,label:label})}}function snapRangeToTicks(axis,ticks){axis.options.autoscaleMargin&&ticks.length>0&&(null==axis.options.min&&(axis.min=Math.min(axis.min,ticks[0].v)),null==axis.options.max&&ticks.length>1&&(axis.max=Math.max(axis.max,ticks[ticks.length-1].v)))}function draw(){surface.clear(),executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;grid.show&&grid.backgroundColor&&drawBackground(),grid.show&&!grid.aboveData&&drawGrid();for(var i=0;i<series.length;++i)executeHooks(hooks.drawSeries,[ctx,series[i]]),drawSeries(series[i]);executeHooks(hooks.draw,[ctx]),grid.show&&grid.aboveData&&drawGrid(),surface.render(),triggerRedrawOverlay()}function extractRange(ranges,coord){for(var axis,from,to,key,axes=allAxes(),i=0;i<axes.length;++i)if(axis=axes[i],axis.direction==coord&&(key=coord+axis.n+"axis",ranges[key]||1!=axis.n||(key=coord+"axis"),ranges[key])){from=ranges[key].from,to=ranges[key].to;break}if(ranges[key]||(axis="x"==coord?xaxes[0]:yaxes[0],from=ranges[coord+"1"],to=ranges[coord+"2"]),null!=from&&null!=to&&from>to){var tmp=from;from=to,to=tmp}return{from:from,to:to,axis:axis}}function drawBackground(){ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,"rgba(255, 255, 255, 0)"),ctx.fillRect(0,0,plotWidth,plotHeight),ctx.restore()}function drawGrid(){var i,axes,bw,bc;ctx.save(),ctx.translate(plotOffset.left,plotOffset.top);var markings=options.grid.markings;if(markings)for($.isFunction(markings)&&(axes=plot.getAxes(),axes.xmin=axes.xaxis.min,axes.xmax=axes.xaxis.max,axes.ymin=axes.yaxis.min,axes.ymax=axes.yaxis.max,markings=markings(axes)),i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,"x"),yrange=extractRange(m,"y");if(null==xrange.from&&(xrange.from=xrange.axis.min),null==xrange.to&&(xrange.to=xrange.axis.max),null==yrange.from&&(yrange.from=yrange.axis.min),null==yrange.to&&(yrange.to=yrange.axis.max),!(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)){xrange.from=Math.max(xrange.from,xrange.axis.min),xrange.to=Math.min(xrange.to,xrange.axis.max),yrange.from=Math.max(yrange.from,yrange.axis.min),yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(!xequal||!yequal)if(xrange.from=Math.floor(xrange.axis.p2c(xrange.from)),xrange.to=Math.floor(xrange.axis.p2c(xrange.to)),yrange.from=Math.floor(yrange.axis.p2c(yrange.from)),yrange.to=Math.floor(yrange.axis.p2c(yrange.to)),xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?.5:0;ctx.beginPath(),ctx.strokeStyle=m.color||options.grid.markingsColor,ctx.lineWidth=lineWidth,xequal?(ctx.moveTo(xrange.to+subPixel,yrange.from),ctx.lineTo(xrange.to+subPixel,yrange.to)):(ctx.moveTo(xrange.from,yrange.to+subPixel),ctx.lineTo(xrange.to,yrange.to+subPixel)),ctx.stroke()}else ctx.fillStyle=m.color||options.grid.markingsColor,ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to)}}axes=allAxes(),bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var x,y,xoff,yoff,axis=axes[j],box=axis.box,t=axis.tickLength;if(axis.show&&0!=axis.ticks.length){for(ctx.lineWidth=1,"x"==axis.direction?(x=0,y="full"==t?"top"==axis.position?0:plotHeight:box.top-plotOffset.top+("top"==axis.position?box.height:0)):(y=0,x="full"==t?"left"==axis.position?0:plotWidth:box.left-plotOffset.left+("left"==axis.position?box.width:0)),axis.innermost||(ctx.strokeStyle=axis.options.color,ctx.beginPath(),xoff=yoff=0,"x"==axis.direction?xoff=plotWidth+1:yoff=plotHeight+1,1==ctx.lineWidth&&("x"==axis.direction?y=Math.floor(y)+.5:x=Math.floor(x)+.5),ctx.moveTo(x,y),ctx.lineTo(x+xoff,y+yoff),ctx.stroke()),ctx.strokeStyle=axis.options.tickColor,ctx.beginPath(),i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0,isNaN(v)||v<axis.min||v>axis.max||"full"==t&&("object"==typeof bw&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max)||("x"==axis.direction?(x=axis.p2c(v),yoff="full"==t?-plotHeight:t,"top"==axis.position&&(yoff=-yoff)):(y=axis.p2c(v),xoff="full"==t?-plotWidth:t,"left"==axis.position&&(xoff=-xoff)),1==ctx.lineWidth&&("x"==axis.direction?x=Math.floor(x)+.5:y=Math.floor(y)+.5),ctx.moveTo(x,y),ctx.lineTo(x+xoff,y+yoff))}ctx.stroke()}}bw&&(bc=options.grid.borderColor,"object"==typeof bw||"object"==typeof bc?("object"!=typeof bw&&(bw={top:bw,right:bw,bottom:bw,left:bw}),"object"!=typeof bc&&(bc={top:bc,right:bc,bottom:bc,left:bc}),bw.top>0&&(ctx.strokeStyle=bc.top,ctx.lineWidth=bw.top,ctx.beginPath(),ctx.moveTo(0-bw.left,0-bw.top/2),ctx.lineTo(plotWidth,0-bw.top/2),ctx.stroke()),bw.right>0&&(ctx.strokeStyle=bc.right,ctx.lineWidth=bw.right,ctx.beginPath(),ctx.moveTo(plotWidth+bw.right/2,0-bw.top),ctx.lineTo(plotWidth+bw.right/2,plotHeight),ctx.stroke()),bw.bottom>0&&(ctx.strokeStyle=bc.bottom,ctx.lineWidth=bw.bottom,ctx.beginPath(),ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2),ctx.lineTo(0,plotHeight+bw.bottom/2),ctx.stroke()),bw.left>0&&(ctx.strokeStyle=bc.left,ctx.lineWidth=bw.left,ctx.beginPath(),ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom),ctx.lineTo(0-bw.left/2,0),ctx.stroke())):(ctx.lineWidth=bw,ctx.strokeStyle=options.grid.borderColor,ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw))),ctx.restore()}function drawAxisLabels(){$.each(allAxes(),function(_,axis){var tick,x,y,halign,valign,box=axis.box,legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=axis.options.font||"flot-tick-label tickLabel";if(surface.removeText(layer),axis.show&&0!=axis.ticks.length)for(var i=0;i<axis.ticks.length;++i)tick=axis.ticks[i],!tick.label||tick.v<axis.min||tick.v>axis.max||("x"==axis.direction?(halign="center",x=plotOffset.left+axis.p2c(tick.v),"bottom"==axis.position?y=box.top+box.padding:(y=box.top+box.height-box.padding,valign="bottom")):(valign="middle",y=plotOffset.top+axis.p2c(tick.v),"left"==axis.position?(x=box.left+box.width-box.padding,halign="right"):x=box.left+box.padding),surface.addText(layer,x,y,tick.label,font,null,null,halign,valign))})}function drawSeries(series){series.lines.show&&drawSeriesLines(series),series.bars.show&&drawSeriesBars(series),series.points.show&&drawSeriesPoints(series)}function drawSeriesLines(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(null!=x1&&null!=x2){if(y2>=y1&&y1<axisy.min){if(y2<axisy.min)continue;x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.min}else if(y1>=y2&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.min}if(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.max}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.max}if(x2>=x1&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.min}else if(x1>=x2&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.max}(x1!=prevx||y1!=prevy)&&ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset),prevx=x2,prevy=y2,ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset)}}ctx.stroke()}function plotLineArea(datapoints,axisx,axisy){for(var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,areaOpen=!1,ypos=1,segmentStart=0,segmentEnd=0;;){if(ps>0&&i>points.length+ps)break;i+=ps;var x1=points[i-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&null!=x1&&null==x2){segmentEnd=i,ps=-ps,ypos=2;continue}if(0>ps&&i==segmentStart+ps){ctx.fill(),areaOpen=!1,ps=-ps,ypos=1,i=segmentStart=segmentEnd+ps;continue}}if(null!=x1&&null!=x2){if(x2>=x1&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.min}else if(x1>=x2&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.max}if(areaOpen||(ctx.beginPath(),ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom)),areaOpen=!0),y1>=axisy.max&&y2>=axisy.max)ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));else if(y1<=axisy.min&&y2<=axisy.min)ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));else{var x1old=x1,x2old=x2;y2>=y1&&y1<axisy.min&&y2>=axisy.min?(x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.min):y1>=y2&&y2<axisy.min&&y1>=axisy.min&&(x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.min),y1>=y2&&y1>axisy.max&&y2<=axisy.max?(x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.max):y2>=y1&&y2>axisy.max&&y1<=axisy.max&&(x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.max),x1!=x1old&&ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1)),ctx.lineTo(axisx.p2c(x1),axisy.p2c(y1)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2)),x2!=x2old&&(ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2)),ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2)))}}}}ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.lineJoin="round";var lw=series.lines.lineWidth,sw=series.shadowSize;if(lw>0&&sw>0){ctx.lineWidth=sw,ctx.strokeStyle="rgba(0,0,0,0.1)";var angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis),ctx.lineWidth=sw/2,plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis)}ctx.lineWidth=lw,ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);fillStyle&&(ctx.fillStyle=fillStyle,plotLineArea(series.datapoints,series.xaxis,series.yaxis)),lw>0&&plotLine(series.datapoints,0,0,series.xaxis,series.yaxis),ctx.restore()}function drawSeriesPoints(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){for(var points=datapoints.points,ps=datapoints.pointsize,i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];null==x||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max||(ctx.beginPath(),x=axisx.p2c(x),y=axisy.p2c(y)+offset,"circle"==symbol?ctx.arc(x,y,radius,0,shadow?Math.PI:2*Math.PI,!1):symbol(ctx,x,y,radius,shadow),ctx.closePath(),fillStyle&&(ctx.fillStyle=fillStyle,ctx.fill()),ctx.stroke())}}ctx.save(),ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;if(0==lw&&(lw=1e-4),lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w,ctx.strokeStyle="rgba(0,0,0,0.1)",plotPoints(series.datapoints,radius,null,w+w/2,!0,series.xaxis,series.yaxis,symbol),ctx.strokeStyle="rgba(0,0,0,0.2)",plotPoints(series.datapoints,radius,null,w/2,!0,series.xaxis,series.yaxis,symbol)}ctx.lineWidth=lw,ctx.strokeStyle=series.color,plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,!1,series.xaxis,series.yaxis,symbol),ctx.restore()}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;horizontal?(drawBottom=drawRight=drawTop=!0,drawLeft=!1,left=b,right=x,top=y+barLeft,bottom=y+barRight,left>right&&(tmp=right,right=left,left=tmp,drawLeft=!0,drawRight=!1)):(drawLeft=drawRight=drawTop=!0,drawBottom=!1,left=x+barLeft,right=x+barRight,bottom=b,top=y,bottom>top&&(tmp=top,top=bottom,bottom=tmp,drawBottom=!0,drawTop=!1)),right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max||(left<axisx.min&&(left=axisx.min,drawLeft=!1),right>axisx.max&&(right=axisx.max,drawRight=!1),bottom<axisy.min&&(bottom=axisy.min,drawBottom=!1),top>axisy.max&&(top=axisy.max,drawTop=!1),left=axisx.p2c(left),bottom=axisy.p2c(bottom),right=axisx.p2c(right),top=axisy.p2c(top),fillStyleCallback&&(c.fillStyle=fillStyleCallback(bottom,top),c.fillRect(left,top,right-left,bottom-top)),lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)&&(c.beginPath(),c.moveTo(left,bottom),drawLeft?c.lineTo(left,top):c.moveTo(left,top),drawTop?c.lineTo(right,top):c.moveTo(right,top),drawRight?c.lineTo(right,bottom):c.moveTo(right,bottom),drawBottom?c.lineTo(left,bottom):c.moveTo(left,bottom),c.stroke()))}function drawSeriesBars(series){function plotBars(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){for(var points=datapoints.points,ps=datapoints.pointsize,i=0;i<points.length;i+=ps)null!=points[i]&&drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth)}ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.lineWidth=series.bars.lineWidth,ctx.strokeStyle=series.color;var barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top)}:null;plotBars(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis),ctx.restore()}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);return c.a="number"==typeof fill?fill:.4,c.normalize(),c.toString()}function insertLegend(){if(null!=options.legend.container?$(options.legend.container).html(""):placeholder.find(".legend").remove(),options.legend.show){for(var s,label,fragments=[],entries=[],rowStarted=!1,lf=options.legend.labelFormatter,i=0;i<series.length;++i)s=series[i],s.label&&(label=lf?lf(s.label,s):s.label,label&&entries.push({label:label,color:s.color}));if(options.legend.sorted)if($.isFunction(options.legend.sorted))entries.sort(options.legend.sorted);else if("reverse"==options.legend.sorted)entries.reverse();else{var ascending="descending"!=options.legend.sorted;entries.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=ascending?1:-1})}for(var i=0;i<entries.length;++i){var entry=entries[i];i%options.legend.noColumns==0&&(rowStarted&&fragments.push("</tr>"),fragments.push("<tr>"),rowStarted=!0),fragments.push('<td class="legendColorBox"><div style="border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+entry.label+"</td>")}if(rowStarted&&fragments.push("</tr>"),0!=fragments.length){var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join("")+"</table>";if(null!=options.legend.container)$(options.legend.container).html(table);else{var pos="",p=options.legend.position,m=options.legend.margin;null==m[0]&&(m=[m,m]),"n"==p.charAt(0)?pos+="top:"+(m[1]+plotOffset.top)+"px;":"s"==p.charAt(0)&&(pos+="bottom:"+(m[1]+plotOffset.bottom)+"px;"),"e"==p.charAt(1)?pos+="right:"+(m[0]+plotOffset.right)+"px;":"w"==p.charAt(1)&&(pos+="left:"+(m[0]+plotOffset.left)+"px;");var legend=$('<div class="legend">'+table.replace('style="','style="position:absolute;'+pos+";")+"</div>").appendTo(placeholder);if(0!=options.legend.backgroundOpacity){var c=options.legend.backgroundColor;null==c&&(c=options.grid.backgroundColor,c=c&&"string"==typeof c?$.color.parse(c):$.color.extract(legend,"background-color"),c.a=1,c=c.toString());var div=legend.children();$('<div style="position:absolute;width:'+div.width()+"px;height:"+div.height()+"px;"+pos+"background-color:"+c+';"> </div>').prependTo(legend).css("opacity",options.legend.backgroundOpacity)}}}}}function findNearbyItem(mouseX,mouseY,seriesFilter){var i,j,ps,maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null;for(i=series.length-1;i>=0;--i)if(seriesFilter(series[i])){var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;if(ps=s.datapoints.pointsize,axisx.options.inverseTransform&&(maxx=Number.MAX_VALUE),axisy.options.inverseTransform&&(maxy=Number.MAX_VALUE),s.lines.show||s.points.show)for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(null!=x&&!(x-mx>maxx||-maxx>x-mx||y-my>maxy||-maxy>y-my)){var dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;smallestDistance>dist&&(smallestDistance=dist,item=[i,j/ps])}}if(s.bars.show&&!item){var barLeft,barRight;switch(s.bars.align){case"left":barLeft=0;break;case"right":barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2}for(barRight=barLeft+s.bars.barWidth,j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1],b=points[j+2];null!=x&&(series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&y+barRight>=my:mx>=x+barLeft&&x+barRight>=mx&&my>=Math.min(b,y)&&my<=Math.max(b,y))&&(item=[i,j/ps])}}}return item?(i=item[0],j=item[1],ps=series[i].datapoints.pointsize,{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i}):null}function onMouseMove(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return 0!=s.hoverable})}function onMouseLeave(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return!1})}function onClick(e){triggerClickHoverEvent("plotclick",e,function(s){return 0!=s.clickable})}function triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX,pos.pageY=event.pageY;var item=findNearbyItem(canvasX,canvasY,seriesFilter);if(item&&(item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10),item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10)),options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];h.auto!=eventname||item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]||unhighlight(h.series,h.point)}item&&highlight(item.series,item.datapoint,eventname)}placeholder.trigger(eventname,[pos,item])}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;return-1==t?void drawOverlay():void(redrawTimeout||(redrawTimeout=setTimeout(drawOverlay,t)))}function drawOverlay(){redrawTimeout=null,octx.save(),overlay.clear(),octx.translate(plotOffset.left,plotOffset.top);var i,hi;for(i=0;i<highlights.length;++i)hi=highlights[i],hi.series.bars.show?drawBarHighlight(hi.series,hi.point):drawPointHighlight(hi.series,hi.point);octx.restore(),executeHooks(hooks.drawOverlay,[octx])}function highlight(s,point,auto){if("number"==typeof s&&(s=series[s]),"number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);-1==i?(highlights.push({series:s,point:point,auto:auto}),triggerRedrawOverlay()):auto||(highlights[i].auto=!1)}function unhighlight(s,point){if(null==s&&null==point)return highlights=[],void triggerRedrawOverlay();if("number"==typeof s&&(s=series[s]),"number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);-1!=i&&(highlights.splice(i,1),triggerRedrawOverlay())}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i}return-1}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor="string"==typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString();if(!(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)){var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius,octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x),y=axisy.p2c(y),octx.beginPath(),"circle"==series.points.symbol?octx.arc(x,y,radius,0,2*Math.PI,!1):series.points.symbol(octx,x,y,radius,!1),octx.closePath(),octx.stroke()}}function drawBarHighlight(series,point){var barLeft,highlightColor="string"==typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString(),fillStyle=highlightColor;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}octx.lineWidth=series.bars.lineWidth,octx.strokeStyle=highlightColor,drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth)}function getColorOrGradient(spec,bottom,top,defaultColor){if("string"==typeof spec)return spec;for(var gradient=ctx.createLinearGradient(0,top,0,bottom),i=0,l=spec.colors.length;l>i;++i){var c=spec.colors[i];if("string"!=typeof c){var co=$.color.parse(defaultColor);null!=c.brightness&&(co=co.scale("rgb",c.brightness)),null!=c.opacity&&(co.a*=c.opacity),c=co.toString()}gradient.addColorStop(i/(l-1),c)}return gradient}var series=[],options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;plot.setData=setData,plot.setupGrid=setupGrid,plot.draw=draw,plot.getPlaceholder=function(){return placeholder},plot.getCanvas=function(){return surface.element},plot.getPlotOffset=function(){return plotOffset},plot.width=function(){return plotWidth},plot.height=function(){return plotHeight},plot.offset=function(){var o=eventHolder.offset();return o.left+=plotOffset.left,o.top+=plotOffset.top,o},plot.getData=function(){return series},plot.getAxes=function(){var res={};return $.each(xaxes.concat(yaxes),function(_,axis){axis&&(res[axis.direction+(1!=axis.n?axis.n:"")+"axis"]=axis)}),res},plot.getXAxes=function(){return xaxes},plot.getYAxes=function(){return yaxes},plot.c2p=canvasToAxisCoords,plot.p2c=axisToCanvasCoords,plot.getOptions=function(){return options},plot.highlight=highlight,plot.unhighlight=unhighlight,plot.triggerRedrawOverlay=triggerRedrawOverlay,plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,"x")-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,"y")-1].p2c(+point.y)+plotOffset.top,10)}},plot.shutdown=shutdown,plot.destroy=function(){shutdown(),placeholder.removeData("plot").empty(),series=[],options=null,surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],hooks=null,highlights=[],plot=null},plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height),overlay.resize(width,height)},plot.hooks=hooks,initPlugins(plot),parseOptions(options_),setupCanvases(),setData(data_),setupGrid(),draw(),bindEvents();var highlights=[],redrawTimeout=null}function floorInBase(n,base){return base*Math.floor(n/base)}var hasOwnProperty=Object.prototype.hasOwnProperty;$.fn.detach||($.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),Canvas.prototype.resize=function(width,height){if(0>=width||0>=height)throw new Error("Invalid dimensions for plot, width = "+width+", height = "+height);var element=this.element,context=this.context,pixelRatio=this.pixelRatio;this.width!=width&&(element.width=width*pixelRatio,element.style.width=width+"px",this.width=width),this.height!=height&&(element.height=height*pixelRatio,element.style.height=height+"px",this.height=height),context.restore(),context.save(),context.scale(pixelRatio,pixelRatio)},Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},Canvas.prototype.render=function(){var cache=this._textCache;for(var layerKey in cache)if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];layer.hide();for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key)){for(var position,positions=styleCache[key].positions,i=0;position=positions[i];i++)position.active?position.rendered||(layer.append(position.element),position.rendered=!0):(positions.splice(i--,1),position.rendered&&position.element.detach());0==positions.length&&delete styleCache[key]}}layer.show()}},Canvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];return null==layer&&(null==this.textContainer&&(this.textContainer=$("<div class='flot-text'></div>").css({
position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),layer=this.text[classes]=$("<div></div>").addClass(classes).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),layer},Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;if(text=""+text,textStyle="object"==typeof font?font.style+" "+font.variant+" "+font.weight+" "+font.size+"px/"+font.lineHeight+"px "+font.family:font,layerCache=this._textCache[layer],null==layerCache&&(layerCache=this._textCache[layer]={}),styleCache=layerCache[textStyle],null==styleCache&&(styleCache=layerCache[textStyle]={}),info=styleCache[text],null==info){var element=$("<div></div>").html(text).css({position:"absolute","max-width":width,top:-9999}).appendTo(this.getTextLayer(layer));"object"==typeof font?element.css({font:textStyle,color:font.color}):"string"==typeof font&&element.addClass(font),info=styleCache[text]={width:element.outerWidth(!0),height:element.outerHeight(!0),element:element,positions:[]},element.detach()}return info},Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;"center"==halign?x-=info.width/2:"right"==halign&&(x-=info.width),"middle"==valign?y-=info.height/2:"bottom"==valign&&(y-=info.height);for(var position,i=0;position=positions[i];i++)if(position.x==x&&position.y==y)return void(position.active=!0);position={active:!0,rendered:!1,element:positions.length?info.element.clone():info.element,x:x,y:y},positions.push(position),position.element.css({top:Math.round(y),left:Math.round(x),"text-align":halign})},Canvas.prototype.removeText=function(layer,x,y,text,font,angle){if(null==text){var layerCache=this._textCache[layer];if(null!=layerCache)for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key))for(var position,positions=styleCache[key].positions,i=0;position=positions[i];i++)position.active=!1}}else for(var position,positions=this.getTextInfo(layer,text,font,angle).positions,i=0;position=positions[i];i++)position.x==x&&position.y==y&&(position.active=!1)},$.plot=function(placeholder,data,options){var plot=new Plot($(placeholder),data,options,$.plot.plugins);return plot},$.plot.version="0.8.3",$.plot.plugins=[],$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options)})}}(jQuery),function($,e,t){"$:nomunge";function h(t){r===!0&&(r=t||1);for(var s=i.length-1;s>=0;s--){var l=$(i[s]);if(l[0]==e||l.is(":visible")){var f=l.width(),c=l.height(),d=l.data(m);!d||f===d.w&&c===d.h||(l.trigger(u,[d.w=f,d.h=c]),r=t||!0)}else d=l.data(m),d.w=0,d.h=0}null!==a&&(r&&(null==t||1e3>t-r)?a=e.requestAnimationFrame(h):(a=setTimeout(h,n[o]),r=!1))}var a,i=[],n=$.resize=$.extend($.resize,{}),r=!1,s="setTimeout",u="resize",m=u+"-special-event",o="pendingDelay",l="activeDelay",f="throttleWindow";n[o]=200,n[l]=20,n[f]=!0,$.event.special[u]={setup:function(){if(!n[f]&&this[s])return!1;var e=$(this);i.push(this),e.data(m,{w:e.width(),h:e.height()}),1===i.length&&(a=t,h())},teardown:function(){if(!n[f]&&this[s])return!1;for(var e=$(this),t=i.length-1;t>=0;t--)if(i[t]==this){i.splice(t,1);break}e.removeData(m),i.length||(r?cancelAnimationFrame(a):clearTimeout(a),a=null)},add:function(e){function a(e,n,a){var r=$(this),s=r.data(m)||{};s.w=n!==t?n:r.width(),s.h=a!==t?a:r.height(),i.apply(this,arguments)}if(!n[f]&&this[s])return!1;var i;return $.isFunction(e)?(i=e,a):(i=e.handler,void(e.handler=a))}},e.requestAnimationFrame||(e.requestAnimationFrame=function(){return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t,i){return e.setTimeout(function(){t((new Date).getTime())},n[l])}}()),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(){return e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function($){function init(plot){function onResize(){var placeholder=plot.getPlaceholder();0!=placeholder.width()&&0!=placeholder.height()&&(plot.resize(),plot.setupGrid(),plot.draw())}function bindEvents(plot,eventHolder){plot.getPlaceholder().resize(onResize)}function shutdown(plot,eventHolder){plot.getPlaceholder().unbind("resize",onResize)}plot.hooks.bindEvents.push(bindEvents),plot.hooks.shutdown.push(shutdown)}var options={};$.plot.plugins.push({init:init,options:options,name:"resize",version:"1.0"})}(jQuery),function($){function init(plot){function processDatapoints(plot,series,datapoints){processed||(processed=!0,canvas=plot.getCanvas(),target=$(canvas).parent(),options=plot.getOptions(),plot.setData(combine(plot.getData())))}function combine(data){for(var total=0,combined=0,numCombined=0,color=options.series.pie.combine.color,newdata=[],i=0;i<data.length;++i){var value=data[i].data;$.isArray(value)&&1==value.length&&(value=value[0]),$.isArray(value)?!isNaN(parseFloat(value[1]))&&isFinite(value[1])?value[1]=+value[1]:value[1]=0:value=!isNaN(parseFloat(value))&&isFinite(value)?[1,+value]:[1,0],data[i].data=[value]}for(var i=0;i<data.length;++i)total+=data[i].data[0][1];for(var i=0;i<data.length;++i){var value=data[i].data[0][1];value/total<=options.series.pie.combine.threshold&&(combined+=value,numCombined++,color||(color=data[i].color))}for(var i=0;i<data.length;++i){var value=data[i].data[0][1];(2>numCombined||value/total>options.series.pie.combine.threshold)&&newdata.push($.extend(data[i],{data:[[1,value]],color:data[i].color,label:data[i].label,angle:value*Math.PI*2/total,percent:value/(total/100)}))}return numCombined>1&&newdata.push({data:[[1,combined]],color:color,label:options.series.pie.combine.label,angle:combined*Math.PI*2/total,percent:combined/(total/100)}),newdata}function draw(plot,newCtx){function clear(){ctx.clearRect(0,0,canvasWidth,canvasHeight),target.children().filter(".pieLabel, .pieLabelBackground").remove()}function drawShadow(){var shadowLeft=options.series.pie.shadow.left,shadowTop=options.series.pie.shadow.top,edge=10,alpha=options.series.pie.shadow.alpha,radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;if(!(radius>=canvasWidth/2-shadowLeft||radius*options.series.pie.tilt>=canvasHeight/2-shadowTop||edge>=radius)){ctx.save(),ctx.translate(shadowLeft,shadowTop),ctx.globalAlpha=alpha,ctx.fillStyle="#000",ctx.translate(centerLeft,centerTop),ctx.scale(1,options.series.pie.tilt);for(var i=1;edge>=i;i++)ctx.beginPath(),ctx.arc(0,0,radius,0,2*Math.PI,!1),ctx.fill(),radius-=i;ctx.restore()}}function drawPie(){function drawSlice(angle,color,fill){0>=angle||isNaN(angle)||(fill?ctx.fillStyle=color:(ctx.strokeStyle=color,ctx.lineJoin="round"),ctx.beginPath(),Math.abs(angle-2*Math.PI)>1e-9&&ctx.moveTo(0,0),ctx.arc(0,0,radius,currentAngle,currentAngle+angle/2,!1),ctx.arc(0,0,radius,currentAngle+angle/2,currentAngle+angle,!1),ctx.closePath(),currentAngle+=angle,fill?ctx.fill():ctx.stroke())}function drawLabels(){function drawLabel(slice,startAngle,index){if(0==slice.data[0][1])return!0;var text,lf=options.legend.labelFormatter,plf=options.series.pie.label.formatter;text=lf?lf(slice.label,slice):slice.label,plf&&(text=plf(text,slice));var halfAngle=(startAngle+slice.angle+startAngle)/2,x=centerLeft+Math.round(Math.cos(halfAngle)*radius),y=centerTop+Math.round(Math.sin(halfAngle)*radius)*options.series.pie.tilt,html="<span class='pieLabel' id='pieLabel"+index+"' style='position:absolute;top:"+y+"px;left:"+x+"px;'>"+text+"</span>";target.append(html);var label=target.children("#pieLabel"+index),labelTop=y-label.height()/2,labelLeft=x-label.width()/2;if(label.css("top",labelTop),label.css("left",labelLeft),0-labelTop>0||0-labelLeft>0||canvasHeight-(labelTop+label.height())<0||canvasWidth-(labelLeft+label.width())<0)return!1;if(0!=options.series.pie.label.background.opacity){var c=options.series.pie.label.background.color;null==c&&(c=slice.color);var pos="top:"+labelTop+"px;left:"+labelLeft+"px;";$("<div class='pieLabelBackground' style='position:absolute;width:"+label.width()+"px;height:"+label.height()+"px;"+pos+"background-color:"+c+";'></div>").css("opacity",options.series.pie.label.background.opacity).insertBefore(label)}return!0}for(var currentAngle=startAngle,radius=options.series.pie.label.radius>1?options.series.pie.label.radius:maxRadius*options.series.pie.label.radius,i=0;i<slices.length;++i){if(slices[i].percent>=100*options.series.pie.label.threshold&&!drawLabel(slices[i],currentAngle,i))return!1;currentAngle+=slices[i].angle}return!0}var startAngle=Math.PI*options.series.pie.startAngle,radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;ctx.save(),ctx.translate(centerLeft,centerTop),ctx.scale(1,options.series.pie.tilt),ctx.save();for(var currentAngle=startAngle,i=0;i<slices.length;++i)slices[i].startAngle=currentAngle,drawSlice(slices[i].angle,slices[i].color,!0);if(ctx.restore(),options.series.pie.stroke.width>0){ctx.save(),ctx.lineWidth=options.series.pie.stroke.width,currentAngle=startAngle;for(var i=0;i<slices.length;++i)drawSlice(slices[i].angle,options.series.pie.stroke.color,!1);ctx.restore()}return drawDonutHole(ctx),ctx.restore(),options.series.pie.label.show?drawLabels():!0}if(target){var canvasWidth=plot.getPlaceholder().width(),canvasHeight=plot.getPlaceholder().height(),legendWidth=target.children().filter(".legend").children().width()||0;ctx=newCtx,processed=!1,maxRadius=Math.min(canvasWidth,canvasHeight/options.series.pie.tilt)/2,centerTop=canvasHeight/2+options.series.pie.offset.top,centerLeft=canvasWidth/2,"auto"==options.series.pie.offset.left?(options.legend.position.match("w")?centerLeft+=legendWidth/2:centerLeft-=legendWidth/2,maxRadius>centerLeft?centerLeft=maxRadius:centerLeft>canvasWidth-maxRadius&&(centerLeft=canvasWidth-maxRadius)):centerLeft+=options.series.pie.offset.left;var slices=plot.getData(),attempts=0;do attempts>0&&(maxRadius*=REDRAW_SHRINK),attempts+=1,clear(),options.series.pie.tilt<=.8&&drawShadow();while(!drawPie()&&REDRAW_ATTEMPTS>attempts);attempts>=REDRAW_ATTEMPTS&&(clear(),target.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),plot.setSeries&&plot.insertLegend&&(plot.setSeries(slices),plot.insertLegend())}}function drawDonutHole(layer){if(options.series.pie.innerRadius>0){layer.save();var innerRadius=options.series.pie.innerRadius>1?options.series.pie.innerRadius:maxRadius*options.series.pie.innerRadius;layer.globalCompositeOperation="destination-out",layer.beginPath(),layer.fillStyle=options.series.pie.stroke.color,layer.arc(0,0,innerRadius,0,2*Math.PI,!1),layer.fill(),layer.closePath(),layer.restore(),layer.save(),layer.beginPath(),layer.strokeStyle=options.series.pie.stroke.color,layer.arc(0,0,innerRadius,0,2*Math.PI,!1),layer.stroke(),layer.closePath(),layer.restore()}}function isPointInPoly(poly,pt){for(var c=!1,i=-1,l=poly.length,j=l-1;++i<l;j=i)(poly[i][1]<=pt[1]&&pt[1]<poly[j][1]||poly[j][1]<=pt[1]&&pt[1]<poly[i][1])&&pt[0]<(poly[j][0]-poly[i][0])*(pt[1]-poly[i][1])/(poly[j][1]-poly[i][1])+poly[i][0]&&(c=!c);return c}function findNearbySlice(mouseX,mouseY){for(var x,y,slices=plot.getData(),options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius,i=0;i<slices.length;++i){var s=slices[i];if(s.pie.show){if(ctx.save(),ctx.beginPath(),ctx.moveTo(0,0),ctx.arc(0,0,radius,s.startAngle,s.startAngle+s.angle/2,!1),ctx.arc(0,0,radius,s.startAngle+s.angle/2,s.startAngle+s.angle,!1),ctx.closePath(),x=mouseX-centerLeft,y=mouseY-centerTop,ctx.isPointInPath){if(ctx.isPointInPath(mouseX-centerLeft,mouseY-centerTop))return ctx.restore(),{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}else{var p1X=radius*Math.cos(s.startAngle),p1Y=radius*Math.sin(s.startAngle),p2X=radius*Math.cos(s.startAngle+s.angle/4),p2Y=radius*Math.sin(s.startAngle+s.angle/4),p3X=radius*Math.cos(s.startAngle+s.angle/2),p3Y=radius*Math.sin(s.startAngle+s.angle/2),p4X=radius*Math.cos(s.startAngle+s.angle/1.5),p4Y=radius*Math.sin(s.startAngle+s.angle/1.5),p5X=radius*Math.cos(s.startAngle+s.angle),p5Y=radius*Math.sin(s.startAngle+s.angle),arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]],arrPoint=[x,y];if(isPointInPoly(arrPoly,arrPoint))return ctx.restore(),{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}ctx.restore()}}return null}function onMouseMove(e){triggerClickHoverEvent("plothover",e)}function onClick(e){triggerClickHoverEvent("plotclick",e)}function triggerClickHoverEvent(eventname,e){var offset=plot.offset(),canvasX=parseInt(e.pageX-offset.left),canvasY=parseInt(e.pageY-offset.top),item=findNearbySlice(canvasX,canvasY);if(options.grid.autoHighlight)for(var i=0;i<highlights.length;++i){var h=highlights[i];h.auto!=eventname||item&&h.series==item.series||unhighlight(h.series)}item&&highlight(item.series,eventname);var pos={pageX:e.pageX,pageY:e.pageY};target.trigger(eventname,[pos,item])}function highlight(s,auto){var i=indexOfHighlight(s);-1==i?(highlights.push({series:s,auto:auto}),plot.triggerRedrawOverlay()):auto||(highlights[i].auto=!1)}function unhighlight(s){null==s&&(highlights=[],plot.triggerRedrawOverlay());var i=indexOfHighlight(s);-1!=i&&(highlights.splice(i,1),plot.triggerRedrawOverlay())}function indexOfHighlight(s){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s)return i}return-1}function drawOverlay(plot,octx){function drawHighlight(series){series.angle<=0||isNaN(series.angle)||(octx.fillStyle="rgba(255, 255, 255, "+options.series.pie.highlight.opacity+")",octx.beginPath(),Math.abs(series.angle-2*Math.PI)>1e-9&&octx.moveTo(0,0),octx.arc(0,0,radius,series.startAngle,series.startAngle+series.angle/2,!1),octx.arc(0,0,radius,series.startAngle+series.angle/2,series.startAngle+series.angle,!1),octx.closePath(),octx.fill())}var options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;octx.save(),octx.translate(centerLeft,centerTop),octx.scale(1,options.series.pie.tilt);for(var i=0;i<highlights.length;++i)drawHighlight(highlights[i].series);drawDonutHole(octx),octx.restore()}var canvas=null,target=null,options=null,maxRadius=null,centerLeft=null,centerTop=null,processed=!1,ctx=null,highlights=[];plot.hooks.processOptions.push(function(plot,options){options.series.pie.show&&(options.grid.show=!1,"auto"==options.series.pie.label.show&&(options.legend.show?options.series.pie.label.show=!1:options.series.pie.label.show=!0),"auto"==options.series.pie.radius&&(options.series.pie.label.show?options.series.pie.radius=.75:options.series.pie.radius=1),options.series.pie.tilt>1?options.series.pie.tilt=1:options.series.pie.tilt<0&&(options.series.pie.tilt=0))}),plot.hooks.bindEvents.push(function(plot,eventHolder){var options=plot.getOptions();options.series.pie.show&&(options.grid.hoverable&&eventHolder.unbind("mousemove").mousemove(onMouseMove),options.grid.clickable&&eventHolder.unbind("click").click(onClick))}),plot.hooks.processDatapoints.push(function(plot,series,data,datapoints){var options=plot.getOptions();options.series.pie.show&&processDatapoints(plot,series,data,datapoints)}),plot.hooks.drawOverlay.push(function(plot,octx){var options=plot.getOptions();options.series.pie.show&&drawOverlay(plot,octx)}),plot.hooks.draw.push(function(plot,newCtx){var options=plot.getOptions();options.series.pie.show&&draw(plot,newCtx)})}var REDRAW_ATTEMPTS=10,REDRAW_SHRINK=.95,options={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(label,slice){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+slice.color+";'>"+label+"<br/>"+Math.round(slice.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};$.plot.plugins.push({init:init,options:options,name:"pie",version:"1.1"})}(jQuery),function($){function init(plot){function findMatchingSeries(s,allseries){for(var res=null,i=0;i<allseries.length&&s!=allseries[i];++i)allseries[i].stack==s.stack&&(res=allseries[i]);return res}function stackData(plot,s,datapoints){if(null!=s.stack&&s.stack!==!1){var other=findMatchingSeries(s,plot.getData());if(other){for(var px,py,intery,qx,qy,bottom,l,m,ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],withlines=s.lines.show,horizontal=s.bars.horizontal,withbottom=ps>2&&(horizontal?datapoints.format[2].x:datapoints.format[2].y),withsteps=withlines&&s.lines.steps,fromgap=!0,keyOffset=horizontal?1:0,accumulateOffset=horizontal?0:1,i=0,j=0;;){if(i>=points.length)break;if(l=newpoints.length,null==points[i]){for(m=0;ps>m;++m)newpoints.push(points[i+m]);i+=ps}else if(j>=otherpoints.length){if(!withlines)for(m=0;ps>m;++m)newpoints.push(points[i+m]);i+=ps}else if(null==otherpoints[j]){for(m=0;ps>m;++m)newpoints.push(null);fromgap=!0,j+=otherps}else{if(px=points[i+keyOffset],py=points[i+accumulateOffset],qx=otherpoints[j+keyOffset],qy=otherpoints[j+accumulateOffset],bottom=0,px==qx){for(m=0;ps>m;++m)newpoints.push(points[i+m]);newpoints[l+accumulateOffset]+=qy,bottom=qy,i+=ps,j+=otherps}else if(px>qx){if(withlines&&i>0&&null!=points[i-ps]){for(intery=py+(points[i-ps+accumulateOffset]-py)*(qx-px)/(points[i-ps+keyOffset]-px),newpoints.push(qx),newpoints.push(intery+qy),m=2;ps>m;++m)newpoints.push(points[i+m]);bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;ps>m;++m)newpoints.push(points[i+m]);withlines&&j>0&&null!=otherpoints[j-otherps]&&(bottom=qy+(otherpoints[j-otherps+accumulateOffset]-qy)*(px-qx)/(otherpoints[j-otherps+keyOffset]-qx)),newpoints[l+accumulateOffset]+=bottom,i+=ps}fromgap=!1,l!=newpoints.length&&withbottom&&(newpoints[l+2]+=bottom)}if(withsteps&&l!=newpoints.length&&l>0&&null!=newpoints[l]&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;ps>m;++m)newpoints[l+ps+m]=newpoints[l+m];newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}}}plot.hooks.processDatapoints.push(stackData)}var options={series:{stack:null}};$.plot.plugins.push({init:init,options:options,name:"stack",version:"1.2"})}(jQuery),function($){function init(plot){function processOptions(plot,options){options.series.curvedLines.active&&plot.hooks.processDatapoints.unshift(processDatapoints)}function processDatapoints(plot,series,datapoints){var nrPoints=datapoints.points.length/datapoints.pointsize,EPSILON=.5;if(1==series.curvedLines.apply&&void 0===series.originSeries&&nrPoints>1+EPSILON)if(series.lines.fill){var pointsTop=calculateCurvePoints(datapoints,series.curvedLines,1),pointsBottom=calculateCurvePoints(datapoints,series.curvedLines,2);datapoints.pointsize=3,datapoints.points=[];for(var j=0,k=0,i=0,ps=2;i<pointsTop.length||j<pointsBottom.length;)pointsTop[i]==pointsBottom[j]?(datapoints.points[k]=pointsTop[i],datapoints.points[k+1]=pointsTop[i+1],datapoints.points[k+2]=pointsBottom[j+1],j+=ps,i+=ps):pointsTop[i]<pointsBottom[j]?(datapoints.points[k]=pointsTop[i],datapoints.points[k+1]=pointsTop[i+1],datapoints.points[k+2]=k>0?datapoints.points[k-1]:null,i+=ps):(datapoints.points[k]=pointsBottom[j],datapoints.points[k+1]=k>1?datapoints.points[k-2]:null,datapoints.points[k+2]=pointsBottom[j+1],j+=ps),k+=3}else series.lines.lineWidth>0&&(datapoints.points=calculateCurvePoints(datapoints,series.curvedLines,1),datapoints.pointsize=2)}function calculateCurvePoints(datapoints,curvedLinesOptions,yPos){var points=datapoints.points,ps=datapoints.pointsize,num=curvedLinesOptions.curvePointFactor*(points.length/ps),xdata=new Array,ydata=new Array,curX=-1,curY=-1,j=0;if(curvedLinesOptions.fit){var fpDist;if("undefined"==typeof curvedLinesOptions.fitPointDist){var minX=points[0],maxX=points[points.length-ps];fpDist=(maxX-minX)/5e4}else fpDist=curvedLinesOptions.fitPointDist;for(var i=0;i<points.length;i+=ps){var frontX,backX;curX=i,curY=i+yPos,frontX=points[curX]-fpDist,backX=points[curX]+fpDist;for(var factor=2;frontX==points[curX]||backX==points[curX];)frontX=points[curX]-fpDist*factor,backX=points[curX]+fpDist*factor,factor++;xdata[j]=frontX,ydata[j]=points[curY],j++,xdata[j]=points[curX],ydata[j]=points[curY],j++,xdata[j]=backX,ydata[j]=points[curY],j++}}else for(var i=0;i<points.length;i+=ps)curX=i,curY=i+yPos,xdata[j]=points[curX],ydata[j]=points[curY],j++;var n=xdata.length,y2=new Array,delta=new Array;y2[0]=0,y2[n-1]=0,delta[0]=0;for(var i=1;n-1>i;++i){var d=xdata[i+1]-xdata[i-1];if(0==d)return[];var s=(xdata[i]-xdata[i-1])/d,p=s*y2[i-1]+2;y2[i]=(s-1)/p,delta[i]=(ydata[i+1]-ydata[i])/(xdata[i+1]-xdata[i])-(ydata[i]-ydata[i-1])/(xdata[i]-xdata[i-1]),delta[i]=(6*delta[i]/(xdata[i+1]-xdata[i-1])-s*delta[i-1])/p}for(var j=n-2;j>=0;--j)y2[j]=y2[j]*y2[j+1]+delta[j];var step=(xdata[n-1]-xdata[0])/(num-1),xnew=new Array,ynew=new Array,result=new Array;for(xnew[0]=xdata[0],ynew[0]=ydata[0],result.push(xnew[0]),result.push(ynew[0]),j=1;num>j;++j){xnew[j]=xnew[0]+j*step;for(var max=n-1,min=0;max-min>1;){var k=Math.round((max+min)/2);xdata[k]>xnew[j]?max=k:min=k}var h=xdata[max]-xdata[min];if(0==h)return[];var a=(xdata[max]-xnew[j])/h,b=(xnew[j]-xdata[min])/h;ynew[j]=a*ydata[min]+b*ydata[max]+((a*a*a-a)*y2[min]+(b*b*b-b)*y2[max])*(h*h)/6,result.push(xnew[j]),result.push(ynew[j])}return result}plot.hooks.processOptions.push(processOptions)}var options={series:{curvedLines:{active:!1,apply:!1,fit:!1,curvePointFactor:20,fitPointDist:void 0}}};$.plot.plugins.push({init:init,options:options,name:"curvedLines",version:"0.6.4"})}(jQuery),function($){var defaultOptions={tooltip:{show:!1,cssClass:"flotTip",content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,lines:!1,onHover:function(flotItem,$tooltipEl){},$compat:!1}};defaultOptions.tooltipOpts=defaultOptions.tooltip;var FlotTooltip=function(plot){this.tipPosition={x:0,y:0},this.init(plot)};FlotTooltip.prototype.init=function(plot){function mouseMove(e){var pos={};pos.x=e.pageX,pos.y=e.pageY,plot.setTooltipPosition(pos)}function plothover(event,pos,item){var lineDistance=function(p1x,p1y,p2x,p2y){return Math.sqrt((p2x-p1x)*(p2x-p1x)+(p2y-p1y)*(p2y-p1y))},dotLineLength=function(x,y,x0,y0,x1,y1,o){if(!o||(o=function(x,y,x0,y0,x1,y1){if("undefined"!=typeof x0)return{x:x0,y:y};if("undefined"!=typeof y0)return{x:x,y:y0};var left,tg=-1/((y1-y0)/(x1-x0));return{x:left=(x1*(x*tg-y+y0)+x0*(x*-tg+y-y1))/(tg*(x1-x0)+y0-y1),y:tg*left-tg*x+y}}(x,y,x0,y0,x1,y1),o.x>=Math.min(x0,x1)&&o.x<=Math.max(x0,x1)&&o.y>=Math.min(y0,y1)&&o.y<=Math.max(y0,y1))){var a=y0-y1,b=x1-x0,c=x0*y1-y0*x1;return Math.abs(a*x+b*y+c)/Math.sqrt(a*a+b*b)}var l1=lineDistance(x,y,x0,y0),l2=lineDistance(x,y,x1,y1);return l1>l2?l2:l1};if(item)plot.showTooltip(item,pos);else if(that.plotOptions.series.lines.show&&that.tooltipOptions.lines===!0){var maxDistance=that.plotOptions.grid.mouseActiveRadius,closestTrace={distance:maxDistance+1};$.each(plot.getData(),function(i,series){for(var xBeforeIndex=0,xAfterIndex=-1,j=1;j<series.data.length;j++)series.data[j-1][0]<=pos.x&&series.data[j][0]>=pos.x&&(xBeforeIndex=j-1,xAfterIndex=j);if(-1===xAfterIndex)return void plot.hideTooltip();var pointPrev={x:series.data[xBeforeIndex][0],y:series.data[xBeforeIndex][1]},pointNext={x:series.data[xAfterIndex][0],y:series.data[xAfterIndex][1]},distToLine=dotLineLength(series.xaxis.p2c(pos.x),series.yaxis.p2c(pos.y),series.xaxis.p2c(pointPrev.x),series.yaxis.p2c(pointPrev.y),series.xaxis.p2c(pointNext.x),series.yaxis.p2c(pointNext.y),!1);if(distToLine<closestTrace.distance){var closestIndex=lineDistance(pointPrev.x,pointPrev.y,pos.x,pos.y)<lineDistance(pos.x,pos.y,pointNext.x,pointNext.y)?xBeforeIndex:xAfterIndex,pointOnLine=(series.datapoints.pointsize,[pos.x,pointPrev.y+(pointNext.y-pointPrev.y)*((pos.x-pointPrev.x)/(pointNext.x-pointPrev.x))]),item={datapoint:pointOnLine,dataIndex:closestIndex,series:series,seriesIndex:i};closestTrace={distance:distToLine,item:item}}}),closestTrace.distance<maxDistance+1?plot.showTooltip(closestTrace.item,pos):plot.hideTooltip()}else plot.hideTooltip()}var that=this,plotPluginsLength=$.plot.plugins.length;if(this.plotPlugins=[],plotPluginsLength)for(var p=0;plotPluginsLength>p;p++)this.plotPlugins.push($.plot.plugins[p].name);plot.hooks.bindEvents.push(function(plot,eventHolder){if(that.plotOptions=plot.getOptions(),"boolean"==typeof that.plotOptions.tooltip&&(that.plotOptions.tooltipOpts.show=that.plotOptions.tooltip,that.plotOptions.tooltip=that.plotOptions.tooltipOpts,delete that.plotOptions.tooltipOpts),that.plotOptions.tooltip.show!==!1&&"undefined"!=typeof that.plotOptions.tooltip.show){that.tooltipOptions=that.plotOptions.tooltip,that.tooltipOptions.$compat?(that.wfunc="width",that.hfunc="height"):(that.wfunc="innerWidth",that.hfunc="innerHeight");that.getDomElement();$(plot.getPlaceholder()).bind("plothover",plothover),$(eventHolder).bind("mousemove",mouseMove)}}),plot.hooks.shutdown.push(function(plot,eventHolder){$(plot.getPlaceholder()).unbind("plothover",plothover),$(eventHolder).unbind("mousemove",mouseMove)}),plot.setTooltipPosition=function(pos){var $tip=that.getDomElement(),totalTipWidth=$tip.outerWidth()+that.tooltipOptions.shifts.x,totalTipHeight=$tip.outerHeight()+that.tooltipOptions.shifts.y;pos.x-$(window).scrollLeft()>$(window)[that.wfunc]()-totalTipWidth&&(pos.x-=totalTipWidth),pos.y-$(window).scrollTop()>$(window)[that.hfunc]()-totalTipHeight&&(pos.y-=totalTipHeight),that.tipPosition.x=pos.x,that.tipPosition.y=pos.y},plot.showTooltip=function(target,position){var $tip=that.getDomElement(),tipText=that.stringFormat(that.tooltipOptions.content,target);""!==tipText&&($tip.html(tipText),plot.setTooltipPosition({x:position.pageX,y:position.pageY}),$tip.css({left:that.tipPosition.x+that.tooltipOptions.shifts.x,top:that.tipPosition.y+that.tooltipOptions.shifts.y}).show(),"function"==typeof that.tooltipOptions.onHover&&that.tooltipOptions.onHover(target,$tip))},plot.hideTooltip=function(){that.getDomElement().hide().html("")}},FlotTooltip.prototype.getDomElement=function(){var $tip=$("."+this.tooltipOptions.cssClass);return 0===$tip.length&&($tip=$("<div />").addClass(this.tooltipOptions.cssClass),$tip.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&$tip.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),$tip},FlotTooltip.prototype.stringFormat=function(content,item){var x,y,customText,p,percentPattern=/%p\.{0,1}(\d{0,})/,seriesPattern=/%s/,colorPattern=/%c/,xLabelPattern=/%lx/,yLabelPattern=/%ly/,xPattern=/%x\.{0,1}(\d{0,})/,yPattern=/%y\.{0,1}(\d{0,})/,xPatternWithoutPrecision="%x",yPatternWithoutPrecision="%y",customTextPattern="%ct";if("undefined"!=typeof item.series.threshold?(x=item.datapoint[0],y=item.datapoint[1],customText=item.datapoint[2]):"undefined"!=typeof item.series.lines&&item.series.lines.steps?(x=item.series.datapoints.points[2*item.dataIndex],y=item.series.datapoints.points[2*item.dataIndex+1],customText=""):(x=item.series.data[item.dataIndex][0],y=item.series.data[item.dataIndex][1],customText=item.series.data[item.dataIndex][2]),null===item.series.label&&item.series.originSeries&&(item.series.label=item.series.originSeries.label),"function"==typeof content&&(content=content(item.series.label,x,y,item)),"boolean"==typeof content&&!content)return"";if("undefined"!=typeof item.series.percent?p=item.series.percent:"undefined"!=typeof item.series.percents&&(p=item.series.percents[item.dataIndex]),"number"==typeof p&&(content=this.adjustValPrecision(percentPattern,content,p)),content="undefined"!=typeof item.series.label?content.replace(seriesPattern,item.series.label):content.replace(seriesPattern,""),content="undefined"!=typeof item.series.color?content.replace(colorPattern,item.series.color):content.replace(colorPattern,""),content=this.hasAxisLabel("xaxis",item)?content.replace(xLabelPattern,item.series.xaxis.options.axisLabel):content.replace(xLabelPattern,""),content=this.hasAxisLabel("yaxis",item)?content.replace(yLabelPattern,item.series.yaxis.options.axisLabel):content.replace(yLabelPattern,""),this.isTimeMode("xaxis",item)&&this.isXDateFormat(item)&&(content=content.replace(xPattern,this.timestampToDate(x,this.tooltipOptions.xDateFormat,item.series.xaxis.options))),this.isTimeMode("yaxis",item)&&this.isYDateFormat(item)&&(content=content.replace(yPattern,this.timestampToDate(y,this.tooltipOptions.yDateFormat,item.series.yaxis.options))),"number"==typeof x&&(content=this.adjustValPrecision(xPattern,content,x)),"number"==typeof y&&(content=this.adjustValPrecision(yPattern,content,y)),"undefined"!=typeof item.series.xaxis.ticks){var ticks;ticks=this.hasRotatedXAxisTicks(item)?"rotatedTicks":"ticks";var tickIndex=item.dataIndex+item.seriesIndex;for(var index in item.series.xaxis[ticks])if(item.series.xaxis[ticks].hasOwnProperty(tickIndex)&&!this.isTimeMode("xaxis",item)){var valueX=this.isCategoriesMode("xaxis",item)?item.series.xaxis[ticks][tickIndex].label:item.series.xaxis[ticks][tickIndex].v;valueX===x&&(content=content.replace(xPattern,item.series.xaxis[ticks][tickIndex].label))}}if("undefined"!=typeof item.series.yaxis.ticks)for(var index in item.series.yaxis.ticks)if(item.series.yaxis.ticks.hasOwnProperty(index)){var valueY=this.isCategoriesMode("yaxis",item)?item.series.yaxis.ticks[index].label:item.series.yaxis.ticks[index].v;valueY===y&&(content=content.replace(yPattern,item.series.yaxis.ticks[index].label))}return"undefined"!=typeof item.series.xaxis.tickFormatter&&(content=content.replace(xPatternWithoutPrecision,item.series.xaxis.tickFormatter(x,item.series.xaxis).replace(/\$/g,"$$"))),"undefined"!=typeof item.series.yaxis.tickFormatter&&(content=content.replace(yPatternWithoutPrecision,item.series.yaxis.tickFormatter(y,item.series.yaxis).replace(/\$/g,"$$"))),customText&&(content=content.replace(customTextPattern,customText)),content},FlotTooltip.prototype.isTimeMode=function(axisName,item){return"undefined"!=typeof item.series[axisName].options.mode&&"time"===item.series[axisName].options.mode},FlotTooltip.prototype.isXDateFormat=function(item){return"undefined"!=typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},FlotTooltip.prototype.isYDateFormat=function(item){return"undefined"!=typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},FlotTooltip.prototype.isCategoriesMode=function(axisName,item){return"undefined"!=typeof item.series[axisName].options.mode&&"categories"===item.series[axisName].options.mode},FlotTooltip.prototype.timestampToDate=function(tmst,dateFormat,options){var theDate=$.plot.dateGenerator(tmst,options);return $.plot.formatDate(theDate,dateFormat,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},FlotTooltip.prototype.adjustValPrecision=function(pattern,content,value){var precision,matchResult=content.match(pattern);return null!==matchResult&&""!==RegExp.$1&&(precision=RegExp.$1,value=value.toFixed(precision),content=content.replace(pattern,value)),content},FlotTooltip.prototype.hasAxisLabel=function(axisName,item){return-1!==$.inArray(this.plotPlugins,"axisLabels")&&"undefined"!=typeof item.series[axisName].options.axisLabel&&item.series[axisName].options.axisLabel.length>0},FlotTooltip.prototype.hasRotatedXAxisTicks=function(item){return-1!==$.inArray(this.plotPlugins,"tickRotor")&&"undefined"!=typeof item.series.xaxis.rotatedTicks};var init=function(plot){new FlotTooltip(plot)};$.plot.plugins.push({
init:init,options:defaultOptions,name:"tooltip",version:"0.8.5"})}(jQuery),function($){function floorInBase(n,base){return base*Math.floor(n/base)}function formatDate(d,fmt,monthNames,dayNames){if("function"==typeof d.strftime)return d.strftime(fmt);var leftPad=function(n,pad){return n=""+n,pad=""+(null==pad?"0":pad),1==n.length?pad+n:n},r=[],escape=!1,hours=d.getHours(),isAM=12>hours;null==monthNames&&(monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==dayNames&&(dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var hours12;hours12=hours>12?hours-12:0==hours?12:hours;for(var i=0;i<fmt.length;++i){var c=fmt.charAt(i);if(escape){switch(c){case"a":c=""+dayNames[d.getDay()];break;case"b":c=""+monthNames[d.getMonth()];break;case"d":c=leftPad(d.getDate());break;case"e":c=leftPad(d.getDate()," ");break;case"h":case"H":c=leftPad(hours);break;case"I":c=leftPad(hours12);break;case"l":c=leftPad(hours12," ");break;case"m":c=leftPad(d.getMonth()+1);break;case"M":c=leftPad(d.getMinutes());break;case"q":c=""+(Math.floor(d.getMonth()/3)+1);break;case"S":c=leftPad(d.getSeconds());break;case"y":c=leftPad(d.getFullYear()%100);break;case"Y":c=""+d.getFullYear();break;case"p":c=isAM?"am":"pm";break;case"P":c=isAM?"AM":"PM";break;case"w":c=""+d.getDay()}r.push(c),escape=!1}else"%"==c?escape=!0:r.push(c)}return r.join("")}function makeUtcWrapper(d){function addProxyMethod(sourceObj,sourceMethod,targetObj,targetMethod){sourceObj[sourceMethod]=function(){return targetObj[targetMethod].apply(targetObj,arguments)}}var utc={date:d};void 0!=d.strftime&&addProxyMethod(utc,"strftime",d,"strftime"),addProxyMethod(utc,"getTime",d,"getTime"),addProxyMethod(utc,"setTime",d,"setTime");for(var props=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],p=0;p<props.length;p++)addProxyMethod(utc,"get"+props[p],d,"getUTC"+props[p]),addProxyMethod(utc,"set"+props[p],d,"setUTC"+props[p]);return utc}function dateGenerator(ts,opts){if("browser"==opts.timezone)return new Date(ts);if(opts.timezone&&"utc"!=opts.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var d=new timezoneJS.Date;return d.setTimezone(opts.timezone),d.setTime(ts),d}return makeUtcWrapper(new Date(ts))}return makeUtcWrapper(new Date(ts))}function init(plot){plot.hooks.processOptions.push(function(plot,options){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;"time"==opts.mode&&(axis.tickGenerator=function(axis){var ticks=[],d=dateGenerator(axis.min,opts),minSize=0,spec=opts.tickSize&&"quarter"===opts.tickSize[1]||opts.minTickSize&&"quarter"===opts.minTickSize[1]?specQuarters:specMonths;null!=opts.minTickSize&&(minSize="number"==typeof opts.tickSize?opts.tickSize:opts.minTickSize[0]*timeUnitSize[opts.minTickSize[1]]);for(var i=0;i<spec.length-1&&!(axis.delta<(spec[i][0]*timeUnitSize[spec[i][1]]+spec[i+1][0]*timeUnitSize[spec[i+1][1]])/2&&spec[i][0]*timeUnitSize[spec[i][1]]>=minSize);++i);var size=spec[i][0],unit=spec[i][1];if("year"==unit){if(null!=opts.minTickSize&&"year"==opts.minTickSize[1])size=Math.floor(opts.minTickSize[0]);else{var magn=Math.pow(10,Math.floor(Math.log(axis.delta/timeUnitSize.year)/Math.LN10)),norm=axis.delta/timeUnitSize.year/magn;size=1.5>norm?1:3>norm?2:7.5>norm?5:10,size*=magn}1>size&&(size=1)}axis.tickSize=opts.tickSize||[size,unit];var tickSize=axis.tickSize[0];unit=axis.tickSize[1];var step=tickSize*timeUnitSize[unit];"second"==unit?d.setSeconds(floorInBase(d.getSeconds(),tickSize)):"minute"==unit?d.setMinutes(floorInBase(d.getMinutes(),tickSize)):"hour"==unit?d.setHours(floorInBase(d.getHours(),tickSize)):"month"==unit?d.setMonth(floorInBase(d.getMonth(),tickSize)):"quarter"==unit?d.setMonth(3*floorInBase(d.getMonth()/3,tickSize)):"year"==unit&&d.setFullYear(floorInBase(d.getFullYear(),tickSize)),d.setMilliseconds(0),step>=timeUnitSize.minute&&d.setSeconds(0),step>=timeUnitSize.hour&&d.setMinutes(0),step>=timeUnitSize.day&&d.setHours(0),step>=4*timeUnitSize.day&&d.setDate(1),step>=2*timeUnitSize.month&&d.setMonth(floorInBase(d.getMonth(),3)),step>=2*timeUnitSize.quarter&&d.setMonth(floorInBase(d.getMonth(),6)),step>=timeUnitSize.year&&d.setMonth(0);var prev,carry=0,v=Number.NaN;do if(prev=v,v=d.getTime(),ticks.push(v),"month"==unit||"quarter"==unit)if(1>tickSize){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+("quarter"==unit?3:1));var end=d.getTime();d.setTime(v+carry*timeUnitSize.hour+(end-start)*tickSize),carry=d.getHours(),d.setHours(0)}else d.setMonth(d.getMonth()+tickSize*("quarter"==unit?3:1));else"year"==unit?d.setFullYear(d.getFullYear()+tickSize):d.setTime(v+step);while(v<axis.max&&v!=prev);return ticks},axis.tickFormatter=function(v,axis){var d=dateGenerator(v,axis.options);if(null!=opts.timeformat)return formatDate(d,opts.timeformat,opts.monthNames,opts.dayNames);var fmt,useQuarters=axis.options.tickSize&&"quarter"==axis.options.tickSize[1]||axis.options.minTickSize&&"quarter"==axis.options.minTickSize[1],t=axis.tickSize[0]*timeUnitSize[axis.tickSize[1]],span=axis.max-axis.min,suffix=opts.twelveHourClock?" %p":"",hourCode=opts.twelveHourClock?"%I":"%H";fmt=t<timeUnitSize.minute?hourCode+":%M:%S"+suffix:t<timeUnitSize.day?span<2*timeUnitSize.day?hourCode+":%M"+suffix:"%b %d "+hourCode+":%M"+suffix:t<timeUnitSize.month?"%b %d":useQuarters&&t<timeUnitSize.quarter||!useQuarters&&t<timeUnitSize.year?span<timeUnitSize.year?"%b":"%b %Y":useQuarters&&t<timeUnitSize.year?span<timeUnitSize.year?"Q%q":"Q%q %Y":"%Y";var rt=formatDate(d,fmt,opts.monthNames,opts.dayNames);return rt})})})}var options={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},timeUnitSize={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},baseSpec=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],specMonths=baseSpec.concat([[3,"month"],[6,"month"],[1,"year"]]),specQuarters=baseSpec.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);$.plot.plugins.push({init:init,options:options,name:"time",version:"1.0"}),$.plot.formatDate=formatDate,$.plot.dateGenerator=dateGenerator}(jQuery),function(root,factory){"object"==typeof exports?module.exports=factory(require("angular")):"function"==typeof define&&define.amd?define(["angular"],factory):factory(root.angular)}(this,function(angular){!function(angular){"use strict";return angular.module("easypiechart",[]).directive("easypiechart",[function(){return{restrict:"A",require:"?ngModel",scope:{percent:"=",options:"="},link:function(scope,element,attrs){scope.percent=scope.percent||0;var options={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,size:110,rotate:0,animate:{duration:1e3,enabled:!0}};scope.options=angular.extend(options,scope.options);var pieChart=new EasyPieChart(element[0],options);scope.$watch("percent",function(newVal,oldVal){pieChart.update(newVal)})}}}])}(angular);var CanvasRenderer=function(el,options){var cachedBackground,canvas=document.createElement("canvas");el.appendChild(canvas),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(canvas);var ctx=canvas.getContext("2d");canvas.width=canvas.height=options.size;var scaleBy=1;window.devicePixelRatio>1&&(scaleBy=window.devicePixelRatio,canvas.style.width=canvas.style.height=[options.size,"px"].join(""),canvas.width=canvas.height=options.size*scaleBy,ctx.scale(scaleBy,scaleBy)),ctx.translate(options.size/2,options.size/2),ctx.rotate((-0.5+options.rotate/180)*Math.PI);var radius=(options.size-options.lineWidth)/2;options.scaleColor&&options.scaleLength&&(radius-=options.scaleLength+2),Date.now=Date.now||function(){return+new Date};var drawCircle=function(color,lineWidth,percent){percent=Math.min(Math.max(-1,percent||0),1);var isNegative=0>=percent?!0:!1;ctx.beginPath(),ctx.arc(0,0,radius,0,2*Math.PI*percent,isNegative),ctx.strokeStyle=color,ctx.lineWidth=lineWidth,ctx.stroke()},drawScale=function(){var offset,length;ctx.lineWidth=1,ctx.fillStyle=options.scaleColor,ctx.save();for(var i=24;i>0;--i)i%6===0?(length=options.scaleLength,offset=0):(length=.6*options.scaleLength,offset=options.scaleLength-length),ctx.fillRect(-options.size/2+offset,0,length,1),ctx.rotate(Math.PI/12);ctx.restore()},reqAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}(),drawBackground=function(){options.scaleColor&&drawScale(),options.trackColor&&drawCircle(options.trackColor,options.trackWidth||options.lineWidth,1)};this.getCanvas=function(){return canvas},this.getCtx=function(){return ctx},this.clear=function(){ctx.clearRect(options.size/-2,options.size/-2,options.size,options.size)},this.draw=function(percent){options.scaleColor||options.trackColor?ctx.getImageData&&ctx.putImageData?cachedBackground?ctx.putImageData(cachedBackground,0,0):(drawBackground(),cachedBackground=ctx.getImageData(0,0,options.size*scaleBy,options.size*scaleBy)):(this.clear(),drawBackground()):this.clear(),ctx.lineCap=options.lineCap;var color;color="function"==typeof options.barColor?options.barColor(percent):options.barColor,drawCircle(color,options.lineWidth,percent/100)}.bind(this),this.animate=function(from,to){var startTime=Date.now();options.onStart(from,to);var animation=function(){var process=Math.min(Date.now()-startTime,options.animate.duration),currentValue=options.easing(this,process,from,to-from,options.animate.duration);this.draw(currentValue),options.onStep(from,to,currentValue),process>=options.animate.duration?options.onStop(from,to):reqAnimationFrame(animation)}.bind(this);reqAnimationFrame(animation)}.bind(this)},EasyPieChart=function(el,opts){var defaultOptions={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,trackWidth:void 0,size:110,rotate:0,animate:{duration:1e3,enabled:!0},easing:function(x,t,b,c,d){return t/=d/2,1>t?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b},onStart:function(from,to){},onStep:function(from,to,currentValue){},onStop:function(from,to){}};if("undefined"!=typeof CanvasRenderer)defaultOptions.renderer=CanvasRenderer;else{if("undefined"==typeof SVGRenderer)throw new Error("Please load either the SVG- or the CanvasRenderer");defaultOptions.renderer=SVGRenderer}var options={},currentValue=0,init=function(){this.el=el,this.options=options;for(var i in defaultOptions)defaultOptions.hasOwnProperty(i)&&(options[i]=opts&&"undefined"!=typeof opts[i]?opts[i]:defaultOptions[i],"function"==typeof options[i]&&(options[i]=options[i].bind(this)));"string"==typeof options.easing&&"undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.easing[options.easing])?options.easing=jQuery.easing[options.easing]:options.easing=defaultOptions.easing,"number"==typeof options.animate&&(options.animate={duration:options.animate,enabled:!0}),"boolean"!=typeof options.animate||options.animate||(options.animate={duration:1e3,enabled:options.animate}),this.renderer=new options.renderer(el,options),this.renderer.draw(currentValue),el.dataset&&el.dataset.percent?this.update(parseFloat(el.dataset.percent)):el.getAttribute&&el.getAttribute("data-percent")&&this.update(parseFloat(el.getAttribute("data-percent")))}.bind(this);this.update=function(newValue){return newValue=parseFloat(newValue),options.animate.enabled?this.renderer.animate(currentValue,newValue):this.renderer.draw(newValue),currentValue=newValue,this}.bind(this),this.disableAnimation=function(){return options.animate.enabled=!1,this},this.enableAnimation=function(){return options.animate.enabled=!0,this},init()}}),function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeHolderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$nodeScope=null,$scope.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function($scope,$element){function countSubDepth(scope){var i,childNodes,count=0,nodes=scope.childNodes();for(i=0;i<nodes.length;i++)childNodes=nodes[i].$childNodesScope,childNodes&&(count=1,countSubDepth(childNodes));subDepth+=count}this.scope=$scope,$scope.$element=$element,$scope.$modelValue=null,$scope.$parentNodeScope=null,$scope.$childNodesScope=null,$scope.$parentNodesScope=null,$scope.$treeScope=null,$scope.$handleScope=null,$scope.$type="uiTreeNode",$scope.$$apply=!1,$scope.collapsed=!1,$scope.init=function(controllersArr){var treeNodesCtrl=controllersArr[0];$scope.$treeScope=controllersArr[1]?controllersArr[1].scope:null,$scope.$parentNodeScope=treeNodesCtrl.scope.$nodeScope,$scope.$modelValue=treeNodesCtrl.scope.$modelValue[$scope.$index],$scope.$parentNodesScope=treeNodesCtrl.scope,treeNodesCtrl.scope.initSubNode($scope),$element.on("$destroy",function(){treeNodesCtrl.scope.destroySubNode($scope)})},$scope.index=function(){return $scope.$parentNodesScope.$modelValue.indexOf($scope.$modelValue)},$scope.dragEnabled=function(){return!($scope.$treeScope&&!$scope.$treeScope.dragEnabled)},$scope.isSibling=function(targetNode){return $scope.$parentNodesScope==targetNode.$parentNodesScope},$scope.isChild=function(targetNode){var nodes=$scope.childNodes();return nodes&&nodes.indexOf(targetNode)>-1},$scope.prev=function(){var index=$scope.index();return index>0?$scope.siblings()[index-1]:null},$scope.siblings=function(){return $scope.$parentNodesScope.childNodes()},$scope.childNodesCount=function(){return $scope.childNodes()?$scope.childNodes().length:0},$scope.hasChild=function(){return $scope.childNodesCount()>0},$scope.childNodes=function(){return $scope.$childNodesScope&&$scope.$childNodesScope.$modelValue?$scope.$childNodesScope.childNodes():null},$scope.accept=function(sourceNode,destIndex){return $scope.$childNodesScope&&$scope.$childNodesScope.$modelValue&&$scope.$childNodesScope.accept(sourceNode,destIndex)},$scope.removeNode=function(){var node=$scope.remove();return $scope.$callbacks.removed(node),node},$scope.remove=function(){return $scope.$parentNodesScope.removeNode($scope)},$scope.toggle=function(){$scope.collapsed=!$scope.collapsed},$scope.collapse=function(){$scope.collapsed=!0},$scope.expand=function(){$scope.collapsed=!1},$scope.depth=function(){var parentNode=$scope.$parentNodeScope;return parentNode?parentNode.depth()+1:1};var subDepth=0;$scope.maxSubDepth=function(){return subDepth=0,$scope.$childNodesScope&&countSubDepth($scope.$childNodesScope),subDepth}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$modelValue=null,$scope.$nodeScope=null,$scope.$treeScope=null,$scope.$type="uiTreeNodes",$scope.$nodesMap={},$scope.nodropEnabled=!1,$scope.maxDepth=0,$scope.cloneEnabled=!1,$scope.initSubNode=function(subNode){return subNode.$modelValue?void($scope.$nodesMap[subNode.$modelValue.$$hashKey]=subNode):null},$scope.destroySubNode=function(subNode){return subNode.$modelValue?void($scope.$nodesMap[subNode.$modelValue.$$hashKey]=null):null},$scope.accept=function(sourceNode,destIndex){return $scope.$treeScope.$callbacks.accept(sourceNode,$scope,destIndex)},$scope.beforeDrag=function(sourceNode){return $scope.$treeScope.$callbacks.beforeDrag(sourceNode)},$scope.isParent=function(node){return node.$parentNodesScope==$scope},$scope.hasChild=function(){return $scope.$modelValue.length>0},$scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)},$scope.removeNode=function(node){var index=$scope.$modelValue.indexOf(node.$modelValue);return index>-1?($scope.safeApply(function(){$scope.$modelValue.splice(index,1)[0]}),node):null},$scope.insertNode=function(index,nodeData){$scope.safeApply(function(){$scope.$modelValue.splice(index,0,nodeData)})},$scope.childNodes=function(){var i,nodes=[];if($scope.$modelValue)for(i=0;i<$scope.$modelValue.length;i++)nodes.push($scope.$nodesMap[$scope.$modelValue[i].$$hashKey]);return nodes},$scope.depth=function(){return $scope.$nodeScope?$scope.$nodeScope.depth():0},$scope.outOfDepth=function(sourceNode){var maxDepth=$scope.maxDepth||$scope.$treeScope.maxDepth;return maxDepth>0?$scope.depth()+sourceNode.maxSubDepth()+1>maxDepth:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$nodesScope=null,$scope.$type="uiTree",$scope.$emptyElm=null,$scope.$callbacks=null,$scope.dragEnabled=!0,$scope.emptyPlaceHolderEnabled=!0,$scope.maxDepth=0,$scope.dragDelay=0,$scope.cloneEnabled=!1,$scope.nodropEnabled=!1,$scope.isEmpty=function(){return $scope.$nodesScope&&$scope.$nodesScope.$modelValue&&0===$scope.$nodesScope.$modelValue.length},$scope.place=function(placeElm){$scope.$nodesScope.$element.append(placeElm),$scope.$emptyElm.remove()},$scope.resetEmptyElement=function(){0===$scope.$nodesScope.$modelValue.length&&$scope.emptyPlaceHolderEnabled?$element.append($scope.$emptyElm):$scope.$emptyElm.remove()};var collapseOrExpand=function(scope,collapsed){var i,subScope,nodes=scope.childNodes();for(i=0;i<nodes.length;i++)collapsed?nodes[i].collapse():nodes[i].expand(),subScope=nodes[i].$childNodesScope,subScope&&collapseOrExpand(subScope,collapsed)};$scope.collapseAll=function(){collapseOrExpand($scope.$nodesScope,!0)},$scope.expandAll=function(){collapseOrExpand($scope.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(treeConfig,$window){return{restrict:"A",scope:!0,controller:"TreeController",link:function(scope,element,attrs){var callbacks={accept:null,beforeDrag:null},config={};angular.extend(config,treeConfig),config.treeClass&&element.addClass(config.treeClass),scope.$emptyElm=angular.element($window.document.createElement("div")),config.emptyTreeClass&&scope.$emptyElm.addClass(config.emptyTreeClass),scope.$watch("$nodesScope.$modelValue.length",function(){scope.$nodesScope.$modelValue&&scope.resetEmptyElement()},!0),scope.$watch(attrs.dragEnabled,function(val){"boolean"==typeof val&&(scope.dragEnabled=val)}),scope.$watch(attrs.emptyPlaceHolderEnabled,function(val){"boolean"==typeof val&&(scope.emptyPlaceHolderEnabled=val)}),scope.$watch(attrs.nodropEnabled,function(val){"boolean"==typeof val&&(scope.nodropEnabled=val)}),scope.$watch(attrs.cloneEnabled,function(val){"boolean"==typeof val&&(scope.cloneEnabled=val)}),scope.$watch(attrs.maxDepth,function(val){"number"==typeof val&&(scope.maxDepth=val)}),scope.$watch(attrs.dragDelay,function(val){"number"==typeof val&&(scope.dragDelay=val)}),callbacks.accept=function(sourceNodeScope,destNodesScope,destIndex){return destNodesScope.nodropEnabled||destNodesScope.outOfDepth(sourceNodeScope)?!1:!0},callbacks.beforeDrag=function(sourceNodeScope){return!0},callbacks.removed=function(node){},callbacks.dropped=function(event){},callbacks.dragStart=function(event){},callbacks.dragMove=function(event){},callbacks.dragStop=function(event){},callbacks.beforeDrop=function(event){},scope.$watch(attrs.uiTree,function(newVal,oldVal){angular.forEach(newVal,function(value,key){callbacks[key]&&"function"==typeof value&&(callbacks[key]=value)}),scope.$callbacks=callbacks},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(treeConfig){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(scope,element,attrs,treeNodeCtrl){var config={};angular.extend(config,treeConfig),config.handleClass&&element.addClass(config.handleClass),scope!=treeNodeCtrl.scope&&(scope.$nodeScope=treeNodeCtrl.scope,treeNodeCtrl.scope.$handleScope=scope)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","$uiTreeHelper","$window","$document","$timeout",function(treeConfig,$uiTreeHelper,$window,$document,$timeout){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(scope,element,attrs,controllersArr){var firstMoving,dragInfo,pos,placeElm,hiddenPlaceElm,dragElm,elements,document_height,document_width,dragStart,dragMove,dragEnd,dragStartEvent,dragMoveEvent,dragEndEvent,dragCancelEvent,dragDelay,bindDrag,keydownHandler,config={},hasTouch="ontouchstart"in window,treeScope=null,body=document.body,html=document.documentElement;angular.extend(config,treeConfig),config.nodeClass&&element.addClass(config.nodeClass),scope.init(controllersArr),scope.collapsed=!!$uiTreeHelper.getNodeAttribute(scope,"collapsed"),scope.$watch(attrs.collapsed,function(val){"boolean"==typeof val&&(scope.collapsed=val)}),scope.$watch("collapsed",function(val){$uiTreeHelper.setNodeAttribute(scope,"collapsed",val),attrs.$set("collapsed",val)}),dragStart=function(e){if((hasTouch||2!=e.button&&3!=e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var eventElmTagName,tagName,eventObj,tdElm,hStyle,eventElm=angular.element(e.target),eventScope=eventElm.scope();if(eventScope&&eventScope.$type&&!("uiTreeNode"!=eventScope.$type&&"uiTreeHandle"!=eventScope.$type||"uiTreeNode"==eventScope.$type&&eventScope.$handleScope||(eventElmTagName=eventElm.prop("tagName").toLowerCase(),"input"==eventElmTagName||"textarea"==eventElmTagName||"button"==eventElmTagName||"select"==eventElmTagName))){for(;eventElm&&eventElm[0]&&eventElm[0]!=element;){if($uiTreeHelper.nodrag(eventElm))return;eventElm=eventElm.parent()}scope.beforeDrag(scope)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),eventObj=$uiTreeHelper.eventObj(e),firstMoving=!0,dragInfo=$uiTreeHelper.dragInfo(scope),scope.$apply(function(){scope.$callbacks.dragStart(dragInfo.eventArgs(elements,pos))}),tagName=scope.$element.prop("tagName"),"tr"===tagName.toLowerCase()?(placeElm=angular.element($window.document.createElement(tagName)),tdElm=angular.element($window.document.createElement("td")).addClass(config.placeHolderClass),placeElm.append(tdElm)):placeElm=angular.element($window.document.createElement(tagName)).addClass(config.placeHolderClass),hiddenPlaceElm=angular.element($window.document.createElement(tagName)),config.hiddenClass&&hiddenPlaceElm.addClass(config.hiddenClass),pos=$uiTreeHelper.positionStarted(eventObj,scope.$element),placeElm.css("height",$uiTreeHelper.height(scope.$element)+"px"),dragElm=angular.element($window.document.createElement(scope.$parentNodesScope.$element.prop("tagName"))).addClass(scope.$parentNodesScope.$element.attr("class")).addClass(config.dragClass),dragElm.css("width",$uiTreeHelper.width(scope.$element)+"px"),dragElm.css("z-index",9999),hStyle=(scope.$element[0].querySelector(".angular-ui-tree-handle")||scope.$element[0]).currentStyle,hStyle&&(document.body.setAttribute("ui-tree-cursor",$document.find("body").css("cursor")||""),$document.find("body").css({cursor:hStyle.cursor+"!important"})),scope.$element.after(placeElm),scope.$element.after(hiddenPlaceElm),dragElm.append(scope.$element),$document.find("body").append(dragElm),dragElm.css({left:eventObj.pageX-pos.offsetX+"px",top:eventObj.pageY-pos.offsetY+"px"}),elements={placeholder:placeElm,dragging:dragElm},angular.element($document).bind("touchend",dragEndEvent),angular.element($document).bind("touchcancel",dragEndEvent),angular.element($document).bind("touchmove",dragMoveEvent),angular.element($document).bind("mouseup",dragEndEvent),angular.element($document).bind("mousemove",dragMoveEvent),angular.element($document).bind("mouseleave",dragCancelEvent),document_height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight),document_width=Math.max(body.scrollWidth,body.offsetWidth,html.clientWidth,html.scrollWidth,html.offsetWidth))}}},dragMove=function(e){var prev,next,leftElmPos,topElmPos,top_scroll,bottom_scroll,target,decrease,targetX,targetY,displayElm,targetNode,targetElm,isEmpty,targetOffset,targetBefore,eventObj=$uiTreeHelper.eventObj(e);if(dragElm){if(e.preventDefault(),$window.getSelection?$window.getSelection().removeAllRanges():$window.document.selection&&$window.document.selection.empty(),leftElmPos=eventObj.pageX-pos.offsetX,topElmPos=eventObj.pageY-pos.offsetY,0>leftElmPos&&(leftElmPos=0),0>topElmPos&&(topElmPos=0),topElmPos+10>document_height&&(topElmPos=document_height-10),leftElmPos+10>document_width&&(leftElmPos=document_width-10),dragElm.css({left:leftElmPos+"px",top:topElmPos+"px"}),top_scroll=window.pageYOffset||$window.document.documentElement.scrollTop,bottom_scroll=top_scroll+(window.innerHeight||$window.document.clientHeight||$window.document.clientHeight),bottom_scroll<eventObj.pageY&&document_height>=bottom_scroll&&window.scrollBy(0,10),top_scroll>eventObj.pageY&&window.scrollBy(0,-10),$uiTreeHelper.positionMoved(e,pos,firstMoving),firstMoving)return void(firstMoving=!1);if(pos.dirAx&&pos.distAxX>=config.levelThreshold&&(pos.distAxX=0,pos.distX>0&&(prev=dragInfo.prev(),prev&&!prev.collapsed&&prev.accept(scope,prev.childNodesCount())&&(prev.$childNodesScope.$element.append(placeElm),dragInfo.moveTo(prev.$childNodesScope,prev.childNodes(),prev.childNodesCount()))),pos.distX<0&&(next=dragInfo.next(),next||(target=dragInfo.parentNode(),target&&target.$parentNodesScope.accept(scope,target.index()+1)&&(target.$element.after(placeElm),dragInfo.moveTo(target.$parentNodesScope,target.siblings(),target.index()+1))))),decrease=$uiTreeHelper.offset(dragElm).left-$uiTreeHelper.offset(placeElm).left>=config.threshold,targetX=eventObj.pageX-$window.document.body.scrollLeft,targetY=eventObj.pageY-(window.pageYOffset||$window.document.documentElement.scrollTop),angular.isFunction(dragElm.hide)?dragElm.hide():(displayElm=dragElm[0].style.display,dragElm[0].style.display="none"),$window.document.elementFromPoint(targetX,targetY),targetElm=angular.element($window.document.elementFromPoint(targetX,targetY)),angular.isFunction(dragElm.show)?dragElm.show():dragElm[0].style.display=displayElm,!pos.dirAx){if(targetNode=targetElm.scope(),isEmpty=!1,!targetNode)return;if("uiTree"==targetNode.$type&&targetNode.dragEnabled&&(isEmpty=targetNode.isEmpty()),"uiTreeHandle"==targetNode.$type&&(targetNode=targetNode.$nodeScope),"uiTreeNode"!=targetNode.$type&&!isEmpty)return;treeScope&&placeElm.parent()[0]!=treeScope.$element[0]&&(treeScope.resetEmptyElement(),treeScope=null),isEmpty?(treeScope=targetNode,targetNode.$nodesScope.accept(scope,0)&&(targetNode.place(placeElm),dragInfo.moveTo(targetNode.$nodesScope,targetNode.$nodesScope.childNodes(),0))):targetNode.dragEnabled()&&(targetElm=targetNode.$element,targetOffset=$uiTreeHelper.offset(targetElm),targetBefore=targetNode.horizontal?eventObj.pageX<targetOffset.left+$uiTreeHelper.width(targetElm)/2:eventObj.pageY<targetOffset.top+$uiTreeHelper.height(targetElm)/2,targetNode.$parentNodesScope.accept(scope,targetNode.index())?targetBefore?(targetElm[0].parentNode.insertBefore(placeElm[0],targetElm[0]),dragInfo.moveTo(targetNode.$parentNodesScope,targetNode.siblings(),targetNode.index())):(targetElm.after(placeElm),dragInfo.moveTo(targetNode.$parentNodesScope,targetNode.siblings(),targetNode.index()+1)):!targetBefore&&targetNode.accept(scope,targetNode.childNodesCount())&&(targetNode.$childNodesScope.$element.append(placeElm),dragInfo.moveTo(targetNode.$childNodesScope,targetNode.childNodes(),targetNode.childNodesCount())))}scope.$apply(function(){scope.$callbacks.dragMove(dragInfo.eventArgs(elements,pos))})}},dragEnd=function(e){e.preventDefault(),dragElm&&(scope.$treeScope.$apply(function(){scope.$callbacks.beforeDrop(dragInfo.eventArgs(elements,pos))}),hiddenPlaceElm.replaceWith(scope.$element),placeElm.remove(),dragElm.remove(),dragElm=null,scope.$$apply?scope.$treeScope.$apply(function(){dragInfo.apply(),scope.$callbacks.dropped(dragInfo.eventArgs(elements,pos))}):bindDrag(),scope.$treeScope.$apply(function(){scope.$callbacks.dragStop(dragInfo.eventArgs(elements,pos))}),scope.$$apply=!1,dragInfo=null);var oldCur=document.body.getAttribute("ui-tree-cursor");null!==oldCur&&($document.find("body").css({cursor:oldCur}),document.body.removeAttribute("ui-tree-cursor")),angular.element($document).unbind("touchend",dragEndEvent),angular.element($document).unbind("touchcancel",dragEndEvent),angular.element($document).unbind("touchmove",dragMoveEvent),angular.element($document).unbind("mouseup",dragEndEvent),angular.element($document).unbind("mousemove",dragMoveEvent),angular.element($window.document.body).unbind("mouseleave",dragCancelEvent)},dragStartEvent=function(e){scope.dragEnabled()&&dragStart(e)},dragMoveEvent=function(e){dragMove(e)},dragEndEvent=function(e){scope.$$apply=!0,dragEnd(e)},dragCancelEvent=function(e){dragEnd(e)},dragDelay=function(){var to;return{exec:function(fn,ms){ms||(ms=0),this.cancel(),to=$timeout(fn,ms)},cancel:function(){$timeout.cancel(to)}}}(),bindDrag=function(){element.bind("touchstart mousedown",function(e){dragDelay.exec(function(){dragStartEvent(e)},scope.dragDelay||0)}),element.bind("touchend touchcancel mouseup",function(){dragDelay.cancel()})},bindDrag(),keydownHandler=function(e){27==e.keyCode&&(scope.$$apply=!1,dragEnd(e))},angular.element($window.document.body).bind("keydown",keydownHandler),scope.$on("$destroy",function(){angular.element($window.document.body).unbind("keydown",keydownHandler)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(treeConfig){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(scope,element,attrs,controllersArr){var config={},ngModel=controllersArr[0],treeNodeCtrl=controllersArr[1],treeCtrl=controllersArr[2];angular.extend(config,treeConfig),config.nodesClass&&element.addClass(config.nodesClass),treeNodeCtrl?(treeNodeCtrl.scope.$childNodesScope=scope,scope.$nodeScope=treeNodeCtrl.scope):treeCtrl.scope.$nodesScope=scope,scope.$treeScope=treeCtrl.scope,ngModel&&(ngModel.$render=function(){ngModel.$modelValue&&angular.isArray(ngModel.$modelValue)||(scope.$modelValue=[]),scope.$modelValue=ngModel.$modelValue}),scope.$watch(attrs.maxDepth,function(val){"number"==typeof val&&(scope.maxDepth=val)}),scope.$watch(function(){return attrs.nodropEnabled},function(newVal){"undefined"!=typeof newVal&&(scope.nodropEnabled=!0)},!0),attrs.$observe("horizontal",function(val){scope.horizontal="undefined"!=typeof val})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("$uiTreeHelper",["$document","$window",function($document,$window){return{nodesData:{},setNodeAttribute:function(scope,attrName,val){if(!scope.$modelValue)return null;var data=this.nodesData[scope.$modelValue.$$hashKey];data||(data={},this.nodesData[scope.$modelValue.$$hashKey]=data),data[attrName]=val},getNodeAttribute:function(scope,attrName){if(!scope.$modelValue)return null;var data=this.nodesData[scope.$modelValue.$$hashKey];return data?data[attrName]:null},nodrag:function(targetElm){return"undefined"!=typeof targetElm.attr("data-nodrag")?"false"===targetElm.attr("data-nodrag")?!1:!0:!1},eventObj:function(e){var obj=e;return void 0!==e.targetTouches?obj=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(obj=e.originalEvent.targetTouches.item(0)),obj},
dragInfo:function(node){return{source:node,sourceInfo:{nodeScope:node,index:node.index(),nodesScope:node.$parentNodesScope},index:node.index(),siblings:node.siblings().slice(0),parent:node.$parentNodesScope,moveTo:function(parent,siblings,index){this.parent=parent,this.siblings=siblings.slice(0);var i=this.siblings.indexOf(this.source);i>-1&&(this.siblings.splice(i,1),this.source.index()<index&&index--),this.siblings.splice(index,0,this.source),this.index=index},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},eventArgs:function(elements,pos){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:elements,pos:pos}},apply:function(){if(this.parent.$treeScope.nodropEnabled!==!0){var nodeData=this.source.$modelValue;if(this.source.$treeScope.cloneEnabled!==!0&&this.source.remove(),this.source.$treeScope.cloneEnabled===!0&&this.source.$treeScope===this.parent.$treeScope)return!1;this.parent.insertNode(this.index,nodeData)}}}},height:function(element){return element.prop("scrollHeight")},width:function(element){return element.prop("scrollWidth")},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:element.prop("offsetWidth"),height:element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].body.scrollTop||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].body.scrollLeft||$document[0].documentElement.scrollLeft)}},positionStarted:function(e,target){var pos={};return pos.offsetX=e.pageX-this.offset(target).left,pos.offsetY=e.pageY-this.offset(target).top,pos.startX=pos.lastX=e.pageX,pos.startY=pos.lastY=e.pageY,pos.nowX=pos.nowY=pos.distX=pos.distY=pos.dirAx=0,pos.dirX=pos.dirY=pos.lastDirX=pos.lastDirY=pos.distAxX=pos.distAxY=0,pos},positionMoved:function(e,pos,firstMoving){pos.lastX=pos.nowX,pos.lastY=pos.nowY,pos.nowX=e.pageX,pos.nowY=e.pageY,pos.distX=pos.nowX-pos.lastX,pos.distY=pos.nowY-pos.lastY,pos.lastDirX=pos.dirX,pos.lastDirY=pos.dirY,pos.dirX=0===pos.distX?0:pos.distX>0?1:-1,pos.dirY=0===pos.distY?0:pos.distY>0?1:-1;var newAx=Math.abs(pos.distX)>Math.abs(pos.distY)?1:0;return firstMoving?(pos.dirAx=newAx,void(pos.moving=!0)):(pos.dirAx!==newAx?(pos.distAxX=0,pos.distAxY=0):(pos.distAxX+=Math.abs(pos.distX),0!==pos.dirX&&pos.dirX!==pos.lastDirX&&(pos.distAxX=0),pos.distAxY+=Math.abs(pos.distY),0!==pos.dirY&&pos.dirY!==pos.lastDirY&&(pos.distAxY=0)),void(pos.dirAx=newAx))}}}])}();var ngMap=angular.module("ngMap",[]);!function(){"use strict";function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function JSONize(str){try{return JSON.parse(str),str}catch(e){return str.replace(/([\$\w]+)\s*:/g,function(_,$1){return'"'+$1+'":'}).replace(/'([^']+)'/g,function(_,$1){return'"'+$1+'"'})}}var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,Attr2Options=function($parse,$timeout,NavigatorGeolocation,GeoCoder){var orgAttributes=function(el){el.length>0&&(el=el[0]);for(var orgAttributes={},i=0;i<el.attributes.length;i++){var attr=el.attributes[i];orgAttributes[attr.name]=attr.value}return orgAttributes},toOptionValue=function(input,options){var output,key=options.key,scope=options.scope;try{var num=Number(input);if(isNaN(num))throw"Not a number";output=num}catch(err){try{if(input.match(/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/)&&(input="["+input+"]"),output=JSON.parse(JSONize(input)),output instanceof Array){var t1stEl=output[0];if(t1stEl.constructor==Object);else if(t1stEl.constructor==Array)output=output.map(function(el){return new google.maps.LatLng(el[0],el[1])});else if(!isNaN(parseFloat(t1stEl))&&isFinite(t1stEl))return new google.maps.LatLng(output[0],output[1])}}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(e){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(e){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=key.charAt(0).toUpperCase()+key.slice(1);key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(e){output=input}else output=input}}return output},getAttrsToObserve=function(attrs){var attrsToObserve=[];if(attrs["ng-repeat"]||attrs.ngRepeat);else for(var attrName in attrs){var attrValue=attrs[attrName];attrValue&&attrValue.match(/\{\{.*\}\}/)&&attrsToObserve.push(camelCase(attrName))}return attrsToObserve},filter=function(attrs){var options={};for(var key in attrs)key.match(/^\$/)||key.match(/^ng[A-Z]/)||(options[key]=attrs[key]);return options},getOptions=function(attrs,scope){var options={};for(var key in attrs)if(attrs[key]){if(key.match(/^on[A-Z]/))continue;if(key.match(/ControlOptions$/))continue;options[key]=toOptionValue(attrs[key],{scope:scope,key:key})}return options},getEvents=function(scope,attrs){var events={},toLowercaseFunc=function($1){return"_"+$1.toLowerCase()},eventFunc=function(attrValue){var matches=attrValue.match(/([^\(]+)\(([^\)]*)\)/),funcName=matches[1],argsStr=matches[2].replace(/event[ ,]*/,""),argsExpr=$parse("["+argsStr+"]");return function(event){function index(obj,i){return obj[i]}var args=argsExpr(scope),f=funcName.split(".").reduce(index,scope);f&&f.apply(this,[event].concat(args)),$timeout(function(){scope.$apply()})}};for(var key in attrs)if(attrs[key]){if(!key.match(/^on[A-Z]/))continue;var eventName=key.replace(/^on/,"");eventName=eventName.charAt(0).toLowerCase()+eventName.slice(1),eventName=eventName.replace(/([A-Z])/g,toLowercaseFunc);var attrValue=attrs[key];events[eventName]=new eventFunc(attrValue)}return events},getControlOptions=function(filtered){var controlOptions={};if("object"!=typeof filtered)return!1;for(var attr in filtered)if(filtered[attr]){if(!attr.match(/(.*)ControlOptions$/))continue;var orgValue=filtered[attr],newValue=orgValue.replace(/'/g,'"');newValue=newValue.replace(/([^"]+)|("[^"]+")/g,function($0,$1,$2){return $1?$1.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):$2});try{var options=JSON.parse(newValue);for(var key in options)if(options[key]){var value=options[key];if("string"==typeof value?value=value.toUpperCase():"mapTypeIds"===key&&(value=value.map(function(str){return str.match(/^[A-Z]+$/)?google.maps.MapTypeId[str.toUpperCase()]:str})),"style"===key){var str=attr.charAt(0).toUpperCase()+attr.slice(1),objName=str.replace(/Options$/,"")+"Style";options[key]=google.maps[objName][value]}else"position"===key?options[key]=google.maps.ControlPosition[value]:options[key]=value}controlOptions[attr]=options}catch(e){}}return controlOptions};return{camelCase:camelCase,filter:filter,getOptions:getOptions,getEvents:getEvents,getControlOptions:getControlOptions,toOptionValue:toOptionValue,getAttrsToObserve:getAttrsToObserve,orgAttributes:orgAttributes}};angular.module("ngMap").service("Attr2Options",["$parse","$timeout","NavigatorGeolocation","GeoCoder",Attr2Options])}(),function(){"use strict";var GeoCoder=function($q){return{geocode:function(options){var deferred=$q.defer(),geocoder=new google.maps.Geocoder;return geocoder.geocode(options,function(results,status){status==google.maps.GeocoderStatus.OK?deferred.resolve(results):deferred.reject("Geocoder failed due to: "+status)}),deferred.promise}}};angular.module("ngMap").service("GeoCoder",["$q",GeoCoder])}(),function(){"use strict";var NavigatorGeolocation=function($q){return{getCurrentPosition:function(){var deferred=$q.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(position){deferred.resolve(position)},function(evt){deferred.reject(evt)}):deferred.reject("Browser Geolocation service failed."),deferred.promise},watchPosition:function(){return"TODO"},clearWatch:function(){return"TODO"}}};angular.module("ngMap").service("NavigatorGeolocation",["$q",NavigatorGeolocation])}(),function(){"use strict";var StreetView=function($q){var getPanorama=function(map,latlng){latlng=latlng||map.getCenter();var deferred=$q.defer(),svs=new google.maps.StreetViewService;return svs.getPanoramaByLocation(latlng||map.getCenter,100,function(data,status){status===google.maps.StreetViewStatus.OK?deferred.resolve(data.location.pano):deferred.resolve(!1)}),deferred.promise},setPanorama=function(map,panoId){var svp=new google.maps.StreetViewPanorama(map.getDiv(),{enableCloseButton:!0});svp.setPano(panoId)};return{getPanorama:getPanorama,setPanorama:setPanorama}};angular.module("ngMap").service("StreetView",["$q",StreetView])}(),ngMap.directive("bicyclingLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getLayer=function(options,events){var layer=new google.maps.BicyclingLayer(options);for(var eventName in events)google.maps.event.addListener(layer,eventName,events[eventName]);return layer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered),layer=getLayer(options,events);mapController.addObject("bicyclingLayers",layer),mapController.observeAttrSetObj(orgAttrs,attrs,layer),element.bind("$destroy",function(){mapController.deleteObject("bicyclingLayers",layer)})}}}]),ngMap.directive("cloudLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getLayer=function(options,events){var layer=new google.maps.weather.CloudLayer(options);for(var eventName in events)google.maps.event.addListener(layer,eventName,events[eventName]);return layer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered),layer=getLayer(options,events);mapController.addObject("cloudLayers",layer),mapController.observeAttrSetObj(orgAttrs,attrs,layer),element.bind("$destroy",function(){mapController.deleteObject("cloudLayers",layer)})}}}]),ngMap.directive("customControl",["Attr2Options","$compile",function(Attr2Options,$compile){"use strict";var parser=Attr2Options;return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var filtered=(parser.orgAttributes(element),parser.filter(attrs)),options=parser.getOptions(filtered,scope),events=parser.getEvents(scope,filtered),customControlEl=element[0].parentElement.removeChild(element[0]);$compile(customControlEl.innerHTML.trim())(scope);for(var eventName in events)google.maps.event.addDomListener(customControlEl,eventName,events[eventName]);mapController.addObject("customControls",customControlEl),scope.$on("mapInitialized",function(evt,map){var position=options.position;map.controls[google.maps.ControlPosition[position]].push(customControlEl)})}}}]),function(){"use strict";var getDirectionsRenderer=function(options,events){options.panel&&(options.panel=document.getElementById(options.panel)||document.querySelector(options.panel));var renderer=new google.maps.DirectionsRenderer(options);for(var eventName in events)google.maps.event.addListener(renderer,eventName,events[eventName]);return renderer},directions=function(Attr2Options,$timeout){var parser=Attr2Options,directionsService=new google.maps.DirectionsService,updateRoute=function(renderer,options){var request=options;request.travelMode=request.travelMode||"DRIVING";var validKeys=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];for(var key in request)-1===validKeys.indexOf(key)&&delete request[key];request.origin&&request.destination&&directionsService.route(request,function(response,status){status==google.maps.DirectionsStatus.OK&&$timeout(function(){renderer.setDirections(response)})})},linkFunc=function(scope,element,attrs,mapController){var orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered),attrsToObserve=parser.getAttrsToObserve(orgAttrs),renderer=getDirectionsRenderer(options,events);mapController.addObject("directionsRenderers",renderer),attrsToObserve.forEach(function(attrName){!function(attrName){attrs.$observe(attrName,function(val){if(options[attrName]!==val){var optionValue=parser.toOptionValue(val,{key:attrName});options[attrName]=optionValue,updateRoute(renderer,options)}})}(attrName)}),scope.$on("mapInitialized",function(event,map){updateRoute(renderer,options)}),scope.$on("$destroy",function(event,map){mapController.deleteObject("directionsRenderers",renderer)})};return{restrict:"E",require:"^map",link:linkFunc}};directions.$inject=["Attr2Options","$timeout"],angular.module("ngMap").directive("directions",directions)}(),ngMap.directive("drawingManager",["Attr2Options",function(Attr2Options){var parser=Attr2Options;return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var filtered=(parser.orgAttributes(element),parser.filter(attrs)),options=parser.getOptions(filtered),controlOptions=parser.getControlOptions(filtered),events=parser.getEvents(scope,filtered),drawingManager=new google.maps.drawing.DrawingManager({drawingMode:options.drawingmode,drawingControl:options.drawingcontrol,drawingControlOptions:controlOptions.drawingControlOptions,circleOptions:options.circleoptions,markerOptions:options.markeroptions,polygonOptions:options.polygonoptions,polylineOptions:options.polylineoptions,rectangleOptions:options.rectangleoptions}),events=parser.getEvents(scope,filtered);for(var eventName in events)google.maps.event.addListener(drawingManager,eventName,events[eventName]);mapController.addObject("mapDrawingManager",drawingManager)}}}]),ngMap.directive("dynamicMapsEngineLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getDynamicMapsEngineLayer=function(options,events){var layer=new google.maps.visualization.DynamicMapsEngineLayer(options);for(var eventName in events)google.maps.event.addListener(layer,eventName,events[eventName]);return layer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered,events),layer=getDynamicMapsEngineLayer(options,events);mapController.addObject("mapsEngineLayers",layer)}}}]),ngMap.directive("fusionTablesLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getLayer=function(options,events){var layer=new google.maps.FusionTablesLayer(options);for(var eventName in events)google.maps.event.addListener(layer,eventName,events[eventName]);return layer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered,events),layer=getLayer(options,events);mapController.addObject("fusionTablesLayers",layer)}}}]),ngMap.directive("heatmapLayer",["Attr2Options","$window",function(Attr2Options,$window){var parser=Attr2Options;return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var filtered=parser.filter(attrs),options=parser.getOptions(filtered);if(options.data=$window[attrs.data]||scope[attrs.data],!(options.data instanceof Array))throw"invalid heatmap data";options.data=new google.maps.MVCArray(options.data);var layer=new google.maps.visualization.HeatmapLayer(options);parser.getEvents(scope,filtered);mapController.addObject("heatmapLayers",layer)}}}]),function(){"use strict";var infoWindow=function(Attr2Options,$compile,$timeout,$parse){var parser=Attr2Options,getInfoWindow=function(options,events,element){var infoWindow;!options.position||options.position instanceof google.maps.LatLng||delete options.position,infoWindow=new google.maps.InfoWindow(options),Object.keys(events).length>0;for(var eventName in events)eventName&&google.maps.event.addListener(infoWindow,eventName,events[eventName]);var template=element.html().trim();if(1!=angular.element(template).length)throw"info-window working as a template must have a container";return infoWindow.__template=template.replace(/\s?ng-non-bindable[='"]+/,""),infoWindow.__compile=function(scope,anchor){anchor&&(scope["this"]=anchor);var el=$compile(infoWindow.__template)(scope);infoWindow.setContent(el[0]),scope.$apply()},infoWindow.__open=function(map,scope,anchor){$timeout(function(){infoWindow.__compile(scope,anchor),anchor&&anchor.getPosition?infoWindow.open(map,anchor):anchor&&anchor instanceof google.maps.LatLng?(infoWindow.open(map),infoWindow.setPosition(anchor)):infoWindow.open(map)})},infoWindow},linkFunc=function(scope,element,attrs,mapController){element.css("display","none");var address,orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),options=parser.getOptions(filtered,scope),events=parser.getEvents(scope,filtered);!options.position||options.position instanceof google.maps.LatLng||(address=options.position);var infoWindow=getInfoWindow(options,events,element);address&&mapController.getGeoLocation(address).then(function(latlng){infoWindow.setPosition(latlng),infoWindow.__open(mapController.map,scope,latlng);var geoCallback=attrs.geoCallback;geoCallback&&$parse(geoCallback)(scope)}),mapController.addObject("infoWindows",infoWindow),mapController.observeAttrSetObj(orgAttrs,attrs,infoWindow),scope.$on("mapInitialized",function(evt,map){if(infoWindow.visible&&infoWindow.__open(map,scope),infoWindow.visibleOnMarker){var markerId=infoWindow.visibleOnMarker;infoWindow.__open(map,scope,map.markers[markerId])}}),scope.showInfoWindow=function(e,id,marker){var infoWindow=mapController.map.infoWindows[id],anchor=marker?marker:this.getPosition?this:null;infoWindow.__open(mapController.map,scope,anchor)},scope.hideInfoWindow=scope.hideInfoWindow||function(event,id){var infoWindow=mapController.map.infoWindows[id];infoWindow.close()}};return{restrict:"E",require:"^map",link:linkFunc}};infoWindow.$inject=["Attr2Options","$compile","$timeout","$parse"],angular.module("ngMap").directive("infoWindow",infoWindow)}(),ngMap.directive("kmlLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getKmlLayer=function(options,events){var kmlLayer=new google.maps.KmlLayer(options);for(var eventName in events)google.maps.event.addListener(kmlLayer,eventName,events[eventName]);return kmlLayer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered),kmlLayer=getKmlLayer(options,events);mapController.addObject("kmlLayers",kmlLayer),mapController.observeAttrSetObj(orgAttrs,attrs,kmlLayer),element.bind("$destroy",function(){mapController.deleteObject("kmlLayers",kmlLayer)})}}}]),ngMap.directive("mapData",["Attr2Options",function(Attr2Options){var parser=Attr2Options;return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered,events);scope.$on("mapInitialized",function(event,map){for(var key in options)if(key){var val=options[key];"function"==typeof scope[val]?map.data[key](scope[val]):map.data[key](val)}for(var eventName in events)events[eventName]&&map.data.addListener(eventName,events[eventName])})}}}]),ngMap.directive("mapLazyLoad",["$compile","$timeout",function($compile,$timeout){"use strict";var directiveDefinitionObject={compile:function(tElement,tAttrs){!tAttrs.mapLazyLoad&&void 0;var savedHtml=tElement.html(),src=tAttrs.mapLazyLoad;return document.querySelector('script[src="'+src+'?callback=lazyLoadCallback"]')?!1:(tElement.html(""),{pre:function(scope,element,attrs){if(window.lazyLoadCallback=function(){$timeout(function(){element.html(savedHtml),$compile(element.contents())(scope)},100)},void 0===window.google||void 0===window.google.maps){var scriptEl=document.createElement("script");scriptEl.src=src+(src.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.body.appendChild(scriptEl)}else element.html(savedHtml),$compile(element.contents())(scope)}})}};return directiveDefinitionObject}]),ngMap.directive("mapType",["Attr2Options","$window",function(Attr2Options,$window){return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var mapTypeObject,mapTypeName=attrs.name;if(!mapTypeName)throw"invalid map-type name";if(attrs.object){var __scope=scope[attrs.object]?scope:$window;mapTypeObject=__scope[attrs.object],"function"==typeof mapTypeObject&&(mapTypeObject=new mapTypeObject)}if(!mapTypeObject)throw"invalid map-type object";scope.$on("mapInitialized",function(evt,map){map.mapTypes.set(mapTypeName,mapTypeObject)}),mapController.addObject("mapTypes",mapTypeObject)}}}]),function(){"use strict";function getStyle(el,styleProp){var y;return el.currentStyle?y=el.currentStyle[styleProp]:window.getComputedStyle&&(y=document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp)),y}var mapDirective=function(Attr2Options,$timeout,$parse){var parser=Attr2Options,linkFunc=function(scope,element,attrs,ctrl){var orgAttrs=parser.orgAttributes(element);scope.google=google;var el=document.createElement("div");el.style.width="100%",el.style.height="100%",element.prepend(el),"block"!=getStyle(element[0],"display")&&element.css("display","block"),getStyle(element[0],"height").match(/^(0|auto)/)&&element.css("height","300px"),element[0].addEventListener("dragstart",function(event){return event.preventDefault(),!1});var initializeMap=function(mapOptions,mapEvents){var map=new google.maps.Map(el,{});map.markers={},map.shapes={},$timeout(function(){google.maps.event.trigger(map,"resize")}),mapOptions.zoom=mapOptions.zoom||15;var center=mapOptions.center;center?center instanceof google.maps.LatLng||(delete mapOptions.center,ctrl.getGeoLocation(center).then(function(latlng){map.setCenter(latlng);var geoCallback=attrs.geoCallback;geoCallback&&$parse(geoCallback)(scope)},function(error){map.setCenter(options.geoFallbackCenter)})):mapOptions.center=new google.maps.LatLng(0,0),map.setOptions(mapOptions);for(var eventName in mapEvents)eventName&&google.maps.event.addListener(map,eventName,mapEvents[eventName]);ctrl.observeAttrSetObj(orgAttrs,attrs,map),ctrl.map=map,ctrl.addObjects(ctrl._objects),scope.map=map,scope.map.scope=scope,google.maps.event.addListenerOnce(map,"idle",function(){scope.$emit("mapInitialized",map)}),scope.maps=scope.maps||{},scope.maps[options.id||Object.keys(scope.maps).length]=map,scope.$emit("mapsInitialized",scope.maps)},filtered=parser.filter(attrs),options=parser.getOptions(filtered,scope),controlOptions=parser.getControlOptions(filtered),mapOptions=angular.extend(options,controlOptions),mapEvents=parser.getEvents(scope,filtered);attrs.initEvent?scope.$on(attrs.initEvent,function(){!ctrl.map&&initializeMap(mapOptions,mapEvents)}):initializeMap(mapOptions,mapEvents)};return{restrict:"AE",controller:"MapController",link:linkFunc}};angular.module("ngMap").directive("map",["Attr2Options","$timeout","$parse",mapDirective])}(),function(){"use strict";var MapController=function($q,NavigatorGeolocation,GeoCoder,Attr2Options){var parser=Attr2Options,_this=this,observeAndSet=function(attrs,attrName,object){attrs.$observe(attrName,function(val){if(val){var setMethod=parser.camelCase("set-"+attrName),optionValue=parser.toOptionValue(val,{key:attrName});object[setMethod]&&(attrName.match(/center|position/)&&"string"==typeof optionValue?_this.getGeoLocation(optionValue).then(function(latlng){object[setMethod](latlng)}):object[setMethod](optionValue))}})};this.map=null,this._objects=[],this.addObject=function(groupName,obj){if(this.map){this.map[groupName]=this.map[groupName]||{};var len=Object.keys(this.map[groupName]).length;this.map[groupName][obj.id||len]=obj,"infoWindows"!=groupName&&obj.setMap&&obj.setMap&&obj.setMap(this.map),obj.centered&&obj.position&&this.map.setCenter(obj.position)}else obj.groupName=groupName,this._objects.push(obj)},this.deleteObject=function(groupName,obj){var objs=obj.map[groupName];for(var name in objs)objs[name]===obj&&delete objs[name];obj.map&&obj.setMap&&obj.setMap(null)},this.addObjects=function(objects){for(var i=0;i<objects.length;i++){var obj=objects[i];obj instanceof google.maps.Marker?this.addObject("markers",obj):obj instanceof google.maps.Circle||obj instanceof google.maps.Polygon||obj instanceof google.maps.Polyline||obj instanceof google.maps.Rectangle||obj instanceof google.maps.GroundOverlay?this.addObject("shapes",obj):this.addObject(obj.groupName,obj)}},this.getGeoLocation=function(string){var deferred=$q.defer();return!string||string.match(/^current/i)?NavigatorGeolocation.getCurrentPosition().then(function(position){var lat=position.coords.latitude,lng=position.coords.longitude,latLng=new google.maps.LatLng(lat,lng);deferred.resolve(latLng)},function(error){deferred.reject(error)}):GeoCoder.geocode({address:string}).then(function(results){deferred.resolve(results[0].geometry.location)},function(error){deferred.reject(error)}),deferred.promise},this.observeAttrSetObj=function(orgAttrs,attrs,obj){var attrsToObserve=parser.getAttrsToObserve(orgAttrs);Object.keys(attrsToObserve).length;for(var i=0;i<attrsToObserve.length;i++)observeAndSet(attrs,attrsToObserve[i],obj)}};MapController.$inject=["$q","NavigatorGeolocation","GeoCoder","Attr2Options"],angular.module("ngMap").controller("MapController",MapController)}(),ngMap.directive("mapsEngineLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getMapsEngineLayer=function(options,events){var layer=new google.maps.visualization.MapsEngineLayer(options);for(var eventName in events)google.maps.event.addListener(layer,eventName,events[eventName]);return layer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered,events),layer=getMapsEngineLayer(options,events);mapController.addObject("mapsEngineLayers",layer)}}}]),function(){"use strict";var getMarker=function(options,events){var marker;if(options.icon instanceof Object){(""+options.icon.path).match(/^[A-Z_]+$/)&&(options.icon.path=google.maps.SymbolPath[options.icon.path]);for(var key in options.icon){var arr=options.icon[key];"anchor"==key||"origin"==key?options.icon[key]=new google.maps.Point(arr[0],arr[1]):("size"==key||"scaledSize"==key)&&(options.icon[key]=new google.maps.Size(arr[0],arr[1]))}}options.position instanceof google.maps.LatLng||(options.position=new google.maps.LatLng(0,0)),marker=new google.maps.Marker(options),Object.keys(events).length>0;for(var eventName in events)eventName&&google.maps.event.addListener(marker,eventName,events[eventName]);return marker},marker=function(Attr2Options,$parse){var parser=Attr2Options,linkFunc=function(scope,element,attrs,mapController){var address,orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),markerOptions=parser.getOptions(filtered,scope),markerEvents=parser.getEvents(scope,filtered);markerOptions.position instanceof google.maps.LatLng||(address=markerOptions.position);var marker=getMarker(markerOptions,markerEvents);mapController.addObject("markers",marker),address&&mapController.getGeoLocation(address).then(function(latlng){marker.setPosition(latlng),markerOptions.centered&&marker.map.setCenter(latlng);var geoCallback=attrs.geoCallback;geoCallback&&$parse(geoCallback)(scope)}),mapController.observeAttrSetObj(orgAttrs,attrs,marker),element.bind("$destroy",function(){mapController.deleteObject("markers",marker)})};return{restrict:"E",require:"^map",link:linkFunc}};marker.$inject=["Attr2Options","$parse"],angular.module("ngMap").directive("marker",marker)}(),ngMap.directive("overlayMapType",["Attr2Options","$window",function(Attr2Options,$window){return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var overlayMapTypeObject,initMethod=attrs.initMethod||"insertAt";if(attrs.object){var __scope=scope[attrs.object]?scope:$window;overlayMapTypeObject=__scope[attrs.object],"function"==typeof overlayMapTypeObject&&(overlayMapTypeObject=new overlayMapTypeObject)}if(!overlayMapTypeObject)throw"invalid map-type object";scope.$on("mapInitialized",function(evt,map){if("insertAt"==initMethod){var index=parseInt(attrs.index,10);map.overlayMapTypes.insertAt(index,overlayMapTypeObject)}else"push"==initMethod&&map.overlayMapTypes.push(overlayMapTypeObject)}),mapController.addObject("overlayMapTypes",overlayMapTypeObject)}}}]),function(){"use strict";var placesAutoComplete=function(Attr2Options,$timeout){var parser=Attr2Options,linkFunc=function(scope,element,attrs,ngModelCtrl){var filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered),autocomplete=new google.maps.places.Autocomplete(element[0],options);for(var eventName in events)google.maps.event.addListener(autocomplete,eventName,events[eventName]);element[0].addEventListener("change",function(){$timeout(function(){ngModelCtrl&&ngModelCtrl.$setViewValue(element.val())},100)}),attrs.$observe("types",function(val){if(val){var optionValue=parser.toOptionValue(val,{key:"types"});autocomplete.setTypes(optionValue)}})};return{restrict:"A",require:"?ngModel",link:linkFunc}};placesAutoComplete.$inject=["Attr2Options","$timeout"],angular.module("ngMap").directive("placesAutoComplete",placesAutoComplete)}(),function(){"use strict";var getBounds=function(points){return new google.maps.LatLngBounds(points[0],points[1])},getShape=function(options,events){var shape,shapeName=options.name;if(delete options.name,options.icons)for(var i=0;i<options.icons.length;i++){var el=options.icons[i];el.icon.path.match(/^[A-Z_]+$/)&&(el.icon.path=google.maps.SymbolPath[el.icon.path])}switch(shapeName){case"circle":options.center instanceof google.maps.LatLng||(options.center=new google.maps.LatLng(0,0)),shape=new google.maps.Circle(options);break;case"polygon":shape=new google.maps.Polygon(options);break;case"polyline":shape=new google.maps.Polyline(options);break;case"rectangle":options.bounds&&(options.bounds=getBounds(options.bounds)),shape=new google.maps.Rectangle(options);break;case"groundOverlay":case"image":var url=options.url,bounds=getBounds(options.bounds),opts={opacity:options.opacity,clickable:options.clickable,id:options.id};shape=new google.maps.GroundOverlay(url,bounds,opts)}for(var eventName in events)events[eventName]&&google.maps.event.addListener(shape,eventName,events[eventName]);return shape},shape=function(Attr2Options,$parse){var parser=Attr2Options,linkFunc=function(scope,element,attrs,mapController){var address,shapeType,orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),shapeOptions=parser.getOptions(filtered),shapeEvents=parser.getEvents(scope,filtered);shapeType=shapeOptions.name,shapeOptions.center instanceof google.maps.LatLng||(address=shapeOptions.center);var shape=getShape(shapeOptions,shapeEvents);mapController.addObject("shapes",shape),address&&"circle"==shapeType&&mapController.getGeoLocation(address).then(function(latlng){shape.setCenter(latlng),shape.centered&&shape.map.setCenter(latlng);var geoCallback=attrs.geoCallback;geoCallback&&$parse(geoCallback)(scope)}),mapController.observeAttrSetObj(orgAttrs,attrs,shape),element.bind("$destroy",function(){mapController.deleteObject("shapes",shape);
})};return{restrict:"E",require:"^map",link:linkFunc}};shape.$inject=["Attr2Options","$parse"],angular.module("ngMap").directive("shape",shape)}(),function(){"use strict";var streetViewPanorama=function(Attr2Options){var parser=Attr2Options,getStreetViewPanorama=function(map,options,events){var svp,container;options.container&&(container=document.getElementById(options.container),container=container||document.querySelector(options.container)),container?svp=new google.maps.StreetViewPanorama(container,options):(svp=map.getStreetView(),svp.setOptions(options));for(var eventName in events)eventName&&google.maps.event.addListener(svp,eventName,events[eventName]);return svp},linkFunc=function(scope,element,attrs,mapController){var filtered=(parser.orgAttributes(element),parser.filter(attrs)),options=parser.getOptions(filtered),controlOptions=parser.getControlOptions(filtered),svpOptions=angular.extend(options,controlOptions),svpEvents=parser.getEvents(scope,filtered);scope.$on("mapInitialized",function(evt,map){var svp=getStreetViewPanorama(map,svpOptions,svpEvents);map.setStreetView(svp),!svp.getPosition()&&svp.setPosition(map.getCenter()),google.maps.event.addListener(svp,"position_changed",function(){svp.getPosition()!==map.getCenter()&&map.setCenter(svp.getPosition())});var listener=google.maps.event.addListener(map,"center_changed",function(){svp.setPosition(map.getCenter()),google.maps.event.removeListener(listener)})})};return{restrict:"E",require:"^map",link:linkFunc}};streetViewPanorama.$inject=["Attr2Options"],angular.module("ngMap").directive("streetViewPanorama",streetViewPanorama)}(),ngMap.directive("trafficLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getLayer=function(options,events){var layer=new google.maps.TrafficLayer(options);for(var eventName in events)google.maps.event.addListener(layer,eventName,events[eventName]);return layer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered),layer=getLayer(options,events);mapController.addObject("trafficLayers",layer),mapController.observeAttrSetObj(orgAttrs,attrs,layer),element.bind("$destroy",function(){mapController.deleteObject("trafficLayers",layer)})}}}]),ngMap.directive("transitLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getLayer=function(options,events){var layer=new google.maps.TransitLayer(options);for(var eventName in events)google.maps.event.addListener(layer,eventName,events[eventName]);return layer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered),layer=getLayer(options,events);mapController.addObject("transitLayers",layer),mapController.observeAttrSetObj(orgAttrs,attrs,layer),element.bind("$destroy",function(){mapController.deleteObject("transitLayers",layer)})}}}]),ngMap.directive("weatherLayer",["Attr2Options",function(Attr2Options){var parser=Attr2Options,getLayer=function(options,events){var layer=new google.maps.weather.WeatherLayer(options);for(var eventName in events)google.maps.event.addListener(layer,eventName,events[eventName]);return layer};return{restrict:"E",require:"^map",link:function(scope,element,attrs,mapController){var orgAttrs=parser.orgAttributes(element),filtered=parser.filter(attrs),options=parser.getOptions(filtered),events=parser.getEvents(scope,filtered),layer=getLayer(options,events);mapController.addObject("weatherLayers",layer),mapController.observeAttrSetObj(orgAttrs,attrs,layer),element.bind("$destroy",function(){mapController.deleteObject("weatherLayers",layer)})}}}]),function(){"use strict";var KEYS={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,"delete":46,comma:188},MAX_SAFE_INTEGER=9007199254740991,SUPPORTED_INPUT_TYPES=["text","email","url"],tagsInput=angular.module("ngTagsInput",[]);tagsInput.directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function($timeout,$document,$window,tagsInputConfig,tiUtil){function TagList(options,events,onTagAdding,onTagRemoving){var getTagText,setTagText,tagIsValid,self={};return getTagText=function(tag){return tiUtil.safeToString(tag[options.displayProperty])},setTagText=function(tag,text){tag[options.displayProperty]=text},tagIsValid=function(tag){var tagText=getTagText(tag);return tagText&&tagText.length>=options.minLength&&tagText.length<=options.maxLength&&options.allowedTagsPattern.test(tagText)&&!tiUtil.findInObjectArray(self.items,tag,options.keyProperty||options.displayProperty)&&onTagAdding({$tag:tag})},self.items=[],self.addText=function(text){var tag={};return setTagText(tag,text),self.add(tag)},self.add=function(tag){var tagText=getTagText(tag);return options.replaceSpacesWithDashes&&(tagText=tiUtil.replaceSpacesWithDashes(tagText)),setTagText(tag,tagText),tagIsValid(tag)?(self.items.push(tag),events.trigger("tag-added",{$tag:tag})):tagText&&events.trigger("invalid-tag",{$tag:tag}),tag},self.remove=function(index){var tag=self.items[index];return onTagRemoving({$tag:tag})?(self.items.splice(index,1),self.clearSelection(),events.trigger("tag-removed",{$tag:tag}),tag):void 0},self.select=function(index){0>index?index=self.items.length-1:index>=self.items.length&&(index=0),self.index=index,self.selected=self.items[index]},self.selectPrior=function(){self.select(--self.index)},self.selectNext=function(){self.select(++self.index)},self.removeSelected=function(){return self.remove(self.index)},self.clearSelection=function(){self.selected=null,self.index=-1},self.clearSelection(),self}function validateType(type){return-1!==SUPPORTED_INPUT_TYPES.indexOf(type)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function($scope,$attrs,$element){$scope.events=tiUtil.simplePubSub(),tagsInputConfig.load("tagsInput",$scope,$attrs,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",validateType],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,MAX_SAFE_INTEGER],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,MAX_SAFE_INTEGER],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),$scope.tagList=new TagList($scope.options,$scope.events,tiUtil.handleUndefinedResult($scope.onTagAdding,!0),tiUtil.handleUndefinedResult($scope.onTagRemoving,!0)),this.registerAutocomplete=function(){var input=$element.find("input");return{addTag:function(tag){return $scope.tagList.add(tag)},focusInput:function(){input[0].focus()},getTags:function(){return $scope.tags},getCurrentTagText:function(){return $scope.newTag.text},getOptions:function(){return $scope.options},on:function(name,handler){return $scope.events.on(name,handler),this}}},this.registerTagItem=function(){return{getOptions:function(){return $scope.options},removeTag:function(index){$scope.disabled||$scope.tagList.remove(index)}}}}],link:function(scope,element,attrs,ngModelCtrl){var setElementValidity,hotkeys=[KEYS.enter,KEYS.comma,KEYS.space,KEYS.backspace,KEYS["delete"],KEYS.left,KEYS.right],tagList=scope.tagList,events=scope.events,options=scope.options,input=element.find("input"),validationOptions=["minTags","maxTags","allowLeftoverText"];setElementValidity=function(){ngModelCtrl.$setValidity("maxTags",scope.tags.length<=options.maxTags),ngModelCtrl.$setValidity("minTags",scope.tags.length>=options.minTags),ngModelCtrl.$setValidity("leftoverText",scope.hasFocus||options.allowLeftoverText?!0:!scope.newTag.text)},ngModelCtrl.$isEmpty=function(value){return!value||!value.length},scope.newTag={text:"",invalid:null,setText:function(value){this.text=value,events.trigger("input-change",value)}},scope.track=function(tag){return tag[options.keyProperty||options.displayProperty]},scope.$watch("tags",function(value){scope.tags=tiUtil.makeObjectArray(value,options.displayProperty),tagList.items=scope.tags}),scope.$watch("tags.length",function(){setElementValidity()}),attrs.$observe("disabled",function(value){scope.disabled=value}),scope.eventHandlers={input:{change:function(text){events.trigger("input-change",text)},keydown:function($event){events.trigger("input-keydown",$event)},focus:function(){scope.hasFocus||(scope.hasFocus=!0,events.trigger("input-focus"))},blur:function(){$timeout(function(){var activeElement=$document.prop("activeElement"),lostFocusToBrowserWindow=activeElement===input[0],lostFocusToChildElement=element[0].contains(activeElement);(lostFocusToBrowserWindow||!lostFocusToChildElement)&&(scope.hasFocus=!1,events.trigger("input-blur"))})},paste:function($event){$event.getTextData=function(){var clipboardData=$event.clipboardData||$event.originalEvent&&$event.originalEvent.clipboardData;return clipboardData?clipboardData.getData("text/plain"):$window.clipboardData.getData("Text")},events.trigger("input-paste",$event)}},host:{click:function(){scope.disabled||input[0].focus()}}},events.on("tag-added",scope.onTagAdded).on("invalid-tag",scope.onInvalidTag).on("tag-removed",scope.onTagRemoved).on("tag-added",function(){scope.newTag.setText("")}).on("tag-added tag-removed",function(){ngModelCtrl.$setViewValue(scope.tags)}).on("invalid-tag",function(){scope.newTag.invalid=!0}).on("option-change",function(e){-1!==validationOptions.indexOf(e.name)&&setElementValidity()}).on("input-change",function(){tagList.clearSelection(),scope.newTag.invalid=null}).on("input-focus",function(){element.triggerHandler("focus"),ngModelCtrl.$setValidity("leftoverText",!0)}).on("input-blur",function(){options.addOnBlur&&!options.addFromAutocompleteOnly&&tagList.addText(scope.newTag.text),element.triggerHandler("blur"),setElementValidity()}).on("input-keydown",function(event){var shouldAdd,shouldRemove,shouldSelect,shouldEditLastTag,key=event.keyCode,isModifier=event.shiftKey||event.altKey||event.ctrlKey||event.metaKey,addKeys={};if(!isModifier&&-1!==hotkeys.indexOf(key)){if(addKeys[KEYS.enter]=options.addOnEnter,addKeys[KEYS.comma]=options.addOnComma,addKeys[KEYS.space]=options.addOnSpace,shouldAdd=!options.addFromAutocompleteOnly&&addKeys[key],shouldRemove=(key===KEYS.backspace||key===KEYS["delete"])&&tagList.selected,shouldEditLastTag=key===KEYS.backspace&&0===scope.newTag.text.length&&options.enableEditingLastTag,shouldSelect=(key===KEYS.backspace||key===KEYS.left||key===KEYS.right)&&0===scope.newTag.text.length&&!options.enableEditingLastTag,shouldAdd)tagList.addText(scope.newTag.text);else if(shouldEditLastTag){var tag;tagList.selectPrior(),tag=tagList.removeSelected(),tag&&scope.newTag.setText(tag[options.displayProperty])}else shouldRemove?tagList.removeSelected():shouldSelect&&(key===KEYS.left||key===KEYS.backspace?tagList.selectPrior():key===KEYS.right&&tagList.selectNext());(shouldAdd||shouldSelect||shouldRemove||shouldEditLastTag)&&event.preventDefault()}}).on("input-paste",function(event){if(options.addOnPaste){var data=event.getTextData(),tags=data.split(options.pasteSplitPattern);tags.length>1&&(tags.forEach(function(tag){tagList.addText(tag)}),event.preventDefault())}})}}}]),tagsInput.directive("tiTagItem",["tiUtil",function(tiUtil){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(scope,element,attrs,tagsInputCtrl){var tagsInput=tagsInputCtrl.registerTagItem(),options=tagsInput.getOptions();scope.$$template=options.template,scope.$$removeTagSymbol=options.removeTagSymbol,scope.$getDisplayText=function(){return tiUtil.safeToString(scope.data[options.displayProperty])},scope.$removeTag=function(){tagsInput.removeTag(scope.$index)},scope.$watch("$parent.$index",function(value){scope.$index=value})}}}]),tagsInput.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function($document,$timeout,$sce,$q,tagsInputConfig,tiUtil){function SuggestionList(loadFn,options,events){var getDifference,lastPromise,getTagId,self={};return getTagId=function(){return options.tagsInput.keyProperty||options.tagsInput.displayProperty},getDifference=function(array1,array2){return array1.filter(function(item){return!tiUtil.findInObjectArray(array2,item,getTagId(),function(a,b){return options.tagsInput.replaceSpacesWithDashes&&(a=tiUtil.replaceSpacesWithDashes(a),b=tiUtil.replaceSpacesWithDashes(b)),tiUtil.defaultComparer(a,b)})})},self.reset=function(){lastPromise=null,self.items=[],self.visible=!1,self.index=-1,self.selected=null,self.query=null},self.show=function(){options.selectFirstMatch?self.select(0):self.selected=null,self.visible=!0},self.load=tiUtil.debounce(function(query,tags){self.query=query;var promise=$q.when(loadFn({$query:query}));lastPromise=promise,promise.then(function(items){promise===lastPromise&&(items=tiUtil.makeObjectArray(items.data||items,getTagId()),items=getDifference(items,tags),self.items=items.slice(0,options.maxResultsToShow),self.items.length>0?self.show():self.reset())})},options.debounceDelay),self.selectNext=function(){self.select(++self.index)},self.selectPrior=function(){self.select(--self.index)},self.select=function(index){0>index?index=self.items.length-1:index>=self.items.length&&(index=0),self.index=index,self.selected=self.items[index],events.trigger("suggestion-selected",index)},self.reset(),self}function scrollToElement(root,index){var element=root.find("li").eq(index),parent=element.parent(),elementTop=element.prop("offsetTop"),elementHeight=element.prop("offsetHeight"),parentHeight=parent.prop("clientHeight"),parentScrollTop=parent.prop("scrollTop");parentScrollTop>elementTop?parent.prop("scrollTop",elementTop):elementTop+elementHeight>parentHeight+parentScrollTop&&parent.prop("scrollTop",elementTop+elementHeight-parentHeight)}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$scope.events=tiUtil.simplePubSub(),tagsInputConfig.load("autoComplete",$scope,$attrs,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),$scope.suggestionList=new SuggestionList($scope.source,$scope.options,$scope.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return $scope.options},getQuery:function(){return $scope.suggestionList.query}}}}],link:function(scope,element,attrs,tagsInputCtrl){var shouldLoadSuggestions,hotkeys=[KEYS.enter,KEYS.tab,KEYS.escape,KEYS.up,KEYS.down],suggestionList=scope.suggestionList,tagsInput=tagsInputCtrl.registerAutocomplete(),options=scope.options,events=scope.events;options.tagsInput=tagsInput.getOptions(),shouldLoadSuggestions=function(value){return value&&value.length>=options.minLength||!value&&options.loadOnEmpty},scope.addSuggestionByIndex=function(index){suggestionList.select(index),scope.addSuggestion()},scope.addSuggestion=function(){var added=!1;return suggestionList.selected&&(tagsInput.addTag(angular.copy(suggestionList.selected)),suggestionList.reset(),tagsInput.focusInput(),added=!0),added},scope.track=function(item){return item[options.tagsInput.keyProperty||options.tagsInput.displayProperty]},tagsInput.on("tag-added invalid-tag input-blur",function(){suggestionList.reset()}).on("input-change",function(value){shouldLoadSuggestions(value)?suggestionList.load(value,tagsInput.getTags()):suggestionList.reset()}).on("input-focus",function(){var value=tagsInput.getCurrentTagText();options.loadOnFocus&&shouldLoadSuggestions(value)&&suggestionList.load(value,tagsInput.getTags())}).on("input-keydown",function(event){var key=event.keyCode,handled=!1;if(-1!==hotkeys.indexOf(key))return suggestionList.visible?key===KEYS.down?(suggestionList.selectNext(),handled=!0):key===KEYS.up?(suggestionList.selectPrior(),handled=!0):key===KEYS.escape?(suggestionList.reset(),handled=!0):(key===KEYS.enter||key===KEYS.tab)&&(handled=scope.addSuggestion()):key===KEYS.down&&scope.options.loadOnDownArrow&&(suggestionList.load(tagsInput.getCurrentTagText(),tagsInput.getTags()),handled=!0),handled?(event.preventDefault(),event.stopImmediatePropagation(),!1):void 0}),events.on("suggestion-selected",function(index){scrollToElement(element,index)})}}}]),tagsInput.directive("tiAutocompleteMatch",["$sce","tiUtil",function($sce,tiUtil){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(scope,element,attrs,autoCompleteCtrl){var autoComplete=autoCompleteCtrl.registerAutocompleteMatch(),options=autoComplete.getOptions();scope.$$template=options.template,scope.$index=scope.$parent.$index,scope.$highlight=function(text){return options.highlightMatchedText&&(text=tiUtil.safeHighlight(text,autoComplete.getQuery())),$sce.trustAsHtml(text)},scope.$getDisplayText=function(){return tiUtil.safeToString(scope.data[options.displayProperty||options.tagsInput.displayProperty])}}}}]),tagsInput.directive("tiTranscludeAppend",function(){return function(scope,element,attrs,ctrl,transcludeFn){transcludeFn(function(clone){element.append(clone)})}}),tagsInput.directive("tiAutosize",["tagsInputConfig",function(tagsInputConfig){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){var span,resize,threshold=tagsInputConfig.getTextAutosizeThreshold();span=angular.element('<span class="input"></span>'),span.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),element.parent().append(span),resize=function(originalValue){var width,value=originalValue;return angular.isString(value)&&0===value.length&&(value=attrs.placeholder),value&&(span.text(value),span.css("display",""),width=span.prop("offsetWidth"),span.css("display","none")),element.css("width",width?width+threshold+"px":""),originalValue},ctrl.$parsers.unshift(resize),ctrl.$formatters.unshift(resize),attrs.$observe("placeholder",function(value){ctrl.$modelValue||resize(value)})}}}]),tagsInput.directive("tiBindAttrs",function(){return function(scope,element,attrs){scope.$watch(attrs.tiBindAttrs,function(value){angular.forEach(value,function(value,key){attrs.$set(key,value)})},!0)}}),tagsInput.provider("tagsInputConfig",function(){var globalDefaults={},interpolationStatus={},autosizeThreshold=3;this.setDefaults=function(directive,defaults){return globalDefaults[directive]=defaults,this},this.setActiveInterpolation=function(directive,options){return interpolationStatus[directive]=options,this},this.setTextAutosizeThreshold=function(threshold){return autosizeThreshold=threshold,this},this.$get=["$interpolate",function($interpolate){var converters={};return converters[String]=function(value){return value},converters[Number]=function(value){return parseInt(value,10)},converters[Boolean]=function(value){return"true"===value.toLowerCase()},converters[RegExp]=function(value){return new RegExp(value)},{load:function(directive,scope,attrs,options){var defaultValidator=function(){return!0};scope.options={},angular.forEach(options,function(value,key){var type,localDefault,validator,converter,getDefault,updateValue;type=value[0],localDefault=value[1],validator=value[2]||defaultValidator,converter=converters[type],getDefault=function(){var globalValue=globalDefaults[directive]&&globalDefaults[directive][key];return angular.isDefined(globalValue)?globalValue:localDefault},updateValue=function(value){scope.options[key]=value&&validator(value)?converter(value):getDefault()},interpolationStatus[directive]&&interpolationStatus[directive][key]?attrs.$observe(key,function(value){updateValue(value),scope.events.trigger("option-change",{name:key,newValue:value})}):updateValue(attrs[key]&&$interpolate(attrs[key])(scope.$parent))})},getTextAutosizeThreshold:function(){return autosizeThreshold}}}]}),tagsInput.factory("tiUtil",["$timeout",function($timeout){var self={};return self.debounce=function(fn,delay){var timeoutId;return function(){var args=arguments;$timeout.cancel(timeoutId),timeoutId=$timeout(function(){fn.apply(null,args)},delay)}},self.makeObjectArray=function(array,key){return array=array||[],array.length>0&&!angular.isObject(array[0])&&array.forEach(function(item,index){array[index]={},array[index][key]=item}),array},self.findInObjectArray=function(array,obj,key,comparer){var item=null;return comparer=comparer||self.defaultComparer,array.some(function(element){return comparer(element[key],obj[key])?(item=element,!0):void 0}),item},self.defaultComparer=function(a,b){return self.safeToString(a).toLowerCase()===self.safeToString(b).toLowerCase()},self.safeHighlight=function(str,value){function escapeRegexChars(str){return str.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!value)return str;str=self.encodeHTML(str),value=self.encodeHTML(value);var expression=new RegExp("&[^;]+;|"+escapeRegexChars(value),"gi");return str.replace(expression,function(match){return match.toLowerCase()===value.toLowerCase()?"<em>"+match+"</em>":match})},self.safeToString=function(value){return angular.isUndefined(value)||null==value?"":value.toString().trim()},self.encodeHTML=function(value){return self.safeToString(value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},self.handleUndefinedResult=function(fn,valueIfUndefined){return function(){var result=fn.apply(null,arguments);return angular.isUndefined(result)?valueIfUndefined:result}},self.replaceSpacesWithDashes=function(str){return self.safeToString(str).replace(/\s/g,"-")},self.simplePubSub=function(){var events={};return{on:function(names,handler){return names.split(" ").forEach(function(name){events[name]||(events[name]=[]),events[name].push(handler)}),this},trigger:function(name,args){var handlers=events[name]||[];return handlers.every(function(handler){return self.handleUndefinedResult(handler,!0)(args)}),this}}},self}]),tagsInput.run(["$templateCache",function($templateCache){$templateCache.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append=""><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }"><ti-tag-item data="tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-change="eventHandlers.input.change(newTag.text)" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize=""></div></div>'),$templateCache.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="$$removeTagSymbol"></a>'),$templateCache.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="item"></ti-autocomplete-match></li></ul></div>'),$templateCache.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}(),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function($httpProvider){var interceptor=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function($q,$cacheFactory,$timeout,$rootScope,$log,cfpLoadingBar){function setComplete(){$timeout.cancel(startTimeout),cfpLoadingBar.complete(),reqsCompleted=0,reqsTotal=0}function isCached(config){var cache,defaultCache=$cacheFactory.get("$http"),defaults=$httpProvider.defaults;!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=angular.isObject(config.cache)?config.cache:angular.isObject(defaults.cache)?defaults.cache:defaultCache);var cached=void 0!==cache?void 0!==cache.get(config.url):!1;return void 0!==config.cached&&cached!==config.cached?config.cached:(config.cached=cached,cached)}var startTimeout,reqsTotal=0,reqsCompleted=0,latencyThreshold=cfpLoadingBar.latencyThreshold;return{request:function(config){return config.ignoreLoadingBar||isCached(config)||($rootScope.$broadcast("cfpLoadingBar:loading",{url:config.url}),0===reqsTotal&&(startTimeout=$timeout(function(){cfpLoadingBar.start()},latencyThreshold)),reqsTotal++,cfpLoadingBar.set(reqsCompleted/reqsTotal)),config},response:function(response){return response&&response.config?(response.config.ignoreLoadingBar||isCached(response.config)||(reqsCompleted++,$rootScope.$broadcast("cfpLoadingBar:loaded",{url:response.config.url,result:response}),reqsCompleted>=reqsTotal?setComplete():cfpLoadingBar.set(reqsCompleted/reqsTotal)),response):($log.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),response)},responseError:function(rejection){return rejection&&rejection.config?(rejection.config.ignoreLoadingBar||isCached(rejection.config)||(reqsCompleted++,$rootScope.$broadcast("cfpLoadingBar:loaded",{url:rejection.config.url,result:rejection}),reqsCompleted>=reqsTotal?setComplete():cfpLoadingBar.set(reqsCompleted/reqsTotal)),$q.reject(rejection)):($log.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),$q.reject(rejection))}}}];$httpProvider.interceptors.push(interceptor)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function($injector,$document,$timeout,$rootScope){function _start(){$animate||($animate=$injector.get("$animate"));var $parent=$document.find($parentSelector).eq(0);$timeout.cancel(completeTimeout),started||($rootScope.$broadcast("cfpLoadingBar:started"),started=!0,includeBar&&$animate.enter(loadingBarContainer,$parent,angular.element($parent[0].lastChild)),includeSpinner&&$animate.enter(spinner,$parent,angular.element($parent[0].lastChild)),_set(startSize))}function _set(n){if(started){var pct=100*n+"%";loadingBar.css("width",pct),status=n,$timeout.cancel(incTimeout),incTimeout=$timeout(function(){_inc()},250)}}function _inc(){if(!(_status()>=1)){var rnd=0,stat=_status();rnd=stat>=0&&.25>stat?(3*Math.random()+3)/100:stat>=.25&&.65>stat?3*Math.random()/100:stat>=.65&&.9>stat?2*Math.random()/100:stat>=.9&&.99>stat?.005:0;var pct=_status()+rnd;_set(pct)}}function _status(){return status}function _completeAnimation(){status=0,started=!1}function _complete(){$animate||($animate=$injector.get("$animate")),$rootScope.$broadcast("cfpLoadingBar:completed"),_set(1),$timeout.cancel(completeTimeout),completeTimeout=$timeout(function(){var promise=$animate.leave(loadingBarContainer,_completeAnimation);promise&&promise.then&&promise.then(_completeAnimation),$animate.leave(spinner)},500)}var $animate,incTimeout,completeTimeout,$parentSelector=this.parentSelector,loadingBarContainer=angular.element(this.loadingBarTemplate),loadingBar=loadingBarContainer.find("div").eq(0),spinner=angular.element(this.spinnerTemplate),started=!1,status=0,includeSpinner=this.includeSpinner,includeBar=this.includeBar,startSize=this.startSize;return{start:_start,set:_set,status:_status,inc:_inc,complete:_complete,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();var duScrollDefaultEasing=function(x){"use strict";return.5>x?Math.pow(2*x,2)/2:1-Math.pow(2*(1-x),2)/2};angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function($window,$q,cancelAnimation,requestAnimation,duScrollEasing,duScrollDuration,duScrollOffset,duScrollCancelOnEvents){"use strict";var proto={},isDocument=function(el){return"undefined"!=typeof HTMLDocument&&el instanceof HTMLDocument||el.nodeType&&el.nodeType===el.DOCUMENT_NODE},isElement=function(el){return"undefined"!=typeof HTMLElement&&el instanceof HTMLElement||el.nodeType&&el.nodeType===el.ELEMENT_NODE},unwrap=function(el){return isElement(el)||isDocument(el)?el:el[0]};proto.duScrollTo=function(left,top,duration,easing){var aliasFn;if(angular.isElement(left)?aliasFn=this.duScrollToElement:angular.isDefined(duration)&&(aliasFn=this.duScrollToAnimated),aliasFn)return aliasFn.apply(this,arguments);var el=unwrap(this);return isDocument(el)?$window.scrollTo(left,top):(el.scrollLeft=left,void(el.scrollTop=top))};var scrollAnimation,deferred;proto.duScrollToAnimated=function(left,top,duration,easing){duration&&!easing&&(easing=duScrollEasing);var startLeft=this.duScrollLeft(),startTop=this.duScrollTop(),deltaLeft=Math.round(left-startLeft),deltaTop=Math.round(top-startTop),startTime=null,progress=0,el=this,cancelScrollAnimation=function($event){(!$event||progress&&$event.which>0)&&(duScrollCancelOnEvents&&el.unbind(duScrollCancelOnEvents,cancelScrollAnimation),cancelAnimation(scrollAnimation),deferred.reject(),scrollAnimation=null)};if(scrollAnimation&&cancelScrollAnimation(),deferred=$q.defer(),0===duration||!deltaLeft&&!deltaTop)return 0===duration&&el.duScrollTo(left,top),deferred.resolve(),deferred.promise;var animationStep=function(timestamp){null===startTime&&(startTime=timestamp),progress=timestamp-startTime;var percent=progress>=duration?1:easing(progress/duration);el.scrollTo(startLeft+Math.ceil(deltaLeft*percent),startTop+Math.ceil(deltaTop*percent)),1>percent?scrollAnimation=requestAnimation(animationStep):(duScrollCancelOnEvents&&el.unbind(duScrollCancelOnEvents,cancelScrollAnimation),scrollAnimation=null,deferred.resolve())};return el.duScrollTo(startLeft,startTop),duScrollCancelOnEvents&&el.bind(duScrollCancelOnEvents,cancelScrollAnimation),scrollAnimation=requestAnimation(animationStep),
deferred.promise},proto.duScrollToElement=function(target,offset,duration,easing){var el=unwrap(this);(!angular.isNumber(offset)||isNaN(offset))&&(offset=duScrollOffset);var top=this.duScrollTop()+unwrap(target).getBoundingClientRect().top-offset;return isElement(el)&&(top-=el.getBoundingClientRect().top),this.duScrollTo(0,top,duration,easing)},proto.duScrollLeft=function(value,duration,easing){if(angular.isNumber(value))return this.duScrollTo(value,this.duScrollTop(),duration,easing);var el=unwrap(this);return isDocument(el)?$window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:el.scrollLeft},proto.duScrollTop=function(value,duration,easing){if(angular.isNumber(value))return this.duScrollTo(this.duScrollLeft(),value,duration,easing);var el=unwrap(this);return isDocument(el)?$window.scrollY||document.documentElement.scrollTop||document.body.scrollTop:el.scrollTop},proto.duScrollToElementAnimated=function(target,offset,duration,easing){return this.duScrollToElement(target,offset,duration||duScrollDuration,easing)},proto.duScrollTopAnimated=function(top,duration,easing){return this.duScrollTop(top,duration||duScrollDuration,easing)},proto.duScrollLeftAnimated=function(left,duration,easing){return this.duScrollLeft(left,duration||duScrollDuration,easing)},angular.forEach(proto,function(fn,key){angular.element.prototype[key]=fn;var unprefixed=key.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[unprefixed])&&(angular.element.prototype[unprefixed]=fn)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function($window){"use strict";var vendors=["webkit","moz","o","ms"];return function(fnName,fallback){if($window[fnName])return $window[fnName];for(var key,suffix=fnName.substr(0,1).toUpperCase()+fnName.substr(1),i=0;i<vendors.length;i++)if(key=vendors[i]+suffix,$window[key])return $window[key];return fallback}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(polyfill,$timeout){"use strict";var lastTime=0,fallback=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=$timeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id};return polyfill("requestAnimationFrame",fallback)}]).factory("cancelAnimation",["polyfill","$timeout",function(polyfill,$timeout){"use strict";var fallback=function(promise){$timeout.cancel(promise)};return polyfill("cancelAnimationFrame",fallback)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollBottomSpy",function($rootScope,$timeout,$window,$document,scrollContainerAPI,duScrollGreedy,duScrollSpyWait,duScrollBottomSpy){"use strict";var createScrollHandler=function(context){var timer=!1,queued=!1,handler=function(){queued=!1;var bottomReached,container=context.container,containerEl=container[0],containerOffset=0;"undefined"!=typeof HTMLElement&&containerEl instanceof HTMLElement||containerEl.nodeType&&containerEl.nodeType===containerEl.ELEMENT_NODE?(containerOffset=containerEl.getBoundingClientRect().top,bottomReached=Math.round(containerEl.scrollTop+containerEl.clientHeight)>=containerEl.scrollHeight):bottomReached=Math.round($window.pageYOffset+$window.innerHeight)>=$document[0].body.scrollHeight;var i,currentlyActive,toBeActive,spies,spy,pos,compareProperty=duScrollBottomSpy&&bottomReached?"bottom":"top";for(spies=context.spies,currentlyActive=context.currentlyActive,toBeActive=void 0,i=0;i<spies.length;i++)spy=spies[i],pos=spy.getTargetPosition(),pos&&(duScrollBottomSpy&&bottomReached||pos.top+spy.offset-containerOffset<20&&(duScrollGreedy||-1*pos.top+containerOffset)<pos.height)&&(!toBeActive||toBeActive[compareProperty]<pos[compareProperty])&&(toBeActive={spy:spy},toBeActive[compareProperty]=pos[compareProperty]);toBeActive&&(toBeActive=toBeActive.spy),currentlyActive===toBeActive||duScrollGreedy&&!toBeActive||(currentlyActive&&(currentlyActive.$element.removeClass("active"),$rootScope.$broadcast("duScrollspy:becameInactive",currentlyActive.$element)),toBeActive&&(toBeActive.$element.addClass("active"),$rootScope.$broadcast("duScrollspy:becameActive",toBeActive.$element)),context.currentlyActive=toBeActive)};return duScrollSpyWait?function(){timer?queued=!0:(handler(),timer=$timeout(function(){timer=!1,queued&&handler()},duScrollSpyWait,!1))}:handler},contexts={},createContext=function($scope){var id=$scope.$id,context={spies:[]};return context.handler=createScrollHandler(context),contexts[id]=context,$scope.$on("$destroy",function(){destroyContext($scope)}),id},destroyContext=function($scope){var id=$scope.$id,context=contexts[id],container=context.container;container&&container.off("scroll",context.handler),delete contexts[id]},defaultContextId=createContext($rootScope),getContextForScope=function(scope){return contexts[scope.$id]?contexts[scope.$id]:scope.$parent?getContextForScope(scope.$parent):contexts[defaultContextId]},getContextForSpy=function(spy){var context,contextId,scope=spy.$scope;if(scope)return getContextForScope(scope);for(contextId in contexts)if(context=contexts[contextId],-1!==context.spies.indexOf(spy))return context},isElementInDocument=function(element){for(;element.parentNode;)if(element=element.parentNode,element===document)return!0;return!1},addSpy=function(spy){var context=getContextForSpy(spy);context&&(context.spies.push(spy),context.container&&isElementInDocument(context.container)||(context.container&&context.container.off("scroll",context.handler),context.container=scrollContainerAPI.getContainer(spy.$scope),context.container.on("scroll",context.handler).triggerHandler("scroll")))},removeSpy=function(spy){var context=getContextForSpy(spy);spy===context.currentlyActive&&(context.currentlyActive=null);var i=context.spies.indexOf(spy);-1!==i&&context.spies.splice(i,1),spy.$element=null};return{addSpy:addSpy,removeSpy:removeSpy,createContext:createContext,destroyContext:destroyContext,getContextForScope:getContextForScope}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function($document){"use strict";var containers={},setContainer=function(scope,element){var id=scope.$id;return containers[id]=element,id},getContainerId=function(scope){return containers[scope.$id]?scope.$id:scope.$parent?getContainerId(scope.$parent):void 0},getContainer=function(scope){var id=getContainerId(scope);return id?containers[id]:$document},removeContainer=function(scope){var id=getContainerId(scope);id&&delete containers[id]};return{getContainerId:getContainerId,getContainer:getContainer,setContainer:setContainer,removeContainer:removeContainer}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(duScrollDuration,duScrollOffset,scrollContainerAPI){"use strict";return{link:function($scope,$element,$attr){$element.on("click",function(e){if($attr.href&&-1!==$attr.href.indexOf("#")||""!==$attr.duSmoothScroll){var id=$attr.href?$attr.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):$attr.duSmoothScroll,target=document.getElementById(id)||document.getElementsByName(id)[0];if(target&&target.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var offset=$attr.offset?parseInt($attr.offset,10):duScrollOffset,duration=$attr.duration?parseInt($attr.duration,10):duScrollDuration,container=scrollContainerAPI.getContainer($scope);container.duScrollToElement(angular.element(target),isNaN(offset)?0:offset,isNaN(duration)?0:duration)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(spyAPI){"use strict";return{restrict:"A",scope:!0,compile:function(tElement,tAttrs,transclude){return{pre:function($scope,iElement,iAttrs,controller){spyAPI.createContext($scope)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(scrollContainerAPI){"use strict";return{restrict:"A",scope:!0,compile:function(tElement,tAttrs,transclude){return{pre:function($scope,iElement,iAttrs,controller){iAttrs.$observe("duScrollContainer",function(element){angular.isString(element)&&(element=document.getElementById(element)),element=angular.isElement(element)?angular.element(element):iElement,scrollContainerAPI.setContainer($scope,element),$scope.$on("$destroy",function(){scrollContainerAPI.removeContainer($scope)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(spyAPI,duScrollOffset,$timeout,$rootScope){"use strict";var Spy=function(targetElementOrId,$scope,$element,offset){angular.isElement(targetElementOrId)?this.target=targetElementOrId:angular.isString(targetElementOrId)&&(this.targetId=targetElementOrId),this.$scope=$scope,this.$element=$element,this.offset=offset};return Spy.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},Spy.prototype.getTargetPosition=function(){var target=this.getTargetElement();return target?target.getBoundingClientRect():void 0},Spy.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function($scope,$element,$attr){var targetId,href=$attr.ngHref||$attr.href;href&&-1!==href.indexOf("#")?targetId=href.replace(/.*(?=#[^\s]+$)/,"").substring(1):$attr.duScrollspy?targetId=$attr.duScrollspy:$attr.duSmoothScroll&&(targetId=$attr.duSmoothScroll),targetId&&$timeout(function(){var spy=new Spy(targetId,$scope,$element,-($attr.offset?parseInt($attr.offset,10):duScrollOffset));spyAPI.addSpy(spy),$scope.$on("$locationChangeSuccess",spy.flushTargetCache.bind(spy));var deregisterOnStateChange=$rootScope.$on("$stateChangeSuccess",spy.flushTargetCache.bind(spy));$scope.$on("$destroy",function(){spyAPI.removeSpy(spy),deregisterOnStateChange()})},0,!1)}}}]),!function(a,b){b["true"]=a,window.rangy=function(){function a(a,b){var c=typeof a[b];return c==l||!(c!=k||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=k||!a[b])}function c(a,b){return typeof a[b]!=m}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&r(a,q)&&t(a,p)}function f(a){window.alert("Rangy not supported in your browser. Reason: "+a),u.initialized=!0,u.supported=!1}function g(a){var b="Rangy warning: "+a;u.config.alertOnWarn?window.alert(b):typeof window.console!=m&&typeof window.console.log!=m&&window.console.log(b)}function h(){if(!u.initialized){var c,d=!1,g=!1;a(document,"createRange")&&(c=document.createRange(),r(c,o)&&t(c,n)&&(d=!0),c.detach());var h=b(document,"body")?document.body:document.getElementsByTagName("body")[0];h&&a(h,"createTextRange")&&(c=h.createTextRange(),e(c)&&(g=!0)),d||g||f("Neither Range nor TextRange are implemented"),u.initialized=!0,u.features={implementsDomRange:d,implementsTextRange:g};for(var i=w.concat(v),j=0,k=i.length;k>j;++j)try{i[j](u)}catch(l){b(window,"console")&&a(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",l)}}}function i(a){a=a||window,h();for(var b=0,c=x.length;c>b;++b)x[b](a)}function j(a){this.name=a,this.initialized=!1,this.supported=!1}var k="object",l="function",m="undefined",n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],o=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],p=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],q=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],r=d(a),s=d(b),t=d(c),u={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:r,areHostObjects:s,areHostProperties:t,isTextRange:e},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};u.fail=f,u.warn=g,{}.hasOwnProperty?u.util.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}:f("hasOwnProperty not supported");var v=[],w=[];u.init=h,u.addInitListener=function(a){u.initialized?a(u):v.push(a)};var x=[];u.addCreateMissingNativeApiListener=function(a){x.push(a)},u.createMissingNativeApi=i,j.prototype.fail=function(a){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+a)},j.prototype.warn=function(a){u.warn("Module "+this.name+": "+a)},j.prototype.createError=function(a){return new Error("Error in Rangy "+this.name+" module: "+a)},u.createModule=function(a,b){var c=new j(a);u.modules[a]=c,w.push(function(a){b(a,c),c.initialized=!0,c.supported=!0})},u.requireModules=function(a){for(var b,c,d=0,e=a.length;e>d;++d){if(c=a[d],b=u.modules[c],!(b&&b instanceof j))throw new Error("Module '"+c+"' not found");if(!b.supported)throw new Error("Module '"+c+"' not supported")}};var y=!1,z=function(){y||(y=!0,u.initialized||h())};return typeof window==m?void f("No window found"):typeof document==m?void f("No document found"):(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",z,!1),a(window,"addEventListener")?window.addEventListener("load",z,!1):a(window,"attachEvent")?window.attachEvent("onload",z):f("Window does not have required addEventListener or attachEvent method"),u)}(),rangy.createModule("DomUtil",function(a,b){function c(a){var b;return typeof a.namespaceURI==z||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)b++;return b}function f(a){var b;return j(a)?a.length:(b=a.childNodes)?b.length:0}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(D(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function j(a){var b=a.nodeType;return 3==b||4==b||8==b}function k(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function l(a,b){var c=a.cloneNode(!1);return c.deleteData(0,b),a.deleteData(b,a.length-b),k(c,a),c}function m(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=z)return a.ownerDocument;if(typeof a.document!=z)return a.document;if(a.parentNode)return m(a.parentNode);throw new Error("getDocument: no document found for node")}function n(a){var b=m(a);if(typeof b.defaultView!=z)return b.defaultView;if(typeof b.parentWindow!=z)return b.parentWindow;throw new Error("Cannot get a window object for node")}function o(a){if(typeof a.contentDocument!=z)return a.contentDocument;if(typeof a.contentWindow!=z)return a.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function p(a){if(typeof a.contentWindow!=z)return a.contentWindow;if(typeof a.contentDocument!=z)return a.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function q(a){return A.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]}function r(a){for(var b;b=a.parentNode;)a=b;return a}function s(a,b,c,d){var f,h,j,k,l;if(a==c)return b===d?0:d>b?-1:1;if(f=i(c,a,!0))return b<=e(f)?-1:1;if(f=i(a,c,!0))return e(f)<d?-1:1;if(h=g(a,c),j=a===h?h:i(a,h,!0),k=c===h?h:i(c,h,!0),j===k)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(l=h.firstChild;l;){if(l===j)return-1;if(l===k)return 1;l=l.nextSibling}throw new Error("Should not be here!")}function t(a){for(var b,c=m(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function u(a){if(!a)return"[No node]";if(j(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">["+a.childNodes.length+"]"}return a.nodeName}function v(a){this.root=a,this._next=a}function w(a){return new v(a)}function x(a,b){this.node=a,this.offset=b}function y(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var z="undefined",A=a.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),A.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var B=document.createElement("div");A.areHostMethods(B,["insertBefore","appendChild","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),A.isHostProperty(B,"innerHTML")||b.fail("Element is missing innerHTML property");var C=document.createTextNode("test");A.areHostMethods(C,["splitText","deleteData","insertData","appendData","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"])||!A.areHostProperties(C,["data"]))||b.fail("Incomplete Text Node implementation");var D=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};v.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},x.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+u(this.node)+":"+this.offset+")]"}},y.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},y.prototype.toString=function(){return this.message},a.dom={arrayContains:D,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,getClosestAncestorIn:i,isCharacterDataNode:j,insertAfter:k,splitDataNode:l,getDocument:m,getWindow:n,getIframeWindow:p,getIframeDocument:o,getBody:q,getRootContainer:r,comparePoints:s,inspectNode:u,fragmentFromNodeChildren:t,createIterator:w,DomPosition:x},a.DOMException=y}),rangy.createModule("DomRange",function(a){function b(a,b){return 3!=a.nodeType&&(L.isAncestorOf(a,b.startContainer,!0)||L.isAncestorOf(a,b.endContainer,!0))}function c(a){return L.getDocument(a.startContainer)}function d(a,b,c){var d=a._listeners[b];if(d)for(var e=0,f=d.length;f>e;++e)d[e].call(a,{target:a,args:c})}function e(a){return new M(a.parentNode,L.getNodeIndex(a))}function f(a){return new M(a.parentNode,L.getNodeIndex(a)+1)}function g(a,b,c){var d=11==a.nodeType?a.firstChild:a;return L.isCharacterDataNode(b)?c==b.length?L.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:L.splitDataNode(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function h(a){for(var b,d,e,f=c(a.range).createDocumentFragment();d=a.next();){if(b=a.isPartiallySelectedSubtree(),d=d.cloneNode(!b),b&&(e=a.getSubtreeIterator(),d.appendChild(h(e)),e.detach(!0)),10==d.nodeType)throw new N("HIERARCHY_REQUEST_ERR");f.appendChild(d)}return f}function i(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),i(g,b,c),g.detach(!0),c.stop)return}else for(d=L.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function j(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),j(b),b.detach(!0)):a.remove()}function k(a){for(var b,d,e=c(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),d=a.getSubtreeIterator(),b.appendChild(k(d)),d.detach(!0)):a.remove(),10==b.nodeType)throw new N("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function l(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return i(new n(a,!1),function(a){e&&!d.test(a.nodeType)||f&&!c(a)||g.push(a)}),g}function m(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+L.inspectNode(a.startContainer)+":"+a.startOffset+", "+L.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function n(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&L.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||L.isCharacterDataNode(this.sc)?L.getClosestAncestorIn(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||L.isCharacterDataNode(this.ec)?L.getClosestAncestorIn(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function o(a){this.code=this[a],this.codeName=a,this.message="RangeException: "+this.codeName}function p(a,b,c){this.nodes=l(a,b,c),this._next=this.nodes[0],this._position=0}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,L.arrayContains(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(W(a,b))throw new o("INVALID_NODE_TYPE_ERR")}function s(a){if(!a.startContainer)throw new N("INVALID_STATE_ERR")}function t(a,b){if(!L.arrayContains(b,a.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function u(a,b){if(0>b||b>(L.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new N("INDEX_SIZE_ERR")}function v(a,b){if(U(a,!0)!==U(b,!0))throw new N("WRONG_DOCUMENT_ERR")}function w(a){if(V(a,!0))throw new N("NO_MODIFICATION_ALLOWED_ERR")}function x(a,b){if(!a)throw new N(b)}function y(a){return!L.arrayContains(P,a.nodeType)&&!U(a,!0)}function z(a,b){return b<=(L.isCharacterDataNode(a)?a.length:a.childNodes.length)}function A(a){return!!a.startContainer&&!!a.endContainer&&!y(a.startContainer)&&!y(a.endContainer)&&z(a.startContainer,a.startOffset)&&z(a.endContainer,a.endOffset)}function B(a){if(s(a),!A(a))throw new Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}function C(){}function D(a){a.START_TO_START=ab,a.START_TO_END=bb,a.END_TO_END=cb,a.END_TO_START=db,a.NODE_BEFORE=eb,a.NODE_AFTER=fb,a.NODE_BEFORE_AND_AFTER=gb,a.NODE_INSIDE=hb}function E(a){D(a),D(a.prototype)}function F(a,b){return function(){B(this);var c,d,e=this.startContainer,g=this.startOffset,h=this.commonAncestorContainer,j=new n(this,!0);e!==h&&(c=L.getClosestAncestorIn(e,h,!0),d=f(c),e=d.node,g=d.offset),i(j,w),j.reset();var k=a(j);return j.detach(),b(this,e,g,e,g),k}}function G(c,d,g){function h(a,b){return function(c){s(this),t(c,O),t(T(c),P);var d=(a?e:f)(c);(b?i:l)(this,d.node,d.offset)}}function i(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((T(b)!=T(e)||1==L.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function l(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((T(b)!=T(e)||-1==L.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}function m(a,b,c){(b!==a.startContainer||c!==a.startOffset||b!==a.endContainer||c!==a.endOffset)&&d(a,b,c,b,c)}c.prototype=new C,a.util.extend(c.prototype,{setStart:function(a,b){s(this),r(a,!0),u(a,b),i(this,a,b)},setEnd:function(a,b){s(this),r(a,!0),u(a,b),l(this,a,b)},setStartBefore:h(!0,!0),setStartAfter:h(!1,!0),setEndBefore:h(!0,!1),setEndAfter:h(!1,!1),collapse:function(a){B(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){s(this),r(a,!0),d(this,a,0,a,L.getNodeLength(a))},selectNode:function(a){s(this),r(a,!1),t(a,O);var b=e(a),c=f(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:F(k,d),deleteContents:F(j,d),canSurroundContents:function(){B(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},detach:function(){g(this)},splitBoundaries:function(){B(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=a===c;L.isCharacterDataNode(c)&&e>0&&e<c.length&&L.splitDataNode(c,e),L.isCharacterDataNode(a)&&b>0&&b<a.length&&(a=L.splitDataNode(a,b),f?(e-=b,c=a):c==a.parentNode&&e>=L.getNodeIndex(a)&&e++,b=0),d(this,a,b,c,e)},normalizeBoundaries:function(){B(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(c=a,e=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},g=function(d){var f=d.previousSibling;if(f&&f.nodeType==d.nodeType){a=d;var g=d.length;if(b=f.length,d.insertData(0,f.data),f.parentNode.removeChild(f),a==c)e+=b,c=a;else if(c==d.parentNode){var h=L.getNodeIndex(d);e==h?(c=d,e=g):e>h&&e--}}},h=!0;if(L.isCharacterDataNode(c))c.length==e&&f(c);else{if(e>0){var i=c.childNodes[e-1];i&&L.isCharacterDataNode(i)&&f(i)}h=!this.collapsed}if(h){if(L.isCharacterDataNode(a))0==b&&g(a);else if(b<a.childNodes.length){var j=a.childNodes[b];j&&L.isCharacterDataNode(j)&&g(j)}}else a=c,b=e;d(this,a,b,c,e)},collapseToPoint:function(a,b){s(this),r(a,!0),u(a,b),m(this,a,b)}}),E(c)}function H(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:L.getCommonAncestor(a.startContainer,a.endContainer)}function I(a,b,c,e,f){var g=a.startContainer!==b||a.startOffset!==c,h=a.endContainer!==e||a.endOffset!==f;a.startContainer=b,a.startOffset=c,a.endContainer=e,a.endOffset=f,H(a),d(a,"boundarychange",{startMoved:g,endMoved:h})}function J(a){s(a),a.startContainer=a.startOffset=a.endContainer=a.endOffset=null,a.collapsed=a.commonAncestorContainer=null,d(a,"detach",null),a._listeners=null}function K(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},H(this)}a.requireModules(["DomUtil"]);var L=a.dom,M=L.DomPosition,N=a.DOMException;n.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,L.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!L.isCharacterDataNode(c)||c!==this.sc&&c!==this.ec?c.parentNode&&c.parentNode.removeChild(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return b(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new K(c(this.range));var b=this._current,d=b,e=0,f=b,g=L.getNodeLength(b);L.isAncestorOf(b,this.sc,!0)&&(d=this.sc,e=this.so),L.isAncestorOf(b,this.ec,!0)&&(f=this.ec,g=this.eo),I(a,d,e,f,g)}return new n(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},o.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},o.prototype.toString=function(){return this.message},p.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var O=[1,3,4,5,7,8,10],P=[2,9,11],Q=[5,6,10,12],R=[1,3,4,5,7,8,10,11],S=[1,3,4,5,7,8],T=L.getRootContainer,U=q([9,11]),V=q(Q),W=q([6,10,12]),X=document.createElement("style"),Y=!1;try{X.innerHTML="<b>x</b>",Y=3==X.firstChild.nodeType}catch(Z){}a.features.htmlParsingConforms=Y;var $=Y?function(a){var b=this.startContainer,c=L.getDocument(b);if(!b)throw new N("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:L.isCharacterDataNode(b)&&(d=L.parentElement(b)),d=null===d||"HTML"==d.nodeName&&L.isHtmlNamespace(L.getDocument(d).documentElement)&&L.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,L.fragmentFromNodeChildren(d)}:function(a){s(this);var b=c(this),d=b.createElement("body");return d.innerHTML=a,L.fragmentFromNodeChildren(d)},_=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ab=0,bb=1,cb=2,db=3,eb=0,fb=1,gb=2,hb=3;C.prototype={attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){B(this),v(this.startContainer,b.startContainer);var c,d,e,f,g=a==db||a==ab?"start":"end",h=a==bb||a==ab?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],L.comparePoints(c,d,e,f)},insertNode:function(a){if(B(this),t(a,R),w(this.startContainer),L.isAncestorOf(a,this.startContainer,!0))throw new N("HIERARCHY_REQUEST_ERR");var b=g(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){B(this);var a,b;if(this.collapsed)return c(this).createDocumentFragment();if(this.startContainer===this.endContainer&&L.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=c(this).createDocumentFragment(),b.appendChild(a),b;var d=new n(this,!0);return a=h(d),d.detach(),a},canSurroundContents:function(){B(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},surroundContents:function(a){if(t(a,S),!this.canSurroundContents())throw new o("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){B(this);for(var a,b=new K(c(this)),d=_.length;d--;)a=_[d],b[a]=this[a];return b},toString:function(){B(this);var a=this.startContainer;if(a===this.endContainer&&L.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new n(this,!0);return i(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){B(this);var b=a.parentNode,c=L.getNodeIndex(a);if(!b)throw new N("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?gb:eb:e>0?fb:hb},comparePoint:function(a,b){return B(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),L.comparePoints(a,b,this.startContainer,this.startOffset)<0?-1:L.comparePoints(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:$,toHtml:function(){B(this);var a=c(this).createElement("div");return a.appendChild(this.cloneContents()),a.innerHTML},intersectsNode:function(a,b){if(B(this),x(a,"NOT_FOUND_ERR"),L.getDocument(a)!==c(this))return!1;var d=a.parentNode,e=L.getNodeIndex(a);x(d,"NOT_FOUND_ERR");var f=L.comparePoints(d,e,this.endContainer,this.endOffset),g=L.comparePoints(d,e+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return B(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),L.comparePoints(a,b,this.startContainer,this.startOffset)>=0&&L.comparePoints(a,b,this.endContainer,this.endOffset)<=0;
},intersectsRange:function(a,b){if(B(this),c(a)!=c(this))throw new N("WRONG_DOCUMENT_ERR");var d=L.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),e=L.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return b?0>=d&&e>=0:0>d&&e>0},intersection:function(a){if(this.intersectsRange(a)){var b=L.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=L.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsRange(a,!0)){var b=this.cloneRange();return-1==L.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==L.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new o("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==hb},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,L.getNodeLength(a))<=0},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();b.setEnd(d,d.length);var e=this.containsRange(b);return b.detach(),e}return this.containsNodeContents(a)},createNodeIterator:function(a,b){return B(this),new p(this,a,b)},getNodes:function(a,b){return B(this),l(this,a,b)},getDocument:function(){return c(this)},collapseBefore:function(a){s(this),this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){s(this),this.setStartAfter(a),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return K.rangesEqual(this,a)},isValid:function(){return A(this)},inspect:function(){return m(this)}},G(K,I,J),a.rangePrototype=C.prototype,K.rangeProperties=_,K.RangeIterator=n,K.copyComparisonConstants=E,K.createPrototypeRange=G,K.inspect=m,K.getRangeDocument=c,K.rangesEqual=function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},a.DomRange=K,a.RangeException=o}),rangy.createModule("WrappedRange",function(a){function b(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var e=c.parentElement(),f=d==e?d:g.getCommonAncestor(d,e);return f==b?f:g.getCommonAncestor(b,f)}function c(a){return 0==a.compareEndPoints("StartToEnd",a)}function d(a,b,c,d){var e=a.duplicate();e.collapse(c);var f=e.parentElement();if(g.isAncestorOf(b,f,!0)||(f=b),!f.canHaveHTML)return new h(f.parentNode,g.getNodeIndex(f));var i,j,k,l,m,n=g.getDocument(f).createElement("span"),o=c?"StartToStart":"StartToEnd";do f.insertBefore(n,n.previousSibling),e.moveToElementText(n);while((i=e.compareEndPoints(o,a))>0&&n.previousSibling);if(m=n.nextSibling,-1==i&&m&&g.isCharacterDataNode(m)){e.setEndPoint(c?"EndToStart":"EndToEnd",a);var p;if(/[\r\n]/.test(m.data)){var q=e.duplicate(),r=q.text.replace(/\r\n/g,"\r").length;for(p=q.moveStart("character",r);-1==(i=q.compareEndPoints("StartToEnd",q));)p++,q.moveStart("character",1)}else p=e.text.length;l=new h(m,p)}else j=(d||!c)&&n.previousSibling,k=(d||c)&&n.nextSibling,l=k&&g.isCharacterDataNode(k)?new h(k,0):j&&g.isCharacterDataNode(j)?new h(j,j.length):new h(f,g.getNodeIndex(n));return n.parentNode.removeChild(n),l}function e(a,b){var c,d,e,f,h=a.offset,i=g.getDocument(a.node),j=i.body.createTextRange(),k=g.isCharacterDataNode(a.node);return k?(c=a.node,d=c.parentNode):(f=a.node.childNodes,c=h<f.length?f[h]:null,d=a.node),e=i.createElement("span"),e.innerHTML="&#feff;",c?d.insertBefore(e,c):d.appendChild(e),j.moveToElementText(e),j.collapse(!b),d.removeChild(e),k&&j[b?"moveStart":"moveEnd"]("character",h),j}a.requireModules(["DomUtil","DomRange"]);var f,g=a.dom,h=g.DomPosition,i=a.DomRange;if(!a.features.implementsDomRange||a.features.implementsTextRange&&a.config.preferTextRange){if(a.features.implementsTextRange){f=function(a){this.textRange=a,this.refresh()},f.prototype=new i(document),f.prototype.refresh=function(){var a,e,f=b(this.textRange);c(this.textRange)?e=a=d(this.textRange,f,!0,!0):(a=d(this.textRange,f,!0,!1),e=d(this.textRange,f,!1,!1)),this.setStart(a.node,a.offset),this.setEnd(e.node,e.offset)},i.copyComparisonConstants(f);var j=function(){return this}();"undefined"==typeof j.Range&&(j.Range=f),a.createNativeRange=function(a){return a=a||document,a.body.createTextRange()}}}else!function(){function b(a){for(var b,c=k.length;c--;)b=k[c],a[b]=a.nativeRange[b]}function c(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e;(f||g)&&(a.setEnd(d,e),a.setStart(b,c))}function d(a){a.nativeRange.detach(),a.detached=!0;for(var b,c=k.length;c--;)b=k[c],a[b]=null}var e,h,j,k=i.rangeProperties;f=function(a){if(!a)throw new Error("Range must be specified");this.nativeRange=a,b(this)},i.createPrototypeRange(f,c,d),e=f.prototype,e.selectNode=function(a){this.nativeRange.selectNode(a),b(this)},e.deleteContents=function(){this.nativeRange.deleteContents(),b(this)},e.extractContents=function(){var a=this.nativeRange.extractContents();return b(this),a},e.cloneContents=function(){return this.nativeRange.cloneContents()},e.surroundContents=function(a){this.nativeRange.surroundContents(a),b(this)},e.collapse=function(a){this.nativeRange.collapse(a),b(this)},e.cloneRange=function(){return new f(this.nativeRange.cloneRange())},e.refresh=function(){b(this)},e.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");g.getBody(document).appendChild(l);var m=document.createRange();m.setStart(l,0),m.setEnd(l,0);try{m.setStart(l,1),h=!0,e.setStart=function(a,c){this.nativeRange.setStart(a,c),b(this)},e.setEnd=function(a,c){this.nativeRange.setEnd(a,c),b(this)},j=function(a){return function(c){this.nativeRange[a](c),b(this)}}}catch(n){h=!1,e.setStart=function(a,c){try{this.nativeRange.setStart(a,c)}catch(d){this.nativeRange.setEnd(a,c),this.nativeRange.setStart(a,c)}b(this)},e.setEnd=function(a,c){try{this.nativeRange.setEnd(a,c)}catch(d){this.nativeRange.setStart(a,c),this.nativeRange.setEnd(a,c)}b(this)},j=function(a,c){return function(d){try{this.nativeRange[a](d)}catch(e){this.nativeRange[c](d),this.nativeRange[a](d)}b(this)}}}e.setStartBefore=j("setStartBefore","setEndBefore"),e.setStartAfter=j("setStartAfter","setEndAfter"),e.setEndBefore=j("setEndBefore","setStartBefore"),e.setEndAfter=j("setEndAfter","setStartAfter"),m.selectNodeContents(l),e.selectNodeContents=m.startContainer==l&&m.endContainer==l&&0==m.startOffset&&m.endOffset==l.length?function(a){this.nativeRange.selectNodeContents(a),b(this)}:function(a){this.setStart(a,0),this.setEnd(a,i.getEndOffset(a))},m.selectNodeContents(l),m.setEnd(l,3);var o=document.createRange();o.selectNodeContents(l),o.setEnd(l,4),o.setStart(l,2),e.compareBoundaryPoints=-1==m.compareBoundaryPoints(m.START_TO_END,o)&1==m.compareBoundaryPoints(m.END_TO_START,o)?function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)},a.util.isHostMethod(m,"createContextualFragment")&&(e.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),g.getBody(document).removeChild(l),m.detach(),o.detach()}(),a.createNativeRange=function(a){return a=a||document,a.createRange()};a.features.implementsTextRange&&(f.rangeToTextRange=function(a){if(a.collapsed){var b=e(new h(a.startContainer,a.startOffset),!0);return b}var c=e(new h(a.startContainer,a.startOffset),!0),d=e(new h(a.endContainer,a.endOffset),!1),f=g.getDocument(a.startContainer).body.createTextRange();return f.setEndPoint("StartToStart",c),f.setEndPoint("EndToEnd",d),f}),f.prototype.getName=function(){return"WrappedRange"},a.WrappedRange=f,a.createRange=function(b){return b=b||document,new f(a.createNativeRange(b))},a.createRangyRange=function(a){return a=a||document,new i(a)},a.createIframeRange=function(b){return a.createRange(g.getIframeDocument(b))},a.createIframeRangyRange=function(b){return a.createRangyRange(g.getIframeDocument(b))},a.addCreateMissingNativeApiListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(this)}),c=b=null})}),rangy.createModule("WrappedSelection",function(a,b){function c(a){return(a||window).getSelection()}function d(a){return(a||window).document.selection}function e(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function f(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function g(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function h(b){var c;return b instanceof y?(c=b._selectionNativeRange,c||(c=a.createNativeRange(w.getDocument(b.startContainer)),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset),b._selectionNativeRange=c,b.attachListener("detach",function(){this._selectionNativeRange=null}))):b instanceof z?c=b.nativeRange:a.features.implementsDomRange&&b instanceof w.getWindow(b.startContainer).Range&&(c=b),c}function i(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!w.isAncestorOf(a[0],a[b]))return!1;return!0}function j(a){var b=a.getNodes();if(!i(b))throw new Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return b[0]}function k(a){return!!a&&"undefined"!=typeof a.text}function l(a,b){var c=new z(b);a._ranges=[c],e(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function m(b){if(b._ranges.length=0,"None"==b.docSelection.type)g(b);else{var c=b.docSelection.createRange();if(k(c))l(b,c);else{b.rangeCount=c.length;for(var d,f=w.getDocument(c.item(0)),h=0;h<b.rangeCount;++h)d=a.createRange(f),d.selectNode(c.item(h)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,e(b,b._ranges[b.rangeCount-1],!1)}}}function n(a,b){for(var c=a.docSelection.createRange(),d=j(b),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=0,h=c.length;h>g;++g)f.add(c.item(g));try{f.add(d)}catch(i){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}f.select(),m(a)}function o(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function p(a,b){for(var c,d=w.getDocument(b[0].startContainer),e=w.getBody(d).createControlRange(),f=0;f<rangeCount;++f){c=j(b[f]);try{e.add(c)}catch(g){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}e.select(),m(a)}function q(a,b){if(a.anchorNode&&w.getDocument(a.anchorNode)!==w.getDocument(b))throw new A("WRONG_DOCUMENT_ERR")}function r(a){var b=[],c=new B(a.anchorNode,a.anchorOffset),d=new B(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=y.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.requireModules(["DomUtil","DomRange","WrappedRange"]),a.config.checkSelectionRanges=!0;var s,t,u="boolean",v="_rangySelection",w=a.dom,x=a.util,y=a.DomRange,z=a.WrappedRange,A=a.DOMException,B=w.DomPosition,C="Control",D=a.util.isHostMethod(window,"getSelection"),E=a.util.isHostObject(document,"selection"),F=E&&(!D||a.config.preferTextRange);F?(s=d,a.isSelectionValid=function(a){var b=(a||window).document,c=b.selection;return"None"!=c.type||w.getDocument(c.createRange().parentElement())==b}):D?(s=c,a.isSelectionValid=function(){return!0}):b.fail("Neither document.selection or window.getSelection() detected."),a.getNativeSelection=s;var G=s(),H=a.createNativeRange(document),I=w.getBody(document),J=x.areHostObjects(G,["anchorNode","focusNode"]&&x.areHostProperties(G,["anchorOffset","focusOffset"]));a.features.selectionHasAnchorAndFocus=J;var K=x.isHostMethod(G,"extend");a.features.selectionHasExtend=K;var L="number"==typeof G.rangeCount;a.features.selectionHasRangeCount=L;var M=!1,N=!0;x.areHostMethods(G,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof G.rangeCount&&a.features.implementsDomRange&&!function(){var a=document.createElement("iframe");a.frameBorder=0,a.style.position="absolute",a.style.left="-10000px",I.appendChild(a);var b=w.getIframeDocument(a);b.open(),b.write("<html><head></head><body>12</body></html>"),b.close();var c=w.getIframeWindow(a).getSelection(),d=b.documentElement,e=d.lastChild,f=e.firstChild,g=b.createRange();g.setStart(f,1),g.collapse(!0),c.addRange(g),N=1==c.rangeCount,c.removeAllRanges();var h=g.cloneRange();g.setStart(f,0),h.setEnd(f,2),c.addRange(g),c.addRange(h),M=2==c.rangeCount,g.detach(),h.detach(),I.removeChild(a)}(),a.features.selectionSupportsMultipleRanges=M,a.features.collapsedNonEditableSelectionsSupported=N;var O,P=!1;I&&x.isHostMethod(I,"createControlRange")&&(O=I.createControlRange(),x.areHostProperties(O,["item","add"])&&(P=!0)),a.features.implementsControlRange=P,t=J?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var Q;x.isHostMethod(G,"getRangeAt")?Q=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:J&&(Q=function(b){var c=w.getDocument(b.anchorNode),d=a.createRange(c);return d.setStart(b.anchorNode,b.anchorOffset),d.setEnd(b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&(d.setStart(b.focusNode,b.focusOffset),d.setEnd(b.anchorNode,b.anchorOffset)),d}),a.getSelection=function(a){a=a||window;var b=a[v],c=s(a),e=E?d(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh(a)):(b=new o(c,e,a),a[v]=b),b},a.getIframeSelection=function(b){return a.getSelection(w.getIframeWindow(b))};var R=o.prototype;if(!F&&J&&x.areHostMethods(G,["removeAllRanges","addRange"])){R.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),g(this)};var S=function(b,c){var d=y.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.nativeSelection.addRange(h(e)),b.nativeSelection.extend(c.startContainer,c.startOffset),b.refresh()};R.addRange=L?function(b,c){if(P&&E&&this.docSelection.type==C)n(this,b);else if(c&&K)S(this,b);else{var d;if(M?d=this.rangeCount:(this.removeAllRanges(),d=0),this.nativeSelection.addRange(h(b)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==d+1){if(a.config.checkSelectionRanges){var f=Q(this.nativeSelection,this.rangeCount-1);f&&!y.rangesEqual(f,b)&&(b=new z(f))}this._ranges[this.rangeCount-1]=b,e(this,b,V(this.nativeSelection)),this.isCollapsed=t(this)}else this.refresh()}}:function(a,b){b&&K?S(this,a):(this.nativeSelection.addRange(h(a)),this.refresh())},R.setRanges=function(a){if(P&&a.length>1)p(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(x.isHostMethod(G,"empty")&&x.isHostMethod(H,"select")&&P&&F))return b.fail("No means of selecting a Range or TextRange was found"),!1;R.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=w.getDocument(this.anchorNode);else if(this.docSelection.type==C){var b=this.docSelection.createRange();b.length&&(a=w.getDocument(b.item(0)).body.createTextRange())}if(a){var c=a.body.createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}g(this)},R.addRange=function(a){this.docSelection.type==C?n(this,a):(z.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,e(this,a,!1))},R.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?p(this,a):b&&this.addRange(a[0])}}R.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new A("INDEX_SIZE_ERR");return this._ranges[a]};var T;if(F)T=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=w.getBody(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==C?m(b):k(c)?l(b,c):g(b)};else if(x.isHostMethod(G,"getRangeAt")&&"number"==typeof G.rangeCount)T=function(b){if(P&&E&&b.docSelection.type==C)m(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));e(b,b._ranges[b.rangeCount-1],V(b.nativeSelection)),b.isCollapsed=t(b)}else g(b)};else{if(!J||typeof G.isCollapsed!=u||typeof H.collapsed!=u||!a.features.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;T=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=Q(c,0),a._ranges=[b],a.rangeCount=1,f(a),a.isCollapsed=t(a)):g(a)}}R.refresh=function(a){var b=a?this._ranges.slice(0):null;if(T(this),a){var c=b.length;if(c!=this._ranges.length)return!1;for(;c--;)if(!y.rangesEqual(b[c],this._ranges[c]))return!1;return!0}};var U=function(a,b){var c=a.getAllRanges(),d=!1;a.removeAllRanges();for(var e=0,f=c.length;f>e;++e)d||b!==c[e]?a.addRange(c[e]):d=!0;a.rangeCount||g(a)};R.removeRange=P?function(a){if(this.docSelection.type==C){for(var b,c=this.docSelection.createRange(),d=j(a),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),m(this)}else U(this,a)}:function(a){U(this,a)};var V;!F&&J&&a.features.implementsDomRange?(V=function(a){var b=!1;return a.anchorNode&&(b=1==w.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b},R.isBackwards=function(){return V(this)}):V=R.isBackwards=function(){return!1},R.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},R.collapse=function(b,c){q(this,b);var d=a.createRange(w.getDocument(b));d.collapseToPoint(b,c),this.removeAllRanges(),this.addRange(d),this.isCollapsed=!0},R.collapseToStart=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},R.collapseToEnd=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},R.selectAllChildren=function(b){q(this,b);var c=a.createRange(w.getDocument(b));c.selectNodeContents(b),this.removeAllRanges(),this.addRange(c)},R.deleteFromDocument=function(){if(P&&E&&this.docSelection.type==C){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),a.parentNode.removeChild(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}},R.getAllRanges=function(){return this._ranges.slice(0)},R.setSingleRange=function(a){this.setRanges([a])},R.containsNode=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(this._ranges[c].containsNode(a,b))return!0;return!1},R.toHtml=function(){var a="";if(this.rangeCount){for(var b=y.getRangeDocument(this._ranges[0]).createElement("div"),c=0,d=this._ranges.length;d>c;++c)b.appendChild(this._ranges[c].cloneContents());a=b.innerHTML}return a},R.getName=function(){return"WrappedSelection"},R.inspect=function(){return r(this)},R.detach=function(){this.win[v]=null,this.win=this.anchorNode=this.focusNode=null},o.inspect=r,a.Selection=o,a.selectionPrototype=R,a.addCreateMissingNativeApiListener(function(b){"undefined"==typeof b.getSelection&&(b.getSelection=function(){return a.getSelection(this)}),b=null})}),rangy.createModule("SaveRestore",function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=k.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(l)),f.insertNode(c),f.detach(),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),g.parentNode.removeChild(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(e){e=e||window;var g=e.document;if(!a.isSelectionValid(e))return void b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");var h,i,j,k=a.getSelection(e),l=k.getAllRanges(),m=[];l.sort(f);for(var n=0,o=l.length;o>n;++n)j=l[n],j.collapsed?(i=d(j,!1),m.push({markerId:i.id,collapsed:!0})):(i=d(j,!1),h=d(j,!0),m[n]={startMarkerId:h.id,endMarkerId:i.id,collapsed:!1,backwards:1==l.length&&k.isBackwards()});for(n=o-1;n>=0;--n)j=l[n],j.collapsed?j.collapseBefore(c(m[n].markerId,g)):(j.setEndBefore(c(m[n].endMarkerId,g)),j.setStartAfter(c(m[n].startMarkerId,g)));return k.setRanges(l),{win:e,doc:g,rangeInfos:m,restored:!1}}function h(d,f){if(!d.restored){for(var g,h,i=d.rangeInfos,j=a.getSelection(d.win),k=[],l=i.length,m=l-1;m>=0;--m){if(g=i[m],h=a.createRange(d.doc),g.collapsed){var n=c(g.markerId,d.doc);if(n){n.style.display="inline";var o=n.previousSibling;o&&3==o.nodeType?(n.parentNode.removeChild(n),h.collapseToPoint(o,o.length)):(h.collapseBefore(n),n.parentNode.removeChild(n))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(d.doc,h,g.startMarkerId,!0),e(d.doc,h,g.endMarkerId,!1);1==l&&h.normalizeBoundaries(),k[m]=h}1==l&&f&&a.features.selectionHasExtend&&i[0].backwards?(j.removeAllRanges(),j.addRange(k[0],!0)):j.setRanges(k),d.restored=!0}}function i(a,b){var d=c(b,a);d&&d.parentNode.removeChild(d)}function j(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?i(a.doc,b.markerId):(i(a.doc,b.startMarkerId),i(a.doc,b.endMarkerId))}a.requireModules(["DomUtil","DomRange","WrappedRange"]);var k=a.dom,l="\ufeff";a.saveSelection=g,a.restoreSelection=h,a.removeMarkerElement=i,a.removeMarkers=j})}({},function(){return this}()),!function(a,b){b["true"]=a,angular.module("textAngularSetup",[]).value("taOptions",{toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)?(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).run(["taRegisterTool","$window","taTranslations","taSelection",function(a,b,c,d){a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var e=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},f=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:f,activeState:e(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1}}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}});var g=function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),
f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)};a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:g}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if(a=b.prompt(c.insertVideo.dialogPrompt,"https://"),a&&""!==a&&"https://"!==a){var d=a.match(/(\?|&)v=[^&]*/);if(d&&d.length>0){var e="https://www.youtube.com/embed/"+d[0].substring(3),f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+d[0].substring(3)+'/hqdefault.jpg" ta-insert-video="'+e+'" contenteditable="false" src="" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:g}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return a?"A"===a[0].tagName:!1},onElementSelect:{element:"a",action:function(a,d,e){a.preventDefault(),e.displayElements.popover.css("width","436px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(a){a.preventDefault();var f=b.prompt(c.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+c.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)}}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML,c=b.replace(/(<[^>]*?>)/gi," "),d=c.match(/\S+/g),e=d&&d.length||0;return this.wordcount=e,this.$editor().wordcount=e,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),function(){"use strict";function a(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function b(b,c){if(!b||""===b||r.hasOwnProperty(b))throw"textAngular Error: A unique name is required for a Tool Definition";if(c.display&&(""===c.display||!a(c.display))||!c.display&&!c.buttontext&&!c.iconclass)throw'textAngular Error: Tool Definition for "'+b+'" does not have a valid display/iconclass/buttontext value';r[b]=c}var c={ie:function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},d=!1;c.webkit&&(document.addEventListener("mousedown",function(a){var b=a||window.event,c=b.target;if(d&&null!==c){for(var e=!1,f=c;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),c.focus(),c.select&&c.select())}d=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" unselectable="on" tabIndex="-1">'))}));var e=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,f=/^(ul|li|ol)$/i,g=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,i,j,k,l,m;if(c.ie>8||void 0===c.ie){for(var n=document.styleSheets,o=0;o<n.length;o++)if((0===n[o].media.length||n[o].media.mediaText.match(/(all|screen)/gi))&&n[o].href&&n[o].href.match(/textangular\.(min\.|)css/gi)){h=n[o];break}h||(h=function(){var a=document.createElement("style");return c.webkit&&a.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(a),a.sheet}()),i=function(a,b){return k(h,a,b)},k=function(a,b,c){var d,e;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),h.rules?e=h.rules[d]:h.cssRules&&(e=h.cssRules[d]),e},m=function(a,b){var c,d;for(c=0;c<b.length;c++)if(b[c].cssText===a.cssText){d=c;break}return d},j=function(a){l(h,a)},l=function(a,b){var c=m(b,a.cssRules||a.rules);a.removeRule?a.removeRule(c):a.deleteRule(c)}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===c.ie?"div":c.ie<=8?"P":"p":c.ie<=8?a.toUpperCase():a:c.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){var a=function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)c=b[3]||b[4],c&&c.match(/line-height: 1.428571429;|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.428571429;|( |)line-height:1.1;|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s*>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a};return a}).factory("taSanitize",["$sanitize",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,i,k,l=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,m="",n="",o=0;f=l.exec(a);){h=f[3]||f[4];var p=new RegExp(j,"i");if(angular.isString(h)&&p.test(h)){i="";for(var q=new RegExp(j,"ig");g=q.exec(h);)for(d=0;d<e.length;d++)g[2*d+2]&&(i+="<"+e[d].tag+">");k=c(a.substring(o,f.index)),n+=m.length>0?b(k,m):k,h=h.replace(new RegExp(j,"ig"),""),n+="<"+f[1].trim(),h.length>0&&(n+=' style="'+h+'"'),n+=f[5]+">",o=f.index+f[0].length,m=i}}return n+=m.length>0?b(a.substring(o),m):a.substring(o)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);){d+=a.substring(e,b.index),e=b.index+b[0].length;var f="<"+b[1]+b[5];/style=("([^"]+)"|'([^']+)')/gi.test(f)?f=f.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):f+=' style="text-align:'+(b[3]||b[4])+';"',f+=">",d+=f}return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){for(var h="("+e[g].property+":\\s*(",i=0;i<e[g].values.length;i++)i>0&&(h+="|"),h+=e[g].values[i];h+=");)",f.push(h)}var j="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i,j=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),k=h.replace(/(&#(9|10);)*/gi,""),l=/<pre[^>]*>.*?<\/pre[^>]*>/gi,m=0,n=0;for(h="";null!==(i=l.exec(k))&&m<j.length;)h+=k.substring(n,i.index)+j[m],n=i.index+i[0].length,m++;return h+k.substring(n)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d=a.defer(),e=d.promise,f=this.$editor();e["finally"](function(){f.endAction.call(f)});var g;try{g=this.action(d,f.startAction())}catch(h){b.error(h)}(g||void 0===g)&&d.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var d=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m){var n,o,p,q,r,s,t,u=angular.element("<"+g+">");try{t=a.getSelectionElement()}catch(v){}var w=angular.element(t);if(void 0!==t){var x=t.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var y=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(x===y)return d(w,g);if("li"===x&&w.parent()[0].tagName.toLowerCase()===y&&1===w.parent().children().length)return d(w.parent(),g);if("li"===x&&w.parent()[0].tagName.toLowerCase()!==y&&1===w.parent().children().length)return h(w.parent(),y);if(x.match(e)&&!w.hasClass("ta-bind")){if("ol"===x||"ul"===x)return h(w,y);var z=!1;return angular.forEach(w.children(),function(a){a.tagName.match(e)&&(z=!0)}),z?i(w.children(),w,y):i([angular.element("<div>"+t.innerHTML+"</div>")[0]],w,y)}if(x.match(e)){if(q=a.getOnlySelectedElements(),0===q.length)o=angular.element("<"+y+"><li>"+t.innerHTML+"</li></"+y+">"),w.html(""),w.append(o);else{if(1===q.length&&("ol"===q[0].tagName.toLowerCase()||"ul"===q[0].tagName.toLowerCase()))return q[0].tagName.toLowerCase()===y?d(angular.element(q[0]),g):h(angular.element(q[0]),y);p="";var A=[];for(n=0;n<q.length;n++)if(3!==q[n].nodeType){var B=angular.element(q[n]);if("li"===q[n].tagName.toLowerCase())continue;p+="ol"===q[n].tagName.toLowerCase()||"ul"===q[n].tagName.toLowerCase()?B[0].innerHTML:"span"!==q[n].tagName.toLowerCase()||"ol"!==q[n].childNodes[0].tagName.toLowerCase()&&"ul"!==q[n].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+B[0].innerHTML+"</"+b("li")+">":B[0].childNodes[0].innerHTML,A.unshift(B)}o=angular.element("<"+y+">"+p+"</"+y+">"),A.pop().replaceWith(o),angular.forEach(A,function(a){a.remove()})}return void a.setSelectionToElementEnd(o[0])}}else{if("formatblock"===k.toLowerCase()){for(s=m.toLowerCase().replace(/[<>]/gi,""),"default"===s.trim()&&(s=g,m="<"+g+">"),o="li"===x?w.parent():w;!o[0].tagName||!o[0].tagName.match(e)&&!o.parent().attr("contenteditable");)o=o.parent(),x=(o[0].tagName||"").toLowerCase();if(x===s){q=o.children();var C=!1;for(n=0;n<q.length;n++)C=C||q[n].tagName.match(e);C?(o.after(q),r=o.next(),o.remove(),o=r):(u.append(o[0].childNodes),o.after(u),o.remove(),o=u)}else if(o.parent()[0].tagName.toLowerCase()!==s||o.parent().hasClass("ta-bind"))if(x.match(f))o.wrap(m);else{for(q=a.getOnlySelectedElements(),0===q.length&&(q=[o[0]]),n=0;n<q.length;n++)if(3===q[n].nodeType||!q[n].tagName.match(e))for(;3===q[n].nodeType||!q[n].tagName||!q[n].tagName.match(e);)q[n]=q[n].parentNode;if(angular.element(q[0]).hasClass("ta-bind"))o=angular.element(m),o[0].innerHTML=q[0].innerHTML,q[0].innerHTML=o[0].outerHTML;else if("blockquote"===s){for(p="",n=0;n<q.length;n++)p+=q[n].outerHTML;for(o=angular.element(m),o[0].innerHTML=p,q[0].parentNode.insertBefore(o[0],q[0]),n=q.length-1;n>=0;n--)q[n].parentNode&&q[n].parentNode.removeChild(q[n])}else for(n=0;n<q.length;n++)o=angular.element(m),o[0].innerHTML=q[n].innerHTML,q[n].parentNode.insertBefore(o[0],q[n]),q[n].parentNode.removeChild(q[n])}else{var D=o.parent(),E=D.contents();for(n=0;n<E.length;n++)D.parent().hasClass("ta-bind")&&3===E[n].nodeType&&(u=angular.element("<"+g+">"),u[0].innerHTML=E[n].outerHTML,E[n]=u[0]),D.parent()[0].insertBefore(E[n],D[0]);D.remove()}return void a.setSelectionToElementEnd(o[0])}if("createlink"===k.toLowerCase()){var F=a.getSelection();if(F.collapsed)return void a.insertHtml('<a href="'+m+'">'+m+"</a>",j)}else if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{c[0].execCommand(k,l,m)}catch(v){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,c){var d=b[0],f=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,c.container=b.parentNode===c.start.element||b.parentNode===c.end.element?b.parentNode:b,c},getOnlySelectedElements:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=f.createRange();d.setStart(a,b),d.setEnd(a,c),f.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!1),f.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),f.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=f.getSelection().getRangeAt(0),r=d.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!e.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=d.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!g.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=d.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),c.transferChildNodes(r.childNodes[m],p[0]),c.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c))}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=angular.element("<div/>");b.html(a);var c=b.text().length;return f>=c?(d.$setValidity("taMaxText",!0),a):void d.$setValidity("taMaxText",!1)}var f=parseInt(a.$eval(c.taMaxText));if(isNaN(f))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(f=parseInt(a),isNaN(f))throw"Max text must be an integer";d.$dirty&&d.$setViewValue(d.$viewValue)}),d.$parsers.unshift(e)}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=angular.element("<div/>");b.html(a);var c=b.text().length;return!c||c>=f?(d.$setValidity("taMinText",!0),a):void d.$setValidity("taMinText",!1)}var f=parseInt(a.$eval(c.taMinText));if(isNaN(f))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(f=parseInt(a),isNaN(f))throw"Min text must be an integer";d.$dirty&&d.$setViewValue(d.$viewValue)}),d.$parsers.unshift(e)}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),/^[^<>]+$/i.test(c)?!1:0===c.length||c===b||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c)?!0:/>\s*[^\s<]/i.test(c)||a.test(c)?!1:!0}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM",function(a,b,e,f,h,k,l,m,n,o,q,r,s){return{require:"ngModel",link:function(k,t,u,v){var w,x,y,z,A=void 0!==t.attr("contenteditable")&&t.attr("contenteditable"),B=A||"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase(),C=!1,D=!1,E=!1,F=u.taUnsafeSanitizer||o.disableSanitizer,G=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,H=/^(8|13|32|46|59|61|107|109|186|187|188|189|190|191|192|219|220|221|222)$/i;void 0===u.taDefaultWrap&&(u.taDefaultWrap="p"),""===u.taDefaultWrap?(y="",z=void 0===c.ie?"<div><br></div>":c.ie>=11?"<p><br></p>":c.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(y=void 0===c.ie||c.ie>=11?"<"+u.taDefaultWrap+"><br></"+u.taDefaultWrap+">":c.ie<=8?"<"+u.taDefaultWrap.toUpperCase()+"></"+u.taDefaultWrap.toUpperCase()+">":"<"+u.taDefaultWrap+"></"+u.taDefaultWrap+">",z=void 0===c.ie||c.ie>=11?"<"+u.taDefaultWrap+"><br></"+u.taDefaultWrap+">":c.ie<=8?"<"+u.taDefaultWrap.toUpperCase()+">&nbsp;</"+u.taDefaultWrap.toUpperCase()+">":"<"+u.taDefaultWrap+">&nbsp;</"+u.taDefaultWrap+">");var I=q(z),J=function(a){if(I(a))return a;var b=angular.element("<div>"+a+"</div>");return 0===b.children().length&&(a="<"+u.taDefaultWrap+">"+a+"</"+u.taDefaultWrap+">"),a};u.taPaste&&(x=r(u.taPaste)),t.addClass("ta-bind");var K;k["$undoManager"+(u.id||"")]=v.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return"undefined"==typeof a||null===a||"undefined"!=typeof this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),K&&b.cancel(K),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var L=k["$undoTaBind"+(u.id||"")]=function(){if(!C&&A){var a=v.$undoManager.undo();"undefined"!=typeof a&&null!==a&&(Z(a),O(a,!1),l.setSelectionToElementEnd(t[0].childNodes.length?t[0].childNodes[t[0].childNodes.length-1]:t[0]))}},M=k["$redoTaBind"+(u.id||"")]=function(){if(!C&&A){var a=v.$undoManager.redo();"undefined"!=typeof a&&null!==a&&(Z(a),O(a,!1),l.setSelectionToElementEnd(t[0].childNodes.length?t[0].childNodes[t[0].childNodes.length-1]:t[0]))}},N=function(){if(A)return t[0].innerHTML;if(B)return t.val();throw"textAngular Error: attempting to update non-editable taBind"},O=function(a,b){E=!0,("undefined"==typeof b||null===b)&&(b=A),("undefined"==typeof a||null===a)&&(a=N()),I(a)?(""!==v.$viewValue&&v.$setViewValue(""),b&&""!==v.$undoManager.current()&&v.$undoManager.push("")):(Y(),v.$viewValue!==a&&(v.$setViewValue(a),b&&v.$undoManager.push(a)))};if(k["updateTaBind"+(u.id||"")]=function(){C||O()},B)if(k.events={},A){var P=!1,Q=function(c){if(c&&c.trim().length){if(c.match(/class=["']*Mso(Normal|List)/i)){var d=c.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);d=d?d[1]:c,d=d.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var e=angular.element("<div>"+d+"</div>"),f=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=e[0].childNodes.length;i++)if(e[0].childNodes[i]&&"#text"!==e[0].childNodes[i].nodeName&&"p"===e[0].childNodes[i].tagName.toLowerCase()){var j=angular.element(e[0].childNodes[i]),m=(j.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(m){if(j[0].childNodes.length<2||j[0].childNodes[1].childNodes.length<1)continue;var n="bullet"===m[1].toLowerCase()||"number"!==m[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(j[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(j[0].childNodes[1].childNodes[0].innerHTML)),o=(j.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),p=parseFloat(o?o[1]:0),q=(j.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(q&&q[2]&&(p=parseInt(q[2])),q&&(!g.lastLevelMatch||q[1]!==g.lastLevelMatch[1])||!m[3]||"first"===m[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==n&&g.lastIndent.peek()===p)h(n),f.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<p)g.element=angular.element(n?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>p){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>p;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),n!==g.isUl&&(h(n),f.append(g.element))}g.lastLevelMatch=q,p!==g.lastIndent.peek()&&g.lastIndent.push(p),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(j.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),j.remove()}else h(!1),f.append(j)}var r=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(f.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&r(a)}),angular.forEach(f.find("font"),r),c=f.html()}else{if(c=c.replace(/<(|\/)meta[^>]*?>/gi,""),c.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(c.match(/<[^>]*?(text-angular)[^>]*?>/)){var u=angular.element("<div>"+c+"</div>");u.find("textarea").remove();for(var w=s.getByAttribute(u,"ta-bind"),y=0;y<w.length;y++){for(var z=w[y][0].parentNode.parentNode,A=0;A<w[y][0].childNodes.length;A++)z.parentNode.insertBefore(w[y][0].childNodes[A],z);z.parentNode.removeChild(z)}c=u.html().replace('<br class="Apple-interchange-newline">',"")}}else c.match(/^<span/)&&(c=c.replace(/<(|\/)span[^>]*?>/gi,""));c=c.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}c=a(c,"",F),x&&(c=x(k,{$html:c})||c),l.insertHtml(c,t[0]),b(function(){v.$setViewValue(N()),P=!1,t.removeClass("processing-paste")},0)}else P=!1,t.removeClass("processing-paste")};if(t.on("paste",k.events.paste=function(a,c){if(c&&angular.extend(a,c),C||P)return a.stopPropagation(),a.preventDefault(),!1;P=!0,t.addClass("processing-paste");var d,g=(a.originalEvent||a).clipboardData;if(g&&g.getData&&g.types.length>0){for(var h="",i=0;i<g.types.length;i++)h+=" "+g.types[i];return/text\/html/i.test(h)?d=g.getData("text/html"):/text\/plain/i.test(h)&&(d=g.getData("text/plain")),Q(d),a.stopPropagation(),a.preventDefault(),!1}var j=e.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');f.find("body").append(k),k[0].focus(),b(function(){e.rangy.restoreSelection(j),Q(k[0].innerHTML),t[0].focus(),k.remove()},0)}),t.on("cut",k.events.cut=function(a){C?a.preventDefault():b(function(){v.$setViewValue(N())},0)}),t.on("keydown",k.events.keydown=function(a,b){if(b&&angular.extend(a,b),!C)if(!a.altKey&&a.metaKey||a.ctrlKey)90!==a.keyCode||a.shiftKey?(90===a.keyCode&&a.shiftKey||89===a.keyCode&&!a.shiftKey)&&(M(),a.preventDefault()):(L(),a.preventDefault());else if(13===a.keyCode&&!a.shiftKey){var c,d=l.getSelectionElement();if(!d.tagName.match(g))return;var e=angular.element(y);if(/^<br(|\/)>$/i.test(d.innerHTML.trim())&&"blockquote"===d.parentNode.tagName.toLowerCase()&&!d.nextSibling){c=angular.element(d);var f=c.parent();f.after(e),c.remove(),0===f.children().length&&f.remove(),l.setSelectionToElementStart(e[0]),a.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(d.innerHTML.trim())&&"blockquote"===d.tagName.toLowerCase()&&(c=angular.element(d),c.after(e),c.remove(),l.setSelectionToElementStart(e[0]),a.preventDefault())}}),t.on("keyup",k.events.keyup=function(a,c){if(c&&angular.extend(a,c),9===a.keyCode){var d=l.getSelection();return void(d.start.element===t[0]&&t.children().length&&l.setSelectionToElementStart(t.children()[0]))}if(K&&b.cancel(K),!C&&!G.test(a.keyCode)){if(""!==y&&13===a.keyCode&&!a.shiftKey){for(var f=l.getSelectionElement();!f.tagName.match(g)&&f!==t[0];)f=f.parentNode;if(f.tagName.toLowerCase()!==u.taDefaultWrap&&"li"!==f.tagName.toLowerCase()&&(""===f.innerHTML.trim()||"<br>"===f.innerHTML.trim())){var h=angular.element(y);angular.element(f).replaceWith(h),l.setSelectionToElementStart(h[0])}}var i=N();if(""!==y&&""===i.trim())Z(y),l.setSelectionToElementStart(t.children()[0]);else if("<"!==i.substring(0,1)&&""!==u.taDefaultWrap){var j=e.rangy.saveSelection();i=N(),i="<"+u.taDefaultWrap+">"+i+"</"+u.taDefaultWrap+">",Z(i),e.rangy.restoreSelection(j)}var k=w!==a.keyCode&&H.test(a.keyCode);O(i,k),k||(K=b(function(){v.$undoManager.push(i)},250)),w=a.keyCode}}),t.on("blur",k.events.blur=function(){D=!1,C||O(),E=!0,v.$render()}),u.placeholder&&(c.ie>8||void 0===c.ie)){var R;if(!u.id)throw"textAngular Error: An unique ID is required for placeholders to work";R=i("#"+u.id+".placeholder-text:before",'content: "'+u.placeholder+'"'),k.$on("$destroy",function(){j(R)})}t.on("focus",k.events.focus=function(){D=!0,t.removeClass("placeholder-text")}),t.on("mouseup",k.events.mouseup=function(){var a=l.getSelection();a.start.element===t[0]&&t.children().length&&l.setSelectionToElementStart(t.children()[0])}),t.on("mousedown",k.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{t.on("change blur",k.events.change=k.events.blur=function(){C||v.$setViewValue(N())}),t.on("keydown",k.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=t.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("	",c);-1!==g&&g>=f&&(t.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else t.val(e.substring(0,c)+"	"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;
a.preventDefault()}});var S=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},T=function(a,b){var c="",d=a.childNodes;b++,c+=S("	",b-1)+a.outerHTML.substring(0,a.outerHTML.indexOf("<li"));for(var e=0;e<d.length;e++)d[e].outerHTML&&(c+="ul"===d[e].nodeName.toLowerCase()||"ol"===d[e].nodeName.toLowerCase()?"\n"+T(d[e],b):"\n"+S("	",b)+d[e].outerHTML);return c+="\n"+S("	",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};v.$formatters.unshift(J),v.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;if(b.length>0){a="";for(var c=0;c<b.length;c++)b[c].outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===b[c].nodeName.toLowerCase()||"ol"===b[c].nodeName.toLowerCase()?""+T(b[c],0):""+b[c].outerHTML)}return a})}var U=function(b){return v.$oldViewValue=a(h(b),v.$oldViewValue,F)},V=function(a){return u.required&&v.$setValidity("required",!I(a)),a};v.$parsers.push(U),v.$parsers.unshift(V),v.$formatters.push(U),v.$formatters.unshift(J),v.$formatters.unshift(V),v.$formatters.unshift(function(a){return v.$undoManager.push(a||"")});var W=function(a){return k.$emit("ta-element-select",this),a.preventDefault(),!1},X=function(a,c){if(c&&angular.extend(a,c),!p&&!C){p=!0;var d;d=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,k.$emit("ta-drop-event",this,a,d),b(function(){p=!1,O()},100)}},Y=k["reApplyOnSelectorHandlers"+(u.id||"")]=function(){C||angular.forEach(m,function(a){t.find(a).off("click",W).on("click",W)})},Z=function(a){t[0].innerHTML=a};v.$render=function(){var a=v.$viewValue||"";E||(A&&D&&(t.removeClass("placeholder-text"),t[0].blur(),b(function(){t[0].focus(),l.setSelectionToElementEnd(t.children()[t.children().length-1])},1)),A?(Z(u.placeholder?""===a?y:a:""===a?y:a),C?t.off("drop",X):(Y(),t.on("drop",X))):"textarea"!==t[0].tagName.toLowerCase()&&"input"!==t[0].tagName.toLowerCase()?Z(n(a)):t.val(a)),A&&u.placeholder&&(""===a?D?t.removeClass("placeholder-text"):t.addClass("placeholder-text"):t.removeClass("placeholder-text")),E=!1},u.taReadonly&&(C=k.$eval(u.taReadonly),C?(t.addClass("ta-readonly"),("textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase())&&t.attr("disabled","disabled"),void 0!==t.attr("contenteditable")&&t.attr("contenteditable")&&t.removeAttr("contenteditable")):(t.removeClass("ta-readonly"),"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase()?t.removeAttr("disabled"):A&&t.attr("contenteditable","true")),k.$watch(u.taReadonly,function(a,b){b!==a&&(a?(t.addClass("ta-readonly"),("textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase())&&t.attr("disabled","disabled"),void 0!==t.attr("contenteditable")&&t.attr("contenteditable")&&t.removeAttr("contenteditable"),angular.forEach(m,function(a){t.find(a).on("click",W)}),t.off("drop",X)):(t.removeClass("ta-readonly"),"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase()?t.removeAttr("disabled"):A&&t.attr("contenteditable","true"),angular.forEach(m,function(a){t.find(a).off("click",W)}),t.on("drop",X)),C=a)})),A&&!C&&(angular.forEach(m,function(a){t.find(a).on("click",W)}),t.on("drop",X),t.on("blur",function(){c.webkit&&(d=!0)}))}}}]);var p=!1,q=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]),r={};q.constant("taRegisterTool",b),q.value("taTools",r),q.config([function(){angular.forEach(r,function(a,b){delete r[b]})}]),q.run([function(){if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}]),q.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+B;var C=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+B]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+B]():(y(a,!1,b),c&&m["reApplyOnSelectorHandlerstaTextElement"+B](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),m.fileDropHandler=o.taFileDrop?m.$parent.$eval(o.taFileDrop):m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),C(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){var a=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content")};k.when(i.removeClass(m.displayElements.popover,"in",a)).then(a)},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){var c={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))};if(b.shiftKey){var f=c.y/c.x;c.x=e>f?c.x:c.y/e,c.y=e>f?c.x*e:c.y}el=angular.element(a),el.attr("height",Math.max(0,c.y)),el.attr("width",Math.max(0,c.x)),m.reflowResizeOverlay(a)};b.on("mousemove",f),C(b,"mouseup",function(c){c.preventDefault(),c.stopPropagation(),b.off("mousemove",f),m.showPopover(a)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),C(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+B,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html"}),m.displayElements.text.attr({id:"taTextElement"+B,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html"}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+B],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+B],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var D=!1;if(m.startAction=function(){return m._actionRunning=!0,D=g.rangy.saveSelection(),function(){D&&g.rangy.restoreSelection(D)}},m.endAction=function(){m._actionRunning=!1,D&&g.rangy.removeMarkers(D),D=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+B]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var E=!0;p.$render=function(){if(E){E=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m._elementSelectTriggered||(m.html=p.$viewValue||"")};var F=function(a){return o.required&&p.$setValidity("required",!(!a||""===a.trim())),a};p.$parsers.push(F),p.$formatters.push(F)}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var G=angular.element('<div text-angular-toolbar name="textAngularToolbar'+B+'">');o.taToolbar&&G.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&G.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&G.attr("ta-toolbar-group-class",o.taToolbarGroupClass),o.taToolbarButtonClass&&G.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&G.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&G.attr("ta-focussed-class",o.taFocussedClass),n.prepend(G),a(G)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+B])}m.$on("$destroy",function(){f.unregisterEditor(m._name)}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+B]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+B]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+B]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;A&&b.cancel(A),void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&(A=b(m.updateSelectedStyles,200))},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),q.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&b.commandKeyCode===c.which)for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()}}}]),q.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=angular.element(b&&b.display?b.display:"<button type='button'>"),d.addClass(b&&b["class"]?b["class"]:g.classes.toolbarButton),d.attr("name",c.name),d.attr("unselectable","on"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),d.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}()}({},function(){return this}()),!function(a,b){b["true"]=a,function(a,b){"use strict";function c(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,k(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function d(a){var c=[],d=k(c,b.noop);return d.chars(a),c.join("")}function e(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),A[d])for(;k.last()&&B[k.last()];)e("",k.last());z[d]&&k.last()==d&&e("",d),h=w[d]||!!h,h||k.push(d);var i={};f.replace(o,function(a,b,c,d,e){var f=c||d||e||"";i[b]=g(f)}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=k.length-1;f>=0&&k[f]!=d;f--);if(f>=0){for(e=k.length-1;e>=f;e--)c.end&&c.end(k[e]);k.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,j,k=[],u=a;for(k.last=function(){return k[k.length-1]};a;){if(j="",h=!0,k.last()&&D[k.last()]?(a=a.replace(new RegExp("([^]*)<\\s*\\/\\s*"+k.last()+"[^>]*>","i"),function(a,b){return b=b.replace(r,"$1").replace(t,"$1"),c.chars&&c.chars(g(b)),""}),e("",k.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):s.test(a)?(i=a.match(s),i&&(a=a.replace(i[0],""),h=!1)):q.test(a)?(i=a.match(n),i&&(a=a.substring(i[0].length),i[0].replace(n,e),h=!1)):p.test(a)&&(i=a.match(m),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(m,d)),h=!1):(j+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(j)))),a==u)throw l("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function g(a){if(!a)return"";var b=K.exec(a),c=b[1],d=b[3],e=b[2];return e&&(J.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in J?J.textContent:J.innerText),c+e+d}function h(a){return a.replace(/&/g,"&amp;").replace(u,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(v,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=L(b.lowercase(d[0])),a=L(b.lowercase(d[1]));(("color"===e||"background-color"===e)&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===e&&a.match(/^ltr|rtl|initial|inherit$/))&&(c+=e+": "+a+";")}}),c}function j(a,b,c,d){return"img"===a&&b["ta-insert-video"]&&("ta-insert-video"===c||"allowfullscreen"===c||"frameborder"===c||"contenteditable"===c&&"false"===d)?!0:!1}function k(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&D[a]&&(d=a),d||E[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var k=b.lowercase(g),l="img"===a&&"src"===k||"background"===k;("style"===k&&""!==(d=i(d))||j(a,f,k,d)||I[k]===!0&&(F[k]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||E[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var l=b.$$minErr("$sanitize"),m=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,n=/^<\/\s*([\w:-]+)[^>]*>/,o=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,q=/^<\//,r=/<!--(.*?)-->/g,s=/<!DOCTYPE([^>]*?)>/i,t=/<!\[CDATA\[(.*?)]]>/g,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v=/([^\#-~| |!])/g,w=e("area,br,col,hr,img,wbr"),x=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=e("rp,rt"),z=b.extend({},y,x),A=b.extend({},x,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),B=b.extend({},y,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=e("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),D=e("script,style"),E=b.extend({},w,A,B,z,C),F=e("background,cite,href,longdesc,src,usemap,xlink:href"),G=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),H=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),I=b.extend({},F,H,G),J=document.createElement("pre"),K=/^(\s*)([\s\S]*?)(\s*)$/,L=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular)}({},function(){return this}()),function(){"use strict";var root=this,previous=root.Chart,Chart=function(context){this.canvas=context.canvas,this.ctx=context;var computeDimension=function(element,dimension){return element["offset"+dimension]?element["offset"+dimension]:document.defaultView.getComputedStyle(element).getPropertyValue(dimension)},width=this.width=computeDimension(context.canvas,"Width"),height=this.height=computeDimension(context.canvas,"Height");context.canvas.width=width,context.canvas.height=height;var width=this.width=context.canvas.width,height=this.height=context.canvas.height;return this.aspectRatio=this.width/this.height,helpers.retinaScale(this),this};Chart.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,
scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},Chart.types={};var helpers=Chart.helpers={},each=helpers.each=function(loopable,callback,self){var additionalArgs=Array.prototype.slice.call(arguments,3);if(loopable)if(loopable.length===+loopable.length){var i;for(i=0;i<loopable.length;i++)callback.apply(self,[loopable[i],i].concat(additionalArgs))}else for(var item in loopable)callback.apply(self,[loopable[item],item].concat(additionalArgs))},clone=helpers.clone=function(obj){var objClone={};return each(obj,function(value,key){obj.hasOwnProperty(key)&&(objClone[key]=value)}),objClone},extend=helpers.extend=function(base){return each(Array.prototype.slice.call(arguments,1),function(extensionObject){each(extensionObject,function(value,key){extensionObject.hasOwnProperty(key)&&(base[key]=value)})}),base},merge=helpers.merge=function(base,master){var args=Array.prototype.slice.call(arguments,0);return args.unshift({}),extend.apply(null,args)},indexOf=helpers.indexOf=function(arrayToSearch,item){if(Array.prototype.indexOf)return arrayToSearch.indexOf(item);for(var i=0;i<arrayToSearch.length;i++)if(arrayToSearch[i]===item)return i;return-1},inherits=(helpers.where=function(collection,filterCallback){var filtered=[];return helpers.each(collection,function(item){filterCallback(item)&&filtered.push(item)}),filtered},helpers.findNextWhere=function(arrayToSearch,filterCallback,startIndex){startIndex||(startIndex=-1);for(var i=startIndex+1;i<arrayToSearch.length;i++){var currentItem=arrayToSearch[i];if(filterCallback(currentItem))return currentItem}},helpers.findPreviousWhere=function(arrayToSearch,filterCallback,startIndex){startIndex||(startIndex=arrayToSearch.length);for(var i=startIndex-1;i>=0;i--){var currentItem=arrayToSearch[i];if(filterCallback(currentItem))return currentItem}},helpers.inherits=function(extensions){var parent=this,ChartElement=extensions&&extensions.hasOwnProperty("constructor")?extensions.constructor:function(){return parent.apply(this,arguments)},Surrogate=function(){this.constructor=ChartElement};return Surrogate.prototype=parent.prototype,ChartElement.prototype=new Surrogate,ChartElement.extend=inherits,extensions&&extend(ChartElement.prototype,extensions),ChartElement.__super__=parent.prototype,ChartElement}),noop=helpers.noop=function(){},uid=helpers.uid=function(){var id=0;return function(){return"chart-"+id++}}(),warn=helpers.warn=function(str){window.console&&"function"==typeof window.console.warn&&console.warn(str)},amd=helpers.amd="function"==typeof define&&define.amd,isNumber=helpers.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},max=helpers.max=function(array){return Math.max.apply(Math,array)},min=helpers.min=function(array){return Math.min.apply(Math,array)},getDecimalPlaces=(helpers.cap=function(valueToCap,maxValue,minValue){if(isNumber(maxValue)){if(valueToCap>maxValue)return maxValue}else if(isNumber(minValue)&&minValue>valueToCap)return minValue;return valueToCap},helpers.getDecimalPlaces=function(num){return num%1!==0&&isNumber(num)?num.toString().split(".")[1].length:0}),toRadians=helpers.radians=function(degrees){return degrees*(Math.PI/180)},aliasPixel=(helpers.getAngleFromPoint=function(centrePoint,anglePoint){var distanceFromXCenter=anglePoint.x-centrePoint.x,distanceFromYCenter=anglePoint.y-centrePoint.y,radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter),angle=2*Math.PI+Math.atan2(distanceFromYCenter,distanceFromXCenter);return 0>distanceFromXCenter&&0>distanceFromYCenter&&(angle+=2*Math.PI),{angle:angle,distance:radialDistanceFromCenter}},helpers.aliasPixel=function(pixelWidth){return pixelWidth%2===0?0:.5}),calculateOrderOfMagnitude=(helpers.splineCurve=function(FirstPoint,MiddlePoint,AfterPoint,t){var d01=Math.sqrt(Math.pow(MiddlePoint.x-FirstPoint.x,2)+Math.pow(MiddlePoint.y-FirstPoint.y,2)),d12=Math.sqrt(Math.pow(AfterPoint.x-MiddlePoint.x,2)+Math.pow(AfterPoint.y-MiddlePoint.y,2)),fa=t*d01/(d01+d12),fb=t*d12/(d01+d12);return{inner:{x:MiddlePoint.x-fa*(AfterPoint.x-FirstPoint.x),y:MiddlePoint.y-fa*(AfterPoint.y-FirstPoint.y)},outer:{x:MiddlePoint.x+fb*(AfterPoint.x-FirstPoint.x),y:MiddlePoint.y+fb*(AfterPoint.y-FirstPoint.y)}}},helpers.calculateOrderOfMagnitude=function(val){return Math.floor(Math.log(val)/Math.LN10)}),template=(helpers.calculateScaleRange=function(valuesArray,drawingSize,textSize,startFromZero,integersOnly){var minSteps=2,maxSteps=Math.floor(drawingSize/(1.5*textSize)),skipFitting=minSteps>=maxSteps,maxValue=max(valuesArray),minValue=min(valuesArray);maxValue===minValue&&(maxValue+=.5,minValue>=.5&&!startFromZero?minValue-=.5:maxValue+=.5);for(var valueRange=Math.abs(maxValue-minValue),rangeOrderOfMagnitude=calculateOrderOfMagnitude(valueRange),graphMax=Math.ceil(maxValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude),graphMin=startFromZero?0:Math.floor(minValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude),graphRange=graphMax-graphMin,stepValue=Math.pow(10,rangeOrderOfMagnitude),numberOfSteps=Math.round(graphRange/stepValue);(numberOfSteps>maxSteps||maxSteps>2*numberOfSteps)&&!skipFitting;)if(numberOfSteps>maxSteps)stepValue*=2,numberOfSteps=Math.round(graphRange/stepValue),numberOfSteps%1!==0&&(skipFitting=!0);else if(integersOnly&&rangeOrderOfMagnitude>=0){if(stepValue/2%1!==0)break;stepValue/=2,numberOfSteps=Math.round(graphRange/stepValue)}else stepValue/=2,numberOfSteps=Math.round(graphRange/stepValue);return skipFitting&&(numberOfSteps=minSteps,stepValue=graphRange/numberOfSteps),{steps:numberOfSteps,stepValue:stepValue,min:graphMin,max:graphMin+numberOfSteps*stepValue}},helpers.template=function(templateString,valuesObject){function tmpl(str,data){var fn=/\W/.test(str)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[str]=cache[str];return data?fn(data):fn}if(templateString instanceof Function)return templateString(valuesObject);var cache={};return tmpl(templateString,valuesObject)}),easingEffects=(helpers.generateLabels=function(templateString,numberOfSteps,graphMin,stepValue){var labelsArray=new Array(numberOfSteps);return labelTemplateString&&each(labelsArray,function(val,index){labelsArray[index]=template(templateString,{value:graphMin+stepValue*(index+1)})}),labelsArray},helpers.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:1==(t/=1)?1:(p||(p=.3),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)))},easeOutElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:1==(t/=1)?1:(p||(p=.3),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*t)*Math.sin((1*t-s)*(2*Math.PI)/p)+1)},easeInOutElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:2==(t/=.5)?1:(p||(p=1*(.3*1.5)),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),1>t?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)):a*Math.pow(2,-10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)*.5+1)},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;return(t/=.5)<1?.5*(t*t*(((s*=1.525)+1)*t-s)):.5*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)},easeInBounce:function(t){return 1-easingEffects.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*easingEffects.easeInBounce(2*t):.5*easingEffects.easeOutBounce(2*t-1)+.5}}),requestAnimFrame=helpers.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}(),cancelAnimFrame=helpers.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(callback){return window.clearTimeout(callback,1e3/60)}}(),addEvent=(helpers.animationLoop=function(callback,totalSteps,easingString,onProgress,onComplete,chartInstance){var currentStep=0,easingFunction=easingEffects[easingString]||easingEffects.linear,animationFrame=function(){currentStep++;var stepDecimal=currentStep/totalSteps,easeDecimal=easingFunction(stepDecimal);callback.call(chartInstance,easeDecimal,stepDecimal,currentStep),onProgress.call(chartInstance,easeDecimal,stepDecimal),totalSteps>currentStep?chartInstance.animationFrame=requestAnimFrame(animationFrame):onComplete.apply(chartInstance)};requestAnimFrame(animationFrame)},helpers.getRelativePosition=function(evt){var mouseX,mouseY,e=evt.originalEvent||evt,canvas=evt.currentTarget||evt.srcElement,boundingRect=canvas.getBoundingClientRect();return e.touches?(mouseX=e.touches[0].clientX-boundingRect.left,mouseY=e.touches[0].clientY-boundingRect.top):(mouseX=e.clientX-boundingRect.left,mouseY=e.clientY-boundingRect.top),{x:mouseX,y:mouseY}},helpers.addEvent=function(node,eventType,method){node.addEventListener?node.addEventListener(eventType,method):node.attachEvent?node.attachEvent("on"+eventType,method):node["on"+eventType]=method}),removeEvent=helpers.removeEvent=function(node,eventType,handler){node.removeEventListener?node.removeEventListener(eventType,handler,!1):node.detachEvent?node.detachEvent("on"+eventType,handler):node["on"+eventType]=noop},unbindEvents=(helpers.bindEvents=function(chartInstance,arrayOfEvents,handler){chartInstance.events||(chartInstance.events={}),each(arrayOfEvents,function(eventName){chartInstance.events[eventName]=function(){handler.apply(chartInstance,arguments)},addEvent(chartInstance.chart.canvas,eventName,chartInstance.events[eventName])})},helpers.unbindEvents=function(chartInstance,arrayOfEvents){each(arrayOfEvents,function(handler,eventName){removeEvent(chartInstance.chart.canvas,eventName,handler)})}),getMaximumWidth=helpers.getMaximumWidth=function(domNode){var container=domNode.parentNode;return container.clientWidth},getMaximumHeight=helpers.getMaximumHeight=function(domNode){var container=domNode.parentNode;return container.clientHeight},retinaScale=(helpers.getMaximumSize=helpers.getMaximumWidth,helpers.retinaScale=function(chart){var ctx=chart.ctx,width=chart.canvas.width,height=chart.canvas.height;window.devicePixelRatio&&(ctx.canvas.style.width=width+"px",ctx.canvas.style.height=height+"px",ctx.canvas.height=height*window.devicePixelRatio,ctx.canvas.width=width*window.devicePixelRatio,ctx.scale(window.devicePixelRatio,window.devicePixelRatio))}),clear=helpers.clear=function(chart){chart.ctx.clearRect(0,0,chart.width,chart.height)},fontString=helpers.fontString=function(pixelSize,fontStyle,fontFamily){return fontStyle+" "+pixelSize+"px "+fontFamily},longestText=helpers.longestText=function(ctx,font,arrayOfStrings){ctx.font=font;var longest=0;return each(arrayOfStrings,function(string){var textWidth=ctx.measureText(string).width;longest=textWidth>longest?textWidth:longest}),longest},drawRoundedRectangle=helpers.drawRoundedRectangle=function(ctx,x,y,width,height,radius){ctx.beginPath(),ctx.moveTo(x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height-radius),ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),ctx.lineTo(x+radius,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-radius),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.closePath()};Chart.instances={},Chart.Type=function(data,options,chart){this.options=options,this.chart=chart,this.id=uid(),Chart.instances[this.id]=this,options.responsive&&this.resize(),this.initialize.call(this,data)},extend(Chart.Type.prototype,{initialize:function(){return this},clear:function(){return clear(this.chart),this},stop:function(){return cancelAnimFrame(this.animationFrame),this},resize:function(callback){this.stop();var canvas=this.chart.canvas,newWidth=getMaximumWidth(this.chart.canvas),newHeight=this.options.maintainAspectRatio?newWidth/this.chart.aspectRatio:getMaximumHeight(this.chart.canvas);return canvas.width=this.chart.width=newWidth,canvas.height=this.chart.height=newHeight,retinaScale(this.chart),"function"==typeof callback&&callback.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:noop,render:function(reflow){return reflow&&this.reflow(),this.options.animation&&!reflow?helpers.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return template(this.options.legendTemplate,this)},destroy:function(){this.clear(),unbindEvents(this,this.events);var canvas=this.chart.canvas;canvas.width=this.chart.width,canvas.height=this.chart.height,canvas.style.removeProperty?(canvas.style.removeProperty("width"),canvas.style.removeProperty("height")):(canvas.style.removeAttribute("width"),canvas.style.removeAttribute("height")),delete Chart.instances[this.id]},showTooltip:function(ChartElements,forceRedraw){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var isChanged=function(Elements){var changed=!1;return Elements.length!==this.activeElements.length?changed=!0:(each(Elements,function(element,index){element!==this.activeElements[index]&&(changed=!0)},this),changed)}.call(this,ChartElements);if(isChanged||forceRedraw){if(this.activeElements=ChartElements,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),ChartElements.length>0)if(this.datasets&&this.datasets.length>1){for(var dataArray,dataIndex,i=this.datasets.length-1;i>=0&&(dataArray=this.datasets[i].points||this.datasets[i].bars||this.datasets[i].segments,dataIndex=indexOf(dataArray,ChartElements[0]),-1===dataIndex);i--);var tooltipLabels=[],tooltipColors=[],medianPosition=function(index){var dataCollection,xMax,yMax,xMin,yMin,Elements=[],xPositions=[],yPositions=[];return helpers.each(this.datasets,function(dataset){dataCollection=dataset.points||dataset.bars||dataset.segments,dataCollection[dataIndex]&&dataCollection[dataIndex].hasValue()&&Elements.push(dataCollection[dataIndex])}),helpers.each(Elements,function(element){xPositions.push(element.x),yPositions.push(element.y),tooltipLabels.push(helpers.template(this.options.multiTooltipTemplate,element)),tooltipColors.push({fill:element._saved.fillColor||element.fillColor,stroke:element._saved.strokeColor||element.strokeColor})},this),yMin=min(yPositions),yMax=max(yPositions),xMin=min(xPositions),xMax=max(xPositions),{x:xMin>this.chart.width/2?xMin:xMax,y:(yMin+yMax)/2}}.call(this,dataIndex);new Chart.MultiTooltip({x:medianPosition.x,y:medianPosition.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:tooltipLabels,legendColors:tooltipColors,legendColorBackground:this.options.multiTooltipKeyBackground,title:ChartElements[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else each(ChartElements,function(Element){var tooltipPosition=Element.tooltipPosition();new Chart.Tooltip({x:Math.round(tooltipPosition.x),y:Math.round(tooltipPosition.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:template(this.options.tooltipTemplate,Element),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),Chart.Type.extend=function(extensions){var parent=this,ChartType=function(){return parent.apply(this,arguments)};if(ChartType.prototype=clone(parent.prototype),extend(ChartType.prototype,extensions),ChartType.extend=Chart.Type.extend,extensions.name||parent.prototype.name){var chartName=extensions.name||parent.prototype.name,baseDefaults=Chart.defaults[parent.prototype.name]?clone(Chart.defaults[parent.prototype.name]):{};Chart.defaults[chartName]=extend(baseDefaults,extensions.defaults),Chart.types[chartName]=ChartType,Chart.prototype[chartName]=function(data,options){var config=merge(Chart.defaults.global,Chart.defaults[chartName],options||{});return new ChartType(data,config,this)}}else warn("Name not provided for this chart, so it hasn't been registered");return parent},Chart.Element=function(configuration){extend(this,configuration),this.initialize.apply(this,arguments),this.save()},extend(Chart.Element.prototype,{initialize:function(){},restore:function(props){return props?each(props,function(key){this[key]=this._saved[key]},this):extend(this,this._saved),this},save:function(){return this._saved=clone(this),delete this._saved._saved,this},update:function(newProps){return each(newProps,function(value,key){this._saved[key]=this[key],this[key]=value},this),this},transition:function(props,ease){return each(props,function(value,key){this[key]=(value-this._saved[key])*ease+this._saved[key]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return isNumber(this.value)}}),Chart.Element.extend=inherits,Chart.Point=Chart.Element.extend({display:!0,inRange:function(chartX,chartY){var hitDetectionRange=this.hitDetectionRadius+this.radius;return Math.pow(chartX-this.x,2)+Math.pow(chartY-this.y,2)<Math.pow(hitDetectionRange,2)},draw:function(){if(this.display){var ctx=this.ctx;ctx.beginPath(),ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),ctx.closePath(),ctx.strokeStyle=this.strokeColor,ctx.lineWidth=this.strokeWidth,ctx.fillStyle=this.fillColor,ctx.fill(),ctx.stroke()}}}),Chart.Arc=Chart.Element.extend({inRange:function(chartX,chartY){var pointRelativePosition=helpers.getAngleFromPoint(this,{x:chartX,y:chartY}),betweenAngles=pointRelativePosition.angle>=this.startAngle&&pointRelativePosition.angle<=this.endAngle,withinRadius=pointRelativePosition.distance>=this.innerRadius&&pointRelativePosition.distance<=this.outerRadius;return betweenAngles&&withinRadius},tooltipPosition:function(){var centreAngle=this.startAngle+(this.endAngle-this.startAngle)/2,rangeFromCentre=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(centreAngle)*rangeFromCentre,y:this.y+Math.sin(centreAngle)*rangeFromCentre}},draw:function(animationPercent){var ctx=this.ctx;ctx.beginPath(),ctx.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),ctx.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),ctx.closePath(),ctx.strokeStyle=this.strokeColor,ctx.lineWidth=this.strokeWidth,ctx.fillStyle=this.fillColor,ctx.fill(),ctx.lineJoin="bevel",this.showStroke&&ctx.stroke()}}),Chart.Rectangle=Chart.Element.extend({draw:function(){var ctx=this.ctx,halfWidth=this.width/2,leftX=this.x-halfWidth,rightX=this.x+halfWidth,top=this.base-(this.base-this.y),halfStroke=this.strokeWidth/2;this.showStroke&&(leftX+=halfStroke,rightX-=halfStroke,top+=halfStroke),ctx.beginPath(),ctx.fillStyle=this.fillColor,ctx.strokeStyle=this.strokeColor,ctx.lineWidth=this.strokeWidth,ctx.moveTo(leftX,this.base),ctx.lineTo(leftX,top),ctx.lineTo(rightX,top),ctx.lineTo(rightX,this.base),ctx.fill(),this.showStroke&&ctx.stroke()},height:function(){return this.base-this.y},inRange:function(chartX,chartY){return chartX>=this.x-this.width/2&&chartX<=this.x+this.width/2&&chartY>=this.y&&chartY<=this.base}}),Chart.Tooltip=Chart.Element.extend({draw:function(){var ctx=this.chart.ctx;ctx.font=fontString(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var caretPadding=this.caretPadding=2,tooltipWidth=ctx.measureText(this.text).width+2*this.xPadding,tooltipRectHeight=this.fontSize+2*this.yPadding,tooltipHeight=tooltipRectHeight+this.caretHeight+caretPadding;this.x+tooltipWidth/2>this.chart.width?this.xAlign="left":this.x-tooltipWidth/2<0&&(this.xAlign="right"),this.y-tooltipHeight<0&&(this.yAlign="below");var tooltipX=this.x-tooltipWidth/2,tooltipY=this.y-tooltipHeight;if(ctx.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":ctx.beginPath(),ctx.moveTo(this.x,this.y-caretPadding),ctx.lineTo(this.x+this.caretHeight,this.y-(caretPadding+this.caretHeight)),ctx.lineTo(this.x-this.caretHeight,this.y-(caretPadding+this.caretHeight)),ctx.closePath(),ctx.fill();break;case"below":tooltipY=this.y+caretPadding+this.caretHeight,ctx.beginPath(),ctx.moveTo(this.x,this.y+caretPadding),ctx.lineTo(this.x+this.caretHeight,this.y+caretPadding+this.caretHeight),ctx.lineTo(this.x-this.caretHeight,this.y+caretPadding+this.caretHeight),ctx.closePath(),ctx.fill()}switch(this.xAlign){case"left":tooltipX=this.x-tooltipWidth+(this.cornerRadius+this.caretHeight);break;case"right":tooltipX=this.x-(this.cornerRadius+this.caretHeight)}drawRoundedRectangle(ctx,tooltipX,tooltipY,tooltipWidth,tooltipRectHeight,this.cornerRadius),ctx.fill(),ctx.fillStyle=this.textColor,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(this.text,tooltipX+tooltipWidth/2,tooltipY+tooltipRectHeight/2)}}}),Chart.MultiTooltip=Chart.Element.extend({initialize:function(){this.font=fontString(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=fontString(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var titleWidth=this.ctx.measureText(this.title).width,labelWidth=longestText(this.ctx,this.font,this.labels)+this.fontSize+3,longestTextWidth=max([labelWidth,titleWidth]);this.width=longestTextWidth+2*this.xPadding;var halfHeight=this.height/2;this.y-halfHeight<0?this.y=halfHeight:this.y+halfHeight>this.chart.height&&(this.y=this.chart.height-halfHeight),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(index){var baseLineHeight=this.y-this.height/2+this.yPadding,afterTitleIndex=index-1;return 0===index?baseLineHeight+this.titleFontSize/2:baseLineHeight+(1.5*this.fontSize*afterTitleIndex+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{drawRoundedRectangle(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var ctx=this.ctx;ctx.fillStyle=this.fillColor,ctx.fill(),ctx.closePath(),ctx.textAlign="left",ctx.textBaseline="middle",ctx.fillStyle=this.titleTextColor,ctx.font=this.titleFont,ctx.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),ctx.font=this.font,helpers.each(this.labels,function(label,index){ctx.fillStyle=this.textColor,ctx.fillText(label,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(index+1)),ctx.fillStyle=this.legendColorBackground,ctx.fillRect(this.x+this.xPadding,this.getLineHeight(index+1)-this.fontSize/2,this.fontSize,this.fontSize),ctx.fillStyle=this.legendColors[index].fill,ctx.fillRect(this.x+this.xPadding,this.getLineHeight(index+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),Chart.Scale=Chart.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var stepDecimalPlaces=getDecimalPlaces(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(template(this.templateString,{value:(this.min+i*this.stepValue).toFixed(stepDecimalPlaces)}));this.yLabelWidth=this.display&&this.showLabels?longestText(this.ctx,this.font,this.yLabels):0},addXLabel:function(label){this.xLabels.push(label),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var cachedYLabelWidth,cachedHeight=this.endPoint-this.startPoint;for(this.calculateYRange(cachedHeight),this.buildYLabels(),this.calculateXLabelRotation();cachedHeight>this.endPoint-this.startPoint;)cachedHeight=this.endPoint-this.startPoint,cachedYLabelWidth=this.yLabelWidth,this.calculateYRange(cachedHeight),this.buildYLabels(),cachedYLabelWidth<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var firstRotated,lastRotated,firstWidth=this.ctx.measureText(this.xLabels[0]).width,lastWidth=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=lastWidth/2+3,this.xScalePaddingLeft=firstWidth/2>this.yLabelWidth+10?firstWidth/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var cosRotation,originalLabelWidth=longestText(this.ctx,this.font,this.xLabels);this.xLabelWidth=originalLabelWidth;for(var xGridWidth=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>xGridWidth&&0===this.xLabelRotation||this.xLabelWidth>xGridWidth&&this.xLabelRotation<=90&&this.xLabelRotation>0;)cosRotation=Math.cos(toRadians(this.xLabelRotation)),firstRotated=cosRotation*firstWidth,lastRotated=cosRotation*lastWidth,firstRotated+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=firstRotated+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=cosRotation*originalLabelWidth;this.xLabelRotation>0&&(this.endPoint-=Math.sin(toRadians(this.xLabelRotation))*originalLabelWidth+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:noop,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(value){var scalingFactor=this.drawingArea()/(this.min-this.max);return this.endPoint-scalingFactor*(value-this.min)},calculateX:function(index){var innerWidth=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),valueWidth=innerWidth/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),valueOffset=valueWidth*index+this.xScalePaddingLeft;return this.offsetGridLines&&(valueOffset+=valueWidth/2),Math.round(valueOffset)},update:function(newProps){helpers.extend(this,newProps),this.fit()},draw:function(){var ctx=this.ctx,yLabelGap=(this.endPoint-this.startPoint)/this.steps,xStart=Math.round(this.xScalePaddingLeft);this.display&&(ctx.fillStyle=this.textColor,ctx.font=this.font,each(this.yLabels,function(labelString,index){var yLabelCenter=this.endPoint-yLabelGap*index,linePositionY=Math.round(yLabelCenter),drawHorizontalLine=this.showHorizontalLines;ctx.textAlign="right",ctx.textBaseline="middle",this.showLabels&&ctx.fillText(labelString,xStart-10,yLabelCenter),0!==index||drawHorizontalLine||(drawHorizontalLine=!0),drawHorizontalLine&&ctx.beginPath(),index>0?(ctx.lineWidth=this.gridLineWidth,ctx.strokeStyle=this.gridLineColor):(ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor),linePositionY+=helpers.aliasPixel(ctx.lineWidth),drawHorizontalLine&&(ctx.moveTo(xStart,linePositionY),ctx.lineTo(this.width,linePositionY),ctx.stroke(),ctx.closePath()),ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor,ctx.beginPath(),ctx.moveTo(xStart-5,linePositionY),ctx.lineTo(xStart,linePositionY),ctx.stroke(),ctx.closePath()},this),each(this.xLabels,function(label,index){var xPos=this.calculateX(index)+aliasPixel(this.lineWidth),linePos=this.calculateX(index-(this.offsetGridLines?.5:0))+aliasPixel(this.lineWidth),isRotated=this.xLabelRotation>0,drawVerticalLine=this.showVerticalLines;0!==index||drawVerticalLine||(drawVerticalLine=!0),drawVerticalLine&&ctx.beginPath(),index>0?(ctx.lineWidth=this.gridLineWidth,ctx.strokeStyle=this.gridLineColor):(ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor),drawVerticalLine&&(ctx.moveTo(linePos,this.endPoint),ctx.lineTo(linePos,this.startPoint-3),ctx.stroke(),ctx.closePath()),ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor,ctx.beginPath(),ctx.moveTo(linePos,this.endPoint),ctx.lineTo(linePos,this.endPoint+5),ctx.stroke(),ctx.closePath(),ctx.save(),ctx.translate(xPos,isRotated?this.endPoint+12:this.endPoint+8),ctx.rotate(-1*toRadians(this.xLabelRotation)),ctx.font=this.font,ctx.textAlign=isRotated?"right":"center",ctx.textBaseline=isRotated?"middle":"top",ctx.fillText(label,0,0),ctx.restore()},this))}}),Chart.RadialScale=Chart.Element.extend({initialize:function(){this.size=min([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(value){var scalingFactor=this.drawingArea/(this.max-this.min);return(value-this.min)*scalingFactor},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var stepDecimalPlaces=getDecimalPlaces(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(template(this.templateString,{
value:(this.min+i*this.stepValue).toFixed(stepDecimalPlaces)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var pointPosition,i,textWidth,halfTextWidth,furthestRightIndex,furthestRightAngle,furthestLeftIndex,furthestLeftAngle,xProtrusionLeft,xProtrusionRight,radiusReductionRight,radiusReductionLeft,largestPossibleRadius=min([this.height/2-this.pointLabelFontSize-5,this.width/2]),furthestRight=this.width,furthestLeft=0;for(this.ctx.font=fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),i=0;i<this.valuesCount;i++)pointPosition=this.getPointPosition(i,largestPossibleRadius),textWidth=this.ctx.measureText(template(this.templateString,{value:this.labels[i]})).width+5,0===i||i===this.valuesCount/2?(halfTextWidth=textWidth/2,pointPosition.x+halfTextWidth>furthestRight&&(furthestRight=pointPosition.x+halfTextWidth,furthestRightIndex=i),pointPosition.x-halfTextWidth<furthestLeft&&(furthestLeft=pointPosition.x-halfTextWidth,furthestLeftIndex=i)):i<this.valuesCount/2?pointPosition.x+textWidth>furthestRight&&(furthestRight=pointPosition.x+textWidth,furthestRightIndex=i):i>this.valuesCount/2&&pointPosition.x-textWidth<furthestLeft&&(furthestLeft=pointPosition.x-textWidth,furthestLeftIndex=i);xProtrusionLeft=furthestLeft,xProtrusionRight=Math.ceil(furthestRight-this.width),furthestRightAngle=this.getIndexAngle(furthestRightIndex),furthestLeftAngle=this.getIndexAngle(furthestLeftIndex),radiusReductionRight=xProtrusionRight/Math.sin(furthestRightAngle+Math.PI/2),radiusReductionLeft=xProtrusionLeft/Math.sin(furthestLeftAngle+Math.PI/2),radiusReductionRight=isNumber(radiusReductionRight)?radiusReductionRight:0,radiusReductionLeft=isNumber(radiusReductionLeft)?radiusReductionLeft:0,this.drawingArea=largestPossibleRadius-(radiusReductionLeft+radiusReductionRight)/2,this.setCenterPoint(radiusReductionLeft,radiusReductionRight)},setCenterPoint:function(leftMovement,rightMovement){var maxRight=this.width-rightMovement-this.drawingArea,maxLeft=leftMovement+this.drawingArea;this.xCenter=(maxLeft+maxRight)/2,this.yCenter=this.height/2},getIndexAngle:function(index){var angleMultiplier=2*Math.PI/this.valuesCount;return index*angleMultiplier-Math.PI/2},getPointPosition:function(index,distanceFromCenter){var thisAngle=this.getIndexAngle(index);return{x:Math.cos(thisAngle)*distanceFromCenter+this.xCenter,y:Math.sin(thisAngle)*distanceFromCenter+this.yCenter}},draw:function(){if(this.display){var ctx=this.ctx;if(each(this.yLabels,function(label,index){if(index>0){var pointPosition,yCenterOffset=index*(this.drawingArea/this.steps),yHeight=this.yCenter-yCenterOffset;if(this.lineWidth>0)if(ctx.strokeStyle=this.lineColor,ctx.lineWidth=this.lineWidth,this.lineArc)ctx.beginPath(),ctx.arc(this.xCenter,this.yCenter,yCenterOffset,0,2*Math.PI),ctx.closePath(),ctx.stroke();else{ctx.beginPath();for(var i=0;i<this.valuesCount;i++)pointPosition=this.getPointPosition(i,this.calculateCenterOffset(this.min+index*this.stepValue)),0===i?ctx.moveTo(pointPosition.x,pointPosition.y):ctx.lineTo(pointPosition.x,pointPosition.y);ctx.closePath(),ctx.stroke()}if(this.showLabels){if(ctx.font=fontString(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var labelWidth=ctx.measureText(label).width;ctx.fillStyle=this.backdropColor,ctx.fillRect(this.xCenter-labelWidth/2-this.backdropPaddingX,yHeight-this.fontSize/2-this.backdropPaddingY,labelWidth+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle=this.fontColor,ctx.fillText(label,this.xCenter,yHeight)}}},this),!this.lineArc){ctx.lineWidth=this.angleLineWidth,ctx.strokeStyle=this.angleLineColor;for(var i=this.valuesCount-1;i>=0;i--){if(this.angleLineWidth>0){var outerPosition=this.getPointPosition(i,this.calculateCenterOffset(this.max));ctx.beginPath(),ctx.moveTo(this.xCenter,this.yCenter),ctx.lineTo(outerPosition.x,outerPosition.y),ctx.stroke(),ctx.closePath()}var pointLabelPosition=this.getPointPosition(i,this.calculateCenterOffset(this.max)+5);ctx.font=fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),ctx.fillStyle=this.pointLabelFontColor;var labelsCount=this.labels.length,halfLabelsCount=this.labels.length/2,quarterLabelsCount=halfLabelsCount/2,upperHalf=quarterLabelsCount>i||i>labelsCount-quarterLabelsCount,exactQuarter=i===quarterLabelsCount||i===labelsCount-quarterLabelsCount;0===i?ctx.textAlign="center":i===halfLabelsCount?ctx.textAlign="center":halfLabelsCount>i?ctx.textAlign="left":ctx.textAlign="right",exactQuarter?ctx.textBaseline="middle":upperHalf?ctx.textBaseline="bottom":ctx.textBaseline="top",ctx.fillText(this.labels[i],pointLabelPosition.x,pointLabelPosition.y)}}}}}),helpers.addEvent(window,"resize",function(){var timeout;return function(){clearTimeout(timeout),timeout=setTimeout(function(){each(Chart.instances,function(instance){instance.options.responsive&&instance.resize(instance.render,!0)})},50)}}()),amd?define(function(){return Chart}):"object"==typeof module&&module.exports&&(module.exports=Chart),root.Chart=Chart,Chart.noConflict=function(){return root.Chart=previous,Chart}}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers,defaultConfig={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Bar",defaults:defaultConfig,initialize:function(data){var options=this.options;this.ScaleClass=Chart.Scale.extend({offsetGridLines:!0,calculateBarX:function(datasetCount,datasetIndex,barIndex){var xWidth=this.calculateBaseWidth(),xAbsolute=this.calculateX(barIndex)-xWidth/2,barWidth=this.calculateBarWidth(datasetCount);return xAbsolute+barWidth*datasetIndex+datasetIndex*options.barDatasetSpacing+barWidth/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*options.barValueSpacing},calculateBarWidth:function(datasetCount){var baseWidth=this.calculateBaseWidth()-(datasetCount-1)*options.barDatasetSpacing;return baseWidth/datasetCount}}),this.datasets=[],this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeBars="mouseout"!==evt.type?this.getBarsAtEvent(evt):[];this.eachBars(function(bar){bar.restore(["fillColor","strokeColor"])}),helpers.each(activeBars,function(activeBar){activeBar.fillColor=activeBar.highlightFill,activeBar.strokeColor=activeBar.highlightStroke}),this.showTooltip(activeBars)}),this.BarClass=Chart.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),helpers.each(data.datasets,function(dataset,datasetIndex){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,bars:[]};this.datasets.push(datasetObject),helpers.each(dataset.data,function(dataPoint,index){datasetObject.bars.push(new this.BarClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,strokeColor:dataset.strokeColor,fillColor:dataset.fillColor,highlightFill:dataset.highlightFill||dataset.fillColor,highlightStroke:dataset.highlightStroke||dataset.strokeColor}))},this)},this),this.buildScale(data.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(bar,index,datasetIndex){helpers.extend(bar,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,datasetIndex,index),y:this.scale.endPoint}),bar.save()},this),this.render()},update:function(){this.scale.update(),helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])}),this.eachBars(function(bar){bar.save()}),this.render()},eachBars:function(callback){helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,callback,this,datasetIndex)},this)},getBarsAtEvent:function(e){for(var barIndex,barsArray=[],eventPosition=helpers.getRelativePosition(e),datasetIterator=function(dataset){barsArray.push(dataset.bars[barIndex])},datasetIndex=0;datasetIndex<this.datasets.length;datasetIndex++)for(barIndex=0;barIndex<this.datasets[datasetIndex].bars.length;barIndex++)if(this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y))return helpers.each(this.datasets,datasetIterator),barsArray;return barsArray},buildScale:function(labels){var self=this,dataTotal=function(){var values=[];return self.eachBars(function(bar){values.push(bar.value)}),values},scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(scaleOptions)},addData:function(valuesArray,label){helpers.each(valuesArray,function(value,datasetIndex){this.datasets[datasetIndex].bars.push(new this.BarClass({value:value,label:label,x:this.scale.calculateBarX(this.datasets.length,datasetIndex,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].strokeColor,fillColor:this.datasets[datasetIndex].fillColor}))},this),this.scale.addXLabel(label),this.update()},removeData:function(){this.scale.removeXLabel(),helpers.each(this.datasets,function(dataset){dataset.bars.shift()},this),this.update()},reflow:function(){helpers.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();this.chart.ctx;this.scale.draw(easingDecimal),helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,function(bar,index){bar.hasValue()&&(bar.base=this.scale.endPoint,bar.transition({x:this.scale.calculateBarX(this.datasets.length,datasetIndex,index),y:this.scale.calculateY(bar.value),width:this.scale.calculateBarWidth(this.datasets.length)},easingDecimal).draw())},this)},this)}})}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers,defaultConfig={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Doughnut",defaults:defaultConfig,initialize:function(data){this.segments=[],this.outerRadius=(helpers.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=Chart.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeSegments="mouseout"!==evt.type?this.getSegmentsAtEvent(evt):[];helpers.each(this.segments,function(segment){segment.restore(["fillColor"])}),helpers.each(activeSegments,function(activeSegment){activeSegment.fillColor=activeSegment.highlightColor}),this.showTooltip(activeSegments)}),this.calculateTotal(data),helpers.each(data,function(datapoint,index){this.addData(datapoint,index,!0)},this),this.render()},getSegmentsAtEvent:function(e){var segmentsArray=[],location=helpers.getRelativePosition(e);return helpers.each(this.segments,function(segment){segment.inRange(location.x,location.y)&&segmentsArray.push(segment)},this),segmentsArray},addData:function(segment,atIndex,silent){var index=atIndex||this.segments.length;this.segments.splice(index,0,new this.SegmentArc({value:segment.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:segment.color,highlightColor:segment.highlight||segment.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(segment.value),label:segment.label})),silent||(this.reflow(),this.update())},calculateCircumference:function(value){return 2*Math.PI*(Math.abs(value)/this.total)},calculateTotal:function(data){this.total=0,helpers.each(data,function(segment){this.total+=Math.abs(segment.value)},this)},update:function(){this.calculateTotal(this.segments),helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor"])}),helpers.each(this.segments,function(segment){segment.save()}),this.render()},removeData:function(atIndex){var indexToDelete=helpers.isNumber(atIndex)?atIndex:this.segments.length-1;this.segments.splice(indexToDelete,1),this.reflow(),this.update()},reflow:function(){helpers.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(helpers.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,helpers.each(this.segments,function(segment){segment.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(easeDecimal){var animDecimal=easeDecimal?easeDecimal:1;this.clear(),helpers.each(this.segments,function(segment,index){segment.transition({circumference:this.calculateCircumference(segment.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},animDecimal),segment.endAngle=segment.startAngle+segment.circumference,segment.draw(),0===index&&(segment.startAngle=1.5*Math.PI),index<this.segments.length-1&&(this.segments[index+1].startAngle=segment.endAngle)},this)}}),Chart.types.Doughnut.extend({name:"Pie",defaults:helpers.merge(defaultConfig,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers,defaultConfig={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Line",defaults:defaultConfig,initialize:function(data){this.PointClass=Chart.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(mouseX){return Math.pow(mouseX-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activePoints="mouseout"!==evt.type?this.getPointsAtEvent(evt):[];this.eachPoints(function(point){point.restore(["fillColor","strokeColor"])}),helpers.each(activePoints,function(activePoint){activePoint.fillColor=activePoint.highlightFill,activePoint.strokeColor=activePoint.highlightStroke}),this.showTooltip(activePoints)}),helpers.each(data.datasets,function(dataset){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,pointColor:dataset.pointColor,pointStrokeColor:dataset.pointStrokeColor,points:[]};this.datasets.push(datasetObject),helpers.each(dataset.data,function(dataPoint,index){datasetObject.points.push(new this.PointClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,strokeColor:dataset.pointStrokeColor,fillColor:dataset.pointColor,highlightFill:dataset.pointHighlightFill||dataset.pointColor,highlightStroke:dataset.pointHighlightStroke||dataset.pointStrokeColor}))},this),this.buildScale(data.labels),this.eachPoints(function(point,index){helpers.extend(point,{x:this.scale.calculateX(index),y:this.scale.endPoint}),point.save()},this)},this),this.render()},update:function(){this.scale.update(),helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])}),this.eachPoints(function(point){point.save()}),this.render()},eachPoints:function(callback){helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,callback,this)},this)},getPointsAtEvent:function(e){var pointsArray=[],eventPosition=helpers.getRelativePosition(e);return helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,function(point){point.inRange(eventPosition.x,eventPosition.y)&&pointsArray.push(point)})},this),pointsArray},buildScale:function(labels){var self=this,dataTotal=function(){var values=[];return self.eachPoints(function(point){values.push(point.value)}),values},scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new Chart.Scale(scaleOptions)},addData:function(valuesArray,label){helpers.each(valuesArray,function(value,datasetIndex){this.datasets[datasetIndex].points.push(new this.PointClass({value:value,label:label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].pointStrokeColor,fillColor:this.datasets[datasetIndex].pointColor}))},this),this.scale.addXLabel(label),this.update()},removeData:function(){this.scale.removeXLabel(),helpers.each(this.datasets,function(dataset){dataset.points.shift()},this),this.update()},reflow:function(){var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();var ctx=this.chart.ctx,hasValue=function(item){return null!==item.value},nextPoint=function(point,collection,index){return helpers.findNextWhere(collection,hasValue,index)||point},previousPoint=function(point,collection,index){return helpers.findPreviousWhere(collection,hasValue,index)||point};this.scale.draw(easingDecimal),helpers.each(this.datasets,function(dataset){var pointsWithValues=helpers.where(dataset.points,hasValue);helpers.each(dataset.points,function(point,index){point.hasValue()&&point.transition({y:this.scale.calculateY(point.value),x:this.scale.calculateX(index)},easingDecimal)},this),this.options.bezierCurve&&helpers.each(pointsWithValues,function(point,index){var tension=index>0&&index<pointsWithValues.length-1?this.options.bezierCurveTension:0;point.controlPoints=helpers.splineCurve(previousPoint(point,pointsWithValues,index),point,nextPoint(point,pointsWithValues,index),tension),point.controlPoints.outer.y>this.scale.endPoint?point.controlPoints.outer.y=this.scale.endPoint:point.controlPoints.outer.y<this.scale.startPoint&&(point.controlPoints.outer.y=this.scale.startPoint),point.controlPoints.inner.y>this.scale.endPoint?point.controlPoints.inner.y=this.scale.endPoint:point.controlPoints.inner.y<this.scale.startPoint&&(point.controlPoints.inner.y=this.scale.startPoint)},this),ctx.lineWidth=this.options.datasetStrokeWidth,ctx.strokeStyle=dataset.strokeColor,ctx.beginPath(),helpers.each(pointsWithValues,function(point,index){if(0===index)ctx.moveTo(point.x,point.y);else if(this.options.bezierCurve){var previous=previousPoint(point,pointsWithValues,index);ctx.bezierCurveTo(previous.controlPoints.outer.x,previous.controlPoints.outer.y,point.controlPoints.inner.x,point.controlPoints.inner.y,point.x,point.y)}else ctx.lineTo(point.x,point.y)},this),ctx.stroke(),this.options.datasetFill&&pointsWithValues.length>0&&(ctx.lineTo(pointsWithValues[pointsWithValues.length-1].x,this.scale.endPoint),ctx.lineTo(pointsWithValues[0].x,this.scale.endPoint),ctx.fillStyle=dataset.fillColor,ctx.closePath(),ctx.fill()),helpers.each(pointsWithValues,function(point){point.draw()})},this)}})}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers,defaultConfig={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"PolarArea",defaults:defaultConfig,initialize:function(data){this.segments=[],this.SegmentArc=Chart.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new Chart.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:data.length}),this.updateScaleRange(data),this.scale.update(),helpers.each(data,function(segment,index){this.addData(segment,index,!0)},this),this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeSegments="mouseout"!==evt.type?this.getSegmentsAtEvent(evt):[];helpers.each(this.segments,function(segment){segment.restore(["fillColor"])}),helpers.each(activeSegments,function(activeSegment){activeSegment.fillColor=activeSegment.highlightColor}),this.showTooltip(activeSegments)}),this.render()},getSegmentsAtEvent:function(e){var segmentsArray=[],location=helpers.getRelativePosition(e);return helpers.each(this.segments,function(segment){segment.inRange(location.x,location.y)&&segmentsArray.push(segment)},this),segmentsArray},addData:function(segment,atIndex,silent){var index=atIndex||this.segments.length;this.segments.splice(index,0,new this.SegmentArc({fillColor:segment.color,highlightColor:segment.highlight||segment.color,label:segment.label,value:segment.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(segment.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),silent||(this.reflow(),this.update())},removeData:function(atIndex){var indexToDelete=helpers.isNumber(atIndex)?atIndex:this.segments.length-1;this.segments.splice(indexToDelete,1),this.reflow(),this.update()},calculateTotal:function(data){this.total=0,helpers.each(data,function(segment){this.total+=segment.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(datapoints){var valuesArray=[];helpers.each(datapoints,function(segment){valuesArray.push(segment.value)});var scaleSizes=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:helpers.calculateScaleRange(valuesArray,helpers.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);helpers.extend(this.scale,scaleSizes,{size:helpers.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),helpers.each(this.segments,function(segment){segment.save()}),this.reflow(),this.render()},reflow:function(){helpers.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),helpers.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),helpers.each(this.segments,function(segment){segment.update({outerRadius:this.scale.calculateCenterOffset(segment.value)})},this)},draw:function(ease){var easingDecimal=ease||1;this.clear(),helpers.each(this.segments,function(segment,index){segment.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(segment.value)},easingDecimal),segment.endAngle=segment.startAngle+segment.circumference,0===index&&(segment.startAngle=1.5*Math.PI),index<this.segments.length-1&&(this.segments[index+1].startAngle=segment.endAngle),segment.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers;Chart.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(data){this.PointClass=Chart.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(data),this.options.showTooltips&&helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activePointsCollection="mouseout"!==evt.type?this.getPointsAtEvent(evt):[];this.eachPoints(function(point){point.restore(["fillColor","strokeColor"])}),helpers.each(activePointsCollection,function(activePoint){activePoint.fillColor=activePoint.highlightFill,activePoint.strokeColor=activePoint.highlightStroke}),this.showTooltip(activePointsCollection)}),helpers.each(data.datasets,function(dataset){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,pointColor:dataset.pointColor,pointStrokeColor:dataset.pointStrokeColor,points:[]};this.datasets.push(datasetObject),helpers.each(dataset.data,function(dataPoint,index){var pointPosition;this.scale.animation||(pointPosition=this.scale.getPointPosition(index,this.scale.calculateCenterOffset(dataPoint))),datasetObject.points.push(new this.PointClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,x:this.options.animation?this.scale.xCenter:pointPosition.x,y:this.options.animation?this.scale.yCenter:pointPosition.y,strokeColor:dataset.pointStrokeColor,fillColor:dataset.pointColor,highlightFill:dataset.pointHighlightFill||dataset.pointColor,highlightStroke:dataset.pointHighlightStroke||dataset.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(callback){helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,callback,this)},this)},getPointsAtEvent:function(evt){var mousePosition=helpers.getRelativePosition(evt),fromCenter=helpers.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},mousePosition),anglePerIndex=2*Math.PI/this.scale.valuesCount,pointIndex=Math.round((fromCenter.angle-1.5*Math.PI)/anglePerIndex),activePointsCollection=[];return(pointIndex>=this.scale.valuesCount||0>pointIndex)&&(pointIndex=0),fromCenter.distance<=this.scale.drawingArea&&helpers.each(this.datasets,function(dataset){activePointsCollection.push(dataset.points[pointIndex])}),activePointsCollection},buildScale:function(data){this.scale=new Chart.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,
pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:data.labels,valuesCount:data.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(data.datasets),this.scale.buildYLabels()},updateScaleRange:function(datasets){var valuesArray=function(){var totalDataArray=[];return helpers.each(datasets,function(dataset){dataset.data?totalDataArray=totalDataArray.concat(dataset.data):helpers.each(dataset.points,function(point){totalDataArray.push(point.value)})}),totalDataArray}(),scaleSizes=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:helpers.calculateScaleRange(valuesArray,helpers.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);helpers.extend(this.scale,scaleSizes)},addData:function(valuesArray,label){this.scale.valuesCount++,helpers.each(valuesArray,function(value,datasetIndex){var pointPosition=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(value));this.datasets[datasetIndex].points.push(new this.PointClass({value:value,label:label,x:pointPosition.x,y:pointPosition.y,strokeColor:this.datasets[datasetIndex].pointStrokeColor,fillColor:this.datasets[datasetIndex].pointColor}))},this),this.scale.labels.push(label),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),helpers.each(this.datasets,function(dataset){dataset.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(point){point.save()}),this.reflow(),this.render()},reflow:function(){helpers.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:helpers.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(ease){var easeDecimal=ease||1,ctx=this.chart.ctx;this.clear(),this.scale.draw(),helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,function(point,index){point.hasValue()&&point.transition(this.scale.getPointPosition(index,this.scale.calculateCenterOffset(point.value)),easeDecimal)},this),ctx.lineWidth=this.options.datasetStrokeWidth,ctx.strokeStyle=dataset.strokeColor,ctx.beginPath(),helpers.each(dataset.points,function(point,index){0===index?ctx.moveTo(point.x,point.y):ctx.lineTo(point.x,point.y)},this),ctx.closePath(),ctx.stroke(),ctx.fillStyle=dataset.fillColor,ctx.fill(),helpers.each(dataset.points,function(point){point.hasValue()&&point.draw()})},this)}})}.call(this),function(factory){"use strict";"function"==typeof define&&define.amd?define(["angular","chart.js"],factory):"object"==typeof exports?module.exports=factory(require("angular"),require("chart.js")):factory(angular,Chart)}(function(angular,Chart){"use strict";function ChartJsProvider(){var options={},ChartJs={Chart:Chart,getOptions:function(type){var typeOptions=type&&options[type]||{};return angular.extend({},options,typeOptions)}};this.setOptions=function(type,customOptions){return customOptions?void(options[type]=angular.extend(options[type]||{},customOptions)):(customOptions=type,void(options=angular.extend(options,customOptions)))},this.$get=function(){return ChartJs}}function ChartJsFactory(ChartJs){function canUpdateChart(newVal,oldVal){return newVal&&oldVal&&newVal.length&&oldVal.length?Array.isArray(newVal[0])?newVal.length===oldVal.length&&newVal[0].length===oldVal[0].length:oldVal.reduce(sum,0)>0?newVal.length===oldVal.length:!1:!1}function sum(carry,val){return carry+val}function createChart(type,scope,elem){if(scope.data&&scope.data.length){scope.getColour="function"==typeof scope.getColour?scope.getColour:getRandomColour,scope.colours=getColours(type,scope);var cvs=elem[0],ctx=cvs.getContext("2d"),data=Array.isArray(scope.data[0])?getDataSets(scope.labels,scope.data,scope.series||[],scope.colours):getData(scope.labels,scope.data,scope.colours),options=angular.extend({},ChartJs.getOptions(type),scope.options),chart=new ChartJs.Chart(ctx)[type](data,options);return scope.$emit("create",chart),["hover","click"].forEach(function(action){scope[action]&&(cvs["click"===action?"onclick":"onmousemove"]=getEventHandler(scope,chart,action))}),scope.legend&&"false"!==scope.legend&&setLegend(elem,chart),chart}}function getEventHandler(scope,chart,action){return function(evt){var atEvent=chart.getPointsAtEvent||chart.getBarsAtEvent||chart.getSegmentsAtEvent;if(atEvent){var activePoints=atEvent.call(chart,evt);scope[action](activePoints,evt),scope.$apply()}}}function getColours(type,scope){for(var colours=angular.copy(scope.colours||ChartJs.getOptions(type).colours||Chart.defaults.global.colours);colours.length<scope.data.length;)colours.push(scope.getColour());return colours.map(convertColour)}function convertColour(colour){return"object"==typeof colour&&null!==colour?colour:"string"==typeof colour&&"#"===colour[0]?getColour(hexToRgb(colour.substr(1))):getRandomColour()}function getRandomColour(){var colour=[getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)];return getColour(colour)}function getColour(colour){return{fillColor:rgba(colour,.2),strokeColor:rgba(colour,1),pointColor:rgba(colour,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:rgba(colour,.8)}}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}function rgba(colour,alpha){return"rgba("+colour.concat(alpha).join(",")+")"}function hexToRgb(hex){var bigint=parseInt(hex,16),r=bigint>>16&255,g=bigint>>8&255,b=255&bigint;return[r,g,b]}function getDataSets(labels,data,series,colours){return{labels:labels,datasets:data.map(function(item,i){return angular.extend({},colours[i],{label:series[i],data:item})})}}function getData(labels,data,colours){return labels.map(function(label,i){return angular.extend({},colours[i],{label:label,value:data[i],color:colours[i].strokeColor,highlight:colours[i].pointHighlightStroke})})}function setLegend(elem,chart){var $parent=elem.parent(),$oldLegend=$parent.find("chart-legend"),legend="<chart-legend>"+chart.generateLegend()+"</chart-legend>";$oldLegend.length?$oldLegend.replaceWith(legend):$parent.append(legend)}function updateChart(chart,values,scope){Array.isArray(scope.data[0])?chart.datasets.forEach(function(dataset,i){(dataset.points||dataset.bars).forEach(function(dataItem,j){dataItem.value=values[i][j]})}):chart.segments.forEach(function(segment,i){segment.value=values[i]}),chart.update(),scope.$emit("update",chart)}function isEmpty(value){return!value||Array.isArray(value)&&!value.length||"object"==typeof value&&!Object.keys(value).length}return function(type){return{restrict:"CA",scope:{data:"=",labels:"=",options:"=",series:"=",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=",hover:"="},link:function(scope,elem){function resetChart(newVal,oldVal){if(!isEmpty(newVal)&&!angular.equals(newVal,oldVal)){var chartType=type||scope.chartType;chartType&&(chart&&chart.destroy(),chart=createChart(chartType,scope,elem))}}var chart,container=document.createElement("div");container.className="chart-container",elem.replaceWith(container),container.appendChild(elem[0]),"object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement&&window.G_vmlCanvasManager.initElement(elem[0]),scope.$watch("data",function(newVal,oldVal){if(newVal&&newVal.length&&(!Array.isArray(newVal[0])||newVal[0].length)){var chartType=type||scope.chartType;if(chartType){if(chart){if(canUpdateChart(newVal,oldVal))return updateChart(chart,newVal,scope);chart.destroy()}chart=createChart(chartType,scope,elem)}}},!0),scope.$watch("series",resetChart,!0),scope.$watch("labels",resetChart,!0),scope.$watch("options",resetChart,!0),scope.$watch("colours",resetChart,!0),scope.$watch("chartType",function(newVal,oldVal){isEmpty(newVal)||angular.equals(newVal,oldVal)||(chart&&chart.destroy(),chart=createChart(newVal,scope,elem))}),scope.$on("$destroy",function(){chart&&chart.destroy()})}}}}Chart.defaults.global.responsive=!0,Chart.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",Chart.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"],angular.module("chart.js",[]).provider("ChartJs",ChartJsProvider).factory("ChartJsFactory",["ChartJs",ChartJsFactory]).directive("chartBase",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory}]).directive("chartLine",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Line")}]).directive("chartBar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Bar")}]).directive("chartRadar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("PolarArea")}])});